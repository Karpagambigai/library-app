{"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/db/db.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/db/db.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":122}},"2":{"start":{"line":4,"column":179},"end":{"line":4,"column":233}},"3":{"start":{"line":4,"column":266},"end":{"line":4,"column":666}},"4":{"start":{"line":4,"column":296},"end":{"line":4,"column":321}},"5":{"start":{"line":4,"column":322},"end":{"line":4,"column":664}},"6":{"start":{"line":4,"column":394},"end":{"line":4,"column":486}},"7":{"start":{"line":4,"column":410},"end":{"line":4,"column":423}},"8":{"start":{"line":4,"column":436},"end":{"line":4,"column":446}},"9":{"start":{"line":4,"column":464},"end":{"line":4,"column":478}},"10":{"start":{"line":4,"column":478},"end":{"line":4,"column":485}},"11":{"start":{"line":4,"column":486},"end":{"line":4,"column":640}},"12":{"start":{"line":4,"column":502},"end":{"line":4,"column":517}},"13":{"start":{"line":4,"column":525},"end":{"line":4,"column":639}},"14":{"start":{"line":4,"column":578},"end":{"line":4,"column":598}},"15":{"start":{"line":4,"column":617},"end":{"line":4,"column":636}},"16":{"start":{"line":4,"column":641},"end":{"line":4,"column":661}},"17":{"start":{"line":6,"column":9},"end":{"line":6,"column":11}},"18":{"start":{"line":8,"column":0},"end":{"line":10,"column":174}},"19":{"start":{"line":8,"column":65},"end":{"line":10,"column":105}},"20":{"start":{"line":10,"column":106},"end":{"line":10,"column":170}},"21":{"start":{"line":10,"column":133},"end":{"line":10,"column":168}},"22":{"start":{"line":13,"column":18},"end":{"line":13,"column":23}},"23":{"start":{"line":14,"column":0},"end":{"line":35,"column":78}},"24":{"start":{"line":38,"column":0},"end":{"line":46,"column":200}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":4,"column":150},"end":{"line":4,"column":172}},"loc":{"start":{"line":4,"column":178},"end":{"line":4,"column":234}},"line":4},"1":{"name":"_asyncToGenerator","decl":{"start":{"line":4,"column":243},"end":{"line":4,"column":260}},"loc":{"start":{"line":4,"column":265},"end":{"line":4,"column":667}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":4,"column":273},"end":{"line":4,"column":274}},"loc":{"start":{"line":4,"column":285},"end":{"line":4,"column":665}},"line":4},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":341},"end":{"line":4,"column":342}},"loc":{"start":{"line":4,"column":368},"end":{"line":4,"column":662}},"line":4},"4":{"name":"step","decl":{"start":{"line":4,"column":378},"end":{"line":4,"column":382}},"loc":{"start":{"line":4,"column":393},"end":{"line":4,"column":641}},"line":4},"5":{"name":"(anonymous_5)","decl":{"start":{"line":4,"column":560},"end":{"line":4,"column":561}},"loc":{"start":{"line":4,"column":577},"end":{"line":4,"column":599}},"line":4},"6":{"name":"(anonymous_6)","decl":{"start":{"line":4,"column":601},"end":{"line":4,"column":602}},"loc":{"start":{"line":4,"column":616},"end":{"line":4,"column":637}},"line":4},"7":{"name":"(anonymous_7)","decl":{"start":{"line":8,"column":41},"end":{"line":8,"column":42}},"loc":{"start":{"line":8,"column":53},"end":{"line":10,"column":171}},"line":8},"8":{"name":"_callee","decl":{"start":{"line":8,"column":154},"end":{"line":8,"column":161}},"loc":{"start":{"line":8,"column":199},"end":{"line":10,"column":103}},"line":8},"9":{"name":"(anonymous_9)","decl":{"start":{"line":10,"column":113},"end":{"line":10,"column":114}},"loc":{"start":{"line":10,"column":132},"end":{"line":10,"column":169}},"line":10},"10":{"name":"_callee2","decl":{"start":{"line":14,"column":131},"end":{"line":14,"column":139}},"loc":{"start":{"line":14,"column":166},"end":{"line":35,"column":75}},"line":14},"11":{"name":"_callee3","decl":{"start":{"line":38,"column":129},"end":{"line":38,"column":137}},"loc":{"start":{"line":38,"column":164},"end":{"line":46,"column":197}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":4,"column":186},"end":{"line":4,"column":232}},"type":"cond-expr","locations":[{"start":{"line":4,"column":210},"end":{"line":4,"column":213}},{"start":{"line":4,"column":216},"end":{"line":4,"column":232}}],"line":4},"1":{"loc":{"start":{"line":4,"column":186},"end":{"line":4,"column":207}},"type":"binary-expr","locations":[{"start":{"line":4,"column":186},"end":{"line":4,"column":189}},{"start":{"line":4,"column":193},"end":{"line":4,"column":207}}],"line":4},"2":{"loc":{"start":{"line":4,"column":486},"end":{"line":4,"column":640}},"type":"if","locations":[{"start":{"line":4,"column":486},"end":{"line":4,"column":640}},{"start":{"line":4,"column":486},"end":{"line":4,"column":640}}],"line":4}},"s":{"0":4,"1":4,"2":16,"3":12,"4":14,"5":14,"6":35,"7":35,"8":35,"9":0,"10":0,"11":35,"12":14,"13":21,"14":21,"15":0,"16":14,"17":4,"18":4,"19":4,"20":4,"21":0,"22":4,"23":4,"24":4},"f":{"0":16,"1":12,"2":14,"3":14,"4":35,"5":21,"6":0,"7":4,"8":0,"9":0,"10":7,"11":7},"b":{"0":[12,4],"1":[16,16],"2":[14,21]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"1c4df98a5bc823740010cfe1a5f0a848b39d3f98","code":["import Sequelize from 'sequelize';","import logger from '../logger.js';","import bookModel from '../models/book.js';","import memberModel from '../models/member.js';","","const db = {};","","db.transaction = async (f, username) => {","\tawait db.initializeDb();","\tawait db.sequelize.transaction(f);","};","","let initialized = false;","db.initializeDb = async () => {","\tif (!initialized) {","\t\tlet connectionString = '';","\t\tif (process.env.NODE_ENV === 'test') {","\t\t\tlogger.info('Connecting to test database.');","\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library_test';","\t\t}","\t\telse {","\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library';","\t\t}","","\t\tconst sequelize = new Sequelize(connectionString, {","\t\t\tlogging: false,","\t\t\tquery: {","\t\t\t\traw: true,","\t\t\t},","\t\t});","\t\tdb.member = memberModel(sequelize);","\t\tdb.book = bookModel(sequelize);","\t\tdb.sequelize = sequelize;","\t\tinitialized = true;","\t}","};","","db.syncSchema = async (force = false) => {","\ttry {","\t\tconst params = { force };","\t\tawait db.initializeDb();","\t\tawait db.member.sync(params);","\t\tawait db.book.sync(params);","\t}","\tcatch (e) {","\t\tlogger.error(e);","\t}","};","","export { db };",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logger.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logger.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":311},"end":{"line":1,"column":365}},"2":{"start":{"line":3,"column":13},"end":{"line":5,"column":18}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":1,"column":282},"end":{"line":1,"column":304}},"loc":{"start":{"line":1,"column":310},"end":{"line":1,"column":366}},"line":1}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":318},"end":{"line":1,"column":364}},"type":"cond-expr","locations":[{"start":{"line":1,"column":342},"end":{"line":1,"column":345}},{"start":{"line":1,"column":348},"end":{"line":1,"column":364}}],"line":1},"1":{"loc":{"start":{"line":1,"column":318},"end":{"line":1,"column":339}},"type":"binary-expr","locations":[{"start":{"line":1,"column":318},"end":{"line":1,"column":321}},{"start":{"line":1,"column":325},"end":{"line":1,"column":339}}],"line":1}},"s":{"0":4,"1":4,"2":4},"f":{"0":4},"b":{"0":[0,4],"1":[4,4]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"37f4279bebdca0f00baafebcd9b1ac0fea899ca8","code":["import Logger from '@athena/app-fabric-logger';","","const logger = new Logger({","\tprettyPrint: true,","\tcolorize: true,","});","","export default logger;",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/models/book.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/models/book.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":2,"column":171},"end":{"line":2,"column":225}},"2":{"start":{"line":2,"column":226},"end":{"line":37,"column":24}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":2,"column":142},"end":{"line":2,"column":164}},"loc":{"start":{"line":2,"column":170},"end":{"line":2,"column":226}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":0},"end":{"line":4,"column":1}},"loc":{"start":{"line":4,"column":53},"end":{"line":37,"column":23}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":178},"end":{"line":2,"column":224}},"type":"cond-expr","locations":[{"start":{"line":2,"column":202},"end":{"line":2,"column":205}},{"start":{"line":2,"column":208},"end":{"line":2,"column":224}}],"line":2},"1":{"loc":{"start":{"line":2,"column":178},"end":{"line":2,"column":199}},"type":"binary-expr","locations":[{"start":{"line":2,"column":178},"end":{"line":2,"column":181}},{"start":{"line":2,"column":185},"end":{"line":2,"column":199}}],"line":2}},"s":{"0":4,"1":8,"2":4},"f":{"0":8,"1":4},"b":{"0":[4,4],"1":[8,8]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"9e62ca2a59d3a5c40e76d7fe1eaa4960c6c09e05","code":["import Sequelize from 'sequelize';","import member from './member.js';","","export default (sequelizeInstance) => sequelizeInstance.define('book', {","\tname: {","\t\tfield: 'name',","\t\ttype: Sequelize.STRING(20),","\t\tnotNull: true,","\t},","\tauthor: {","\t\tfield: 'author',","\t\ttype: Sequelize.STRING(20),","\t\tnotNull: true,","\t},","\tpublishedDate: {","\t\tfield: 'publisheddate',","\t\ttype: Sequelize.DATE,","\t},","\tedition: {","\t\tfield: 'edition',","\t\ttype: Sequelize.STRING(2),","\t},","\tshelfNumber: {","\t\tfield: 'shelfnumber',","\t\ttype: Sequelize.STRING(2),","\t\tnotNull: true,","\t},","\tdeleted: {","\t\tfield: 'deleted',","\t\ttype: Sequelize.BOOLEAN,","\t\tnotNull: true,","\t\tdefaultValue: false,","\t},","\tnoOfBooksAvailable: {","\t\tfield: 'noofbooksavailable',","\t\ttype: Sequelize.INTEGER,","\t\tnotNull: true,","\t},","});","",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/models/member.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/models/member.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":277},"end":{"line":1,"column":331}},"2":{"start":{"line":1,"column":332},"end":{"line":37,"column":30}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":1,"column":248},"end":{"line":1,"column":270}},"loc":{"start":{"line":1,"column":276},"end":{"line":1,"column":332}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":0},"end":{"line":3,"column":1}},"loc":{"start":{"line":3,"column":53},"end":{"line":37,"column":29}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":284},"end":{"line":1,"column":330}},"type":"cond-expr","locations":[{"start":{"line":1,"column":308},"end":{"line":1,"column":311}},{"start":{"line":1,"column":314},"end":{"line":1,"column":330}}],"line":1},"1":{"loc":{"start":{"line":1,"column":284},"end":{"line":1,"column":305}},"type":"binary-expr","locations":[{"start":{"line":1,"column":284},"end":{"line":1,"column":287}},{"start":{"line":1,"column":291},"end":{"line":1,"column":305}}],"line":1}},"s":{"0":4,"1":4,"2":4},"f":{"0":4,"1":4},"b":{"0":[0,4],"1":[4,4]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"b32b6b3f118f3d6419a5a801d777298a8d100205","code":["import Sequelize from 'sequelize';","","export default (sequelizeInstance) => sequelizeInstance.define('member', {","\tusername: {","\t\tfield: 'username',","\t\ttype: Sequelize.STRING(20),","\t\tnotNull: true,","\t},","\tnoOfBooksTaken: {","\t\tfield: 'noofbookstaken',","\t\ttype: Sequelize.INTEGER,","\t\tnotNull: true,","\t\tdefaultValue: 0,","\t},","\tcontactNumber: {","\t\tfield: 'contactnumber',","\t\ttype: Sequelize.STRING(10),","\t},","\tamountDue: {","\t\tfield: 'amountdue',","\t\ttype: Sequelize.FLOAT,","\t\tnotNull: true,","\t\tdefaultValue: 0,","\t},","\tjoinedOn: {","\t\tfield: 'joinedon',","\t\ttype: Sequelize.DATE,","\t\tnotNull: true,","\t\tdefaultValue: function () {","\t\t\tconst date = new Date();","\t\t\treturn date.getDate();","\t\t},","\t},","\tunRegisteredYN: {","\t\tfield: 'unregisteredyn',","\t\ttype: Sequelize.BOOLEAN,","\t\tdefaultValue: false,","\t},","});","",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/server/server.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/server/server.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":7,"column":264},"end":{"line":7,"column":664}},"2":{"start":{"line":7,"column":294},"end":{"line":7,"column":319}},"3":{"start":{"line":7,"column":320},"end":{"line":7,"column":662}},"4":{"start":{"line":7,"column":392},"end":{"line":7,"column":484}},"5":{"start":{"line":7,"column":408},"end":{"line":7,"column":421}},"6":{"start":{"line":7,"column":434},"end":{"line":7,"column":444}},"7":{"start":{"line":7,"column":462},"end":{"line":7,"column":476}},"8":{"start":{"line":7,"column":476},"end":{"line":7,"column":483}},"9":{"start":{"line":7,"column":484},"end":{"line":7,"column":638}},"10":{"start":{"line":7,"column":500},"end":{"line":7,"column":515}},"11":{"start":{"line":7,"column":523},"end":{"line":7,"column":637}},"12":{"start":{"line":7,"column":576},"end":{"line":7,"column":596}},"13":{"start":{"line":7,"column":615},"end":{"line":7,"column":634}},"14":{"start":{"line":7,"column":639},"end":{"line":7,"column":659}},"15":{"start":{"line":7,"column":679},"end":{"line":7,"column":697}},"16":{"start":{"line":7,"column":715},"end":{"line":7,"column":737}},"17":{"start":{"line":9,"column":10},"end":{"line":9,"column":19}},"18":{"start":{"line":10,"column":11},"end":{"line":10,"column":15}},"19":{"start":{"line":12,"column":0},"end":{"line":15,"column":3}},"20":{"start":{"line":14,"column":1},"end":{"line":14,"column":8}},"21":{"start":{"line":17,"column":0},"end":{"line":17,"column":27}},"22":{"start":{"line":19,"column":0},"end":{"line":19,"column":124}},"23":{"start":{"line":20,"column":0},"end":{"line":20,"column":128}},"24":{"start":{"line":21,"column":0},"end":{"line":21,"column":148}},"25":{"start":{"line":23,"column":17},"end":{"line":26,"column":101}},"26":{"start":{"line":29,"column":0},"end":{"line":37,"column":81}}},"fnMap":{"0":{"name":"_asyncToGenerator","decl":{"start":{"line":7,"column":241},"end":{"line":7,"column":258}},"loc":{"start":{"line":7,"column":263},"end":{"line":7,"column":665}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":271},"end":{"line":7,"column":272}},"loc":{"start":{"line":7,"column":283},"end":{"line":7,"column":663}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":7,"column":339},"end":{"line":7,"column":340}},"loc":{"start":{"line":7,"column":366},"end":{"line":7,"column":660}},"line":7},"3":{"name":"step","decl":{"start":{"line":7,"column":376},"end":{"line":7,"column":380}},"loc":{"start":{"line":7,"column":391},"end":{"line":7,"column":639}},"line":7},"4":{"name":"(anonymous_4)","decl":{"start":{"line":7,"column":558},"end":{"line":7,"column":559}},"loc":{"start":{"line":7,"column":575},"end":{"line":7,"column":597}},"line":7},"5":{"name":"(anonymous_5)","decl":{"start":{"line":7,"column":599},"end":{"line":7,"column":600}},"loc":{"start":{"line":7,"column":614},"end":{"line":7,"column":635}},"line":7},"6":{"name":"(anonymous_6)","decl":{"start":{"line":12,"column":8},"end":{"line":12,"column":9}},"loc":{"start":{"line":12,"column":34},"end":{"line":15,"column":1}},"line":12},"7":{"name":"_callee","decl":{"start":{"line":23,"column":147},"end":{"line":23,"column":154}},"loc":{"start":{"line":23,"column":181},"end":{"line":26,"column":98}},"line":23},"8":{"name":"_callee2","decl":{"start":{"line":29,"column":128},"end":{"line":29,"column":136}},"loc":{"start":{"line":29,"column":163},"end":{"line":37,"column":78}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":484},"end":{"line":7,"column":638}},"type":"if","locations":[{"start":{"line":7,"column":484},"end":{"line":7,"column":638}},{"start":{"line":7,"column":484},"end":{"line":7,"column":638}}],"line":7}},"s":{"0":3,"1":6,"2":6,"3":6,"4":9,"5":9,"6":9,"7":0,"8":0,"9":9,"10":6,"11":3,"12":3,"13":0,"14":6,"15":3,"16":3,"17":3,"18":3,"19":3,"20":53,"21":3,"22":3,"23":3,"24":3,"25":3,"26":3},"f":{"0":6,"1":6,"2":6,"3":9,"4":3,"5":0,"6":53,"7":3,"8":3},"b":{"0":[6,3]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"ca6aec8b76fbebdad9d946042ddd2f07b1f63383","code":["const express = require('express');\r","const bodyParser = require('body-parser');\r","import logger from '../logger.js';\r","import { db } from '../db/db.js';\r","import { bookRouter } from '../controllers/bookController.js';\r","import { memberRouter } from '../controllers/memberController.js';\r","import { bookTransactionsRouter } from '../controllers/bookTransactionsController.js';\r","\r","const app = express();\r","const port = 8080;\r","\r","app.use((req, res, next) => {\r","\tlogger.info(`Incoming request.`);\r","\tnext();\r","});\r","\r","app.use(bodyParser.json());\r","\r","app.use('/api', bookRouter());\r","app.use('/api', memberRouter());\r","app.use('/api', bookTransactionsRouter());\r","\r","const httpServer = app.listen(port, async () => {\r","\tawait db.syncSchema();\r","\tconsole.log(`Server is running on port ${port}.`);\r","\tapp.emit('serverStarted');\r","});\r","\r","app.shutDown = async () => {\r","\tlogger.info('shutting down library app');\r","\r","\treturn new Promise((resolve, reject) => {\r","\t\thttpServer.close(() => {\r","\t\t\tlogger.info('closed http server.');\r","\t\t\tresolve(1);\r","\t\t});\r","\t});\r","};\r","\r","export default app;\r",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/bookController.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/bookController.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":130}},"2":{"start":{"line":3,"column":170},"end":{"line":3,"column":224}},"3":{"start":{"line":5,"column":41},"end":{"line":17,"column":1}},"4":{"start":{"line":7,"column":42},"end":{"line":7,"column":93}},"5":{"start":{"line":9,"column":1},"end":{"line":9,"column":270}},"6":{"start":{"line":10,"column":1},"end":{"line":10,"column":273}},"7":{"start":{"line":11,"column":1},"end":{"line":11,"column":273}},"8":{"start":{"line":12,"column":1},"end":{"line":12,"column":298}},"9":{"start":{"line":13,"column":1},"end":{"line":13,"column":278}},"10":{"start":{"line":14,"column":1},"end":{"line":14,"column":279}},"11":{"start":{"line":16,"column":1},"end":{"line":16,"column":19}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":3,"column":141},"end":{"line":3,"column":163}},"loc":{"start":{"line":3,"column":169},"end":{"line":3,"column":225}},"line":3},"1":{"name":"bookRouter","decl":{"start":{"line":5,"column":95},"end":{"line":5,"column":105}},"loc":{"start":{"line":5,"column":108},"end":{"line":17,"column":1}},"line":5},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":27},"end":{"line":9,"column":28}},"loc":{"start":{"line":9,"column":71},"end":{"line":9,"column":268}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":10,"column":26},"end":{"line":10,"column":27}},"loc":{"start":{"line":10,"column":70},"end":{"line":10,"column":271}},"line":10},"4":{"name":"(anonymous_4)","decl":{"start":{"line":11,"column":30},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":74},"end":{"line":11,"column":271}},"line":11},"5":{"name":"(anonymous_5)","decl":{"start":{"line":12,"column":43},"end":{"line":12,"column":44}},"loc":{"start":{"line":12,"column":87},"end":{"line":12,"column":296}},"line":12},"6":{"name":"(anonymous_6)","decl":{"start":{"line":13,"column":32},"end":{"line":13,"column":33}},"loc":{"start":{"line":13,"column":76},"end":{"line":13,"column":276}},"line":13},"7":{"name":"(anonymous_7)","decl":{"start":{"line":14,"column":33},"end":{"line":14,"column":34}},"loc":{"start":{"line":14,"column":77},"end":{"line":14,"column":277}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":177},"end":{"line":3,"column":223}},"type":"cond-expr","locations":[{"start":{"line":3,"column":201},"end":{"line":3,"column":204}},{"start":{"line":3,"column":207},"end":{"line":3,"column":223}}],"line":3},"1":{"loc":{"start":{"line":3,"column":177},"end":{"line":3,"column":198}},"type":"binary-expr","locations":[{"start":{"line":3,"column":177},"end":{"line":3,"column":180}},{"start":{"line":3,"column":184},"end":{"line":3,"column":198}}],"line":3}},"s":{"0":3,"1":3,"2":6,"3":3,"4":3,"5":3,"6":3,"7":3,"8":3,"9":3,"10":3,"11":3},"f":{"0":6,"1":3,"2":9,"3":2,"4":3,"5":3,"6":6,"7":3},"b":{"0":[3,3],"1":[6,6]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"eeae16efebabe2d0227f7278b72d253679d973a8","code":["import express from 'express';","import { requestHandler } from '../middleware/handlers.js';","import BookFunctions from '../logic/book.js';","","export const bookRouter = () => {","","\tconst bookRouter = express.Router();","","\tbookRouter.post   ('/books',                  (req, res) => requestHandler(req, res, BookFunctions.addBook));","\tbookRouter.get    ('/books',                  (req, res) => requestHandler(req, res, BookFunctions.getAllBooks));","\tbookRouter.get    ('/books/:id',              (req, res) => requestHandler(req, res, BookFunctions.getBook));","\tbookRouter.get    ('/books/availability/:id', (req, res) => requestHandler(req, res, BookFunctions.getBookAvailability));","\tbookRouter.patch  ('/books/:id',              (req, res) => requestHandler(req, res, BookFunctions.updateBook));","\tbookRouter.delete ('/books/:id',              (req, res) => requestHandler(req, res, BookFunctions.deleteBook));","","\treturn bookRouter;","};","",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/middleware/handlers.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/middleware/handlers.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":134}},"2":{"start":{"line":1,"column":306},"end":{"line":1,"column":360}},"3":{"start":{"line":1,"column":393},"end":{"line":1,"column":793}},"4":{"start":{"line":1,"column":423},"end":{"line":1,"column":448}},"5":{"start":{"line":1,"column":449},"end":{"line":1,"column":791}},"6":{"start":{"line":1,"column":521},"end":{"line":1,"column":613}},"7":{"start":{"line":1,"column":537},"end":{"line":1,"column":550}},"8":{"start":{"line":1,"column":563},"end":{"line":1,"column":573}},"9":{"start":{"line":1,"column":591},"end":{"line":1,"column":605}},"10":{"start":{"line":1,"column":605},"end":{"line":1,"column":612}},"11":{"start":{"line":1,"column":613},"end":{"line":1,"column":767}},"12":{"start":{"line":1,"column":629},"end":{"line":1,"column":644}},"13":{"start":{"line":1,"column":652},"end":{"line":1,"column":766}},"14":{"start":{"line":1,"column":705},"end":{"line":1,"column":725}},"15":{"start":{"line":1,"column":744},"end":{"line":1,"column":763}},"16":{"start":{"line":1,"column":768},"end":{"line":1,"column":788}},"17":{"start":{"line":3,"column":45},"end":{"line":40,"column":218}},"18":{"start":{"line":3,"column":94},"end":{"line":40,"column":131}},"19":{"start":{"line":40,"column":132},"end":{"line":40,"column":215}},"20":{"start":{"line":40,"column":178},"end":{"line":40,"column":213}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":1,"column":277},"end":{"line":1,"column":299}},"loc":{"start":{"line":1,"column":305},"end":{"line":1,"column":361}},"line":1},"1":{"name":"_asyncToGenerator","decl":{"start":{"line":1,"column":370},"end":{"line":1,"column":387}},"loc":{"start":{"line":1,"column":392},"end":{"line":1,"column":794}},"line":1},"2":{"name":"(anonymous_2)","decl":{"start":{"line":1,"column":400},"end":{"line":1,"column":401}},"loc":{"start":{"line":1,"column":412},"end":{"line":1,"column":792}},"line":1},"3":{"name":"(anonymous_3)","decl":{"start":{"line":1,"column":468},"end":{"line":1,"column":469}},"loc":{"start":{"line":1,"column":495},"end":{"line":1,"column":789}},"line":1},"4":{"name":"step","decl":{"start":{"line":1,"column":505},"end":{"line":1,"column":509}},"loc":{"start":{"line":1,"column":520},"end":{"line":1,"column":768}},"line":1},"5":{"name":"(anonymous_5)","decl":{"start":{"line":1,"column":687},"end":{"line":1,"column":688}},"loc":{"start":{"line":1,"column":704},"end":{"line":1,"column":726}},"line":1},"6":{"name":"(anonymous_6)","decl":{"start":{"line":1,"column":728},"end":{"line":1,"column":729}},"loc":{"start":{"line":1,"column":743},"end":{"line":1,"column":764}},"line":1},"7":{"name":"(anonymous_7)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":82},"end":{"line":40,"column":216}},"line":3},"8":{"name":"_callee","decl":{"start":{"line":3,"column":183},"end":{"line":3,"column":190}},"loc":{"start":{"line":3,"column":249},"end":{"line":40,"column":129}},"line":3},"9":{"name":"requestHandler","decl":{"start":{"line":40,"column":148},"end":{"line":40,"column":162}},"loc":{"start":{"line":40,"column":177},"end":{"line":40,"column":214}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":313},"end":{"line":1,"column":359}},"type":"cond-expr","locations":[{"start":{"line":1,"column":337},"end":{"line":1,"column":340}},{"start":{"line":1,"column":343},"end":{"line":1,"column":359}}],"line":1},"1":{"loc":{"start":{"line":1,"column":313},"end":{"line":1,"column":334}},"type":"binary-expr","locations":[{"start":{"line":1,"column":313},"end":{"line":1,"column":316}},{"start":{"line":1,"column":320},"end":{"line":1,"column":334}}],"line":1},"2":{"loc":{"start":{"line":1,"column":613},"end":{"line":1,"column":767}},"type":"if","locations":[{"start":{"line":1,"column":613},"end":{"line":1,"column":767}},{"start":{"line":1,"column":613},"end":{"line":1,"column":767}}],"line":1}},"s":{"0":3,"1":3,"2":3,"3":3,"4":53,"5":53,"6":106,"7":106,"8":106,"9":0,"10":0,"11":106,"12":53,"13":53,"14":41,"15":12,"16":53,"17":3,"18":3,"19":3,"20":53},"f":{"0":3,"1":3,"2":53,"3":53,"4":106,"5":41,"6":12,"7":3,"8":53,"9":53},"b":{"0":[3,0],"1":[3,3],"2":[53,53]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"1578fc5e9320550fdf1b462099fd9071952e7236","code":["import logger from '../logger.js';","","export const requestHandler = async (req, res, requestHandlerFunction) => {","","\tlet result = {};","","\ttry {","","\t\tresult = await requestHandlerFunction(req);","","\t}","\tcatch (error) {","","\t\tlogger.error(error);","","\t\tresult.status = 400;","\t\tresult.result = 'Unable to process your request.';","","\t\tif (error) {","\t\t\tresult.error = error.toString();","\t\t}","","\t}","","\tlet jsonToReturn = {};","","\tif (result.json) {","\t\tjsonToReturn = result.json;","\t}","\telse {","\t\tjsonToReturn = {","\t\t\tresult: result.result,","\t\t};","","\t\tif (result.error) {","\t\t\tjsonToReturn.error = result.error.toString();","\t\t}","\t}","\tlogger.info(JSON.stringify(jsonToReturn));","\tres.status(result.status).json(jsonToReturn);","","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/book.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/book.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":114},"end":{"line":1,"column":345}},"2":{"start":{"line":1,"column":150},"end":{"line":1,"column":330}},"3":{"start":{"line":1,"column":207},"end":{"line":1,"column":219}},"4":{"start":{"line":1,"column":220},"end":{"line":1,"column":329}},"5":{"start":{"line":1,"column":245},"end":{"line":1,"column":328}},"6":{"start":{"line":1,"column":301},"end":{"line":1,"column":327}},"7":{"start":{"line":1,"column":330},"end":{"line":1,"column":344}},"8":{"start":{"line":1,"column":365},"end":{"line":1,"column":894}},"9":{"start":{"line":1,"column":420},"end":{"line":1,"column":685}},"10":{"start":{"line":1,"column":477},"end":{"line":1,"column":485}},"11":{"start":{"line":1,"column":486},"end":{"line":1,"column":541}},"12":{"start":{"line":1,"column":541},"end":{"line":1,"column":572}},"13":{"start":{"line":1,"column":572},"end":{"line":1,"column":626}},"14":{"start":{"line":1,"column":599},"end":{"line":1,"column":626}},"15":{"start":{"line":1,"column":626},"end":{"line":1,"column":684}},"16":{"start":{"line":1,"column":686},"end":{"line":1,"column":891}},"17":{"start":{"line":1,"column":742},"end":{"line":1,"column":810}},"18":{"start":{"line":1,"column":758},"end":{"line":1,"column":810}},"19":{"start":{"line":1,"column":810},"end":{"line":1,"column":870}},"20":{"start":{"line":1,"column":827},"end":{"line":1,"column":870}},"21":{"start":{"line":1,"column":870},"end":{"line":1,"column":889}},"22":{"start":{"line":6,"column":249},"end":{"line":6,"column":396}},"23":{"start":{"line":6,"column":266},"end":{"line":6,"column":370}},"24":{"start":{"line":6,"column":378},"end":{"line":6,"column":395}},"25":{"start":{"line":6,"column":396},"end":{"line":6,"column":407}},"26":{"start":{"line":6,"column":467},"end":{"line":6,"column":469}},"27":{"start":{"line":6,"column":470},"end":{"line":6,"column":605}},"28":{"start":{"line":6,"column":490},"end":{"line":6,"column":525}},"29":{"start":{"line":6,"column":516},"end":{"line":6,"column":525}},"30":{"start":{"line":6,"column":525},"end":{"line":6,"column":585}},"31":{"start":{"line":6,"column":576},"end":{"line":6,"column":585}},"32":{"start":{"line":6,"column":585},"end":{"line":6,"column":604}},"33":{"start":{"line":6,"column":605},"end":{"line":6,"column":619}},"34":{"start":{"line":6,"column":652},"end":{"line":6,"column":1052}},"35":{"start":{"line":6,"column":682},"end":{"line":6,"column":707}},"36":{"start":{"line":6,"column":708},"end":{"line":6,"column":1050}},"37":{"start":{"line":6,"column":780},"end":{"line":6,"column":872}},"38":{"start":{"line":6,"column":796},"end":{"line":6,"column":809}},"39":{"start":{"line":6,"column":822},"end":{"line":6,"column":832}},"40":{"start":{"line":6,"column":850},"end":{"line":6,"column":864}},"41":{"start":{"line":6,"column":864},"end":{"line":6,"column":871}},"42":{"start":{"line":6,"column":872},"end":{"line":6,"column":1026}},"43":{"start":{"line":6,"column":888},"end":{"line":6,"column":903}},"44":{"start":{"line":6,"column":911},"end":{"line":6,"column":1025}},"45":{"start":{"line":6,"column":964},"end":{"line":6,"column":984}},"46":{"start":{"line":6,"column":1003},"end":{"line":6,"column":1022}},"47":{"start":{"line":6,"column":1027},"end":{"line":6,"column":1047}},"48":{"start":{"line":6,"column":1102},"end":{"line":6,"column":1201}},"49":{"start":{"line":6,"column":1143},"end":{"line":6,"column":1200}},"50":{"start":{"line":8,"column":7},"end":{"line":294,"column":238}},"51":{"start":{"line":13,"column":2},"end":{"line":13,"column":69}},"52":{"start":{"line":14,"column":2},"end":{"line":14,"column":65}},"53":{"start":{"line":15,"column":2},"end":{"line":294,"column":223}},"54":{"start":{"line":15,"column":71},"end":{"line":70,"column":131}},"55":{"start":{"line":17,"column":90},"end":{"line":70,"column":128}},"56":{"start":{"line":17,"column":150},"end":{"line":70,"column":99}},"57":{"start":{"line":17,"column":161},"end":{"line":70,"column":98}},"58":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"59":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"60":{"start":{"line":21,"column":8},"end":{"line":21,"column":30}},"61":{"start":{"line":25,"column":8},"end":{"line":25,"column":172}},"62":{"start":{"line":25,"column":172},"end":{"line":25,"column":190}},"63":{"start":{"line":25,"column":190},"end":{"line":25,"column":208}},"64":{"start":{"line":25,"column":208},"end":{"line":34,"column":34}},"65":{"start":{"line":34,"column":41},"end":{"line":34,"column":70}},"66":{"start":{"line":34,"column":70},"end":{"line":38,"column":63}},"67":{"start":{"line":38,"column":37},"end":{"line":38,"column":56}},"68":{"start":{"line":38,"column":56},"end":{"line":38,"column":62}},"69":{"start":{"line":38,"column":63},"end":{"line":38,"column":82}},"70":{"start":{"line":38,"column":82},"end":{"line":41,"column":37}},"71":{"start":{"line":41,"column":45},"end":{"line":41,"column":73}},"72":{"start":{"line":41,"column":73},"end":{"line":41,"column":92}},"73":{"start":{"line":41,"column":92},"end":{"line":41,"column":98}},"74":{"start":{"line":41,"column":106},"end":{"line":41,"column":125}},"75":{"start":{"line":41,"column":125},"end":{"line":50,"column":40}},"76":{"start":{"line":54,"column":8},"end":{"line":54,"column":38}},"77":{"start":{"line":55,"column":8},"end":{"line":55,"column":44}},"78":{"start":{"line":55,"column":52},"end":{"line":60,"column":63}},"79":{"start":{"line":60,"column":71},"end":{"line":60,"column":90}},"80":{"start":{"line":60,"column":90},"end":{"line":60,"column":125}},"81":{"start":{"line":66,"column":118},"end":{"line":70,"column":55}},"82":{"start":{"line":70,"column":74},"end":{"line":70,"column":97}},"83":{"start":{"line":70,"column":154},"end":{"line":70,"column":189}},"84":{"start":{"line":70,"column":190},"end":{"line":70,"column":205}},"85":{"start":{"line":70,"column":266},"end":{"line":99,"column":133}},"86":{"start":{"line":76,"column":22},"end":{"line":99,"column":130}},"87":{"start":{"line":76,"column":84},"end":{"line":99,"column":101}},"88":{"start":{"line":76,"column":95},"end":{"line":99,"column":100}},"89":{"start":{"line":78,"column":8},"end":{"line":78,"column":26}},"90":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"91":{"start":{"line":78,"column":45},"end":{"line":78,"column":64}},"92":{"start":{"line":78,"column":64},"end":{"line":83,"column":152}},"93":{"start":{"line":83,"column":159},"end":{"line":83,"column":185}},"94":{"start":{"line":83,"column":185},"end":{"line":89,"column":27}},"95":{"start":{"line":89,"column":34},"end":{"line":89,"column":53}},"96":{"start":{"line":89,"column":53},"end":{"line":89,"column":90}},"97":{"start":{"line":95,"column":119},"end":{"line":99,"column":56}},"98":{"start":{"line":99,"column":75},"end":{"line":99,"column":99}},"99":{"start":{"line":99,"column":161},"end":{"line":99,"column":197}},"100":{"start":{"line":99,"column":198},"end":{"line":99,"column":217}},"101":{"start":{"line":99,"column":274},"end":{"line":137,"column":134}},"102":{"start":{"line":105,"column":18},"end":{"line":137,"column":131}},"103":{"start":{"line":105,"column":80},"end":{"line":137,"column":101}},"104":{"start":{"line":105,"column":91},"end":{"line":137,"column":100}},"105":{"start":{"line":107,"column":8},"end":{"line":107,"column":22}},"106":{"start":{"line":107,"column":22},"end":{"line":107,"column":41}},"107":{"start":{"line":107,"column":41},"end":{"line":107,"column":60}},"108":{"start":{"line":107,"column":60},"end":{"line":113,"column":152}},"109":{"start":{"line":113,"column":159},"end":{"line":113,"column":181}},"110":{"start":{"line":113,"column":181},"end":{"line":117,"column":41}},"111":{"start":{"line":117,"column":15},"end":{"line":117,"column":34}},"112":{"start":{"line":117,"column":34},"end":{"line":117,"column":40}},"113":{"start":{"line":117,"column":41},"end":{"line":120,"column":63}},"114":{"start":{"line":120,"column":70},"end":{"line":126,"column":23}},"115":{"start":{"line":126,"column":31},"end":{"line":126,"column":51}},"116":{"start":{"line":126,"column":51},"end":{"line":126,"column":57}},"117":{"start":{"line":126,"column":65},"end":{"line":126,"column":85}},"118":{"start":{"line":126,"column":85},"end":{"line":126,"column":122}},"119":{"start":{"line":133,"column":119},"end":{"line":137,"column":56}},"120":{"start":{"line":137,"column":75},"end":{"line":137,"column":99}},"121":{"start":{"line":137,"column":158},"end":{"line":137,"column":194}},"122":{"start":{"line":137,"column":195},"end":{"line":137,"column":210}},"123":{"start":{"line":137,"column":281},"end":{"line":167,"column":95}},"124":{"start":{"line":143,"column":45},"end":{"line":167,"column":92}},"125":{"start":{"line":143,"column":107},"end":{"line":167,"column":62}},"126":{"start":{"line":143,"column":118},"end":{"line":167,"column":61}},"127":{"start":{"line":143,"column":167},"end":{"line":143,"column":186}},"128":{"start":{"line":143,"column":186},"end":{"line":143,"column":205}},"129":{"start":{"line":143,"column":205},"end":{"line":149,"column":152}},"130":{"start":{"line":149,"column":159},"end":{"line":149,"column":189}},"131":{"start":{"line":149,"column":189},"end":{"line":153,"column":49}},"132":{"start":{"line":153,"column":23},"end":{"line":153,"column":42}},"133":{"start":{"line":153,"column":42},"end":{"line":153,"column":48}},"134":{"start":{"line":153,"column":49},"end":{"line":154,"column":15}},"135":{"start":{"line":158,"column":8},"end":{"line":158,"column":80}},"136":{"start":{"line":158,"column":80},"end":{"line":160,"column":28}},"137":{"start":{"line":160,"column":36},"end":{"line":160,"column":56}},"138":{"start":{"line":160,"column":56},"end":{"line":160,"column":62}},"139":{"start":{"line":160,"column":70},"end":{"line":160,"column":90}},"140":{"start":{"line":160,"column":90},"end":{"line":160,"column":127}},"141":{"start":{"line":166,"column":119},"end":{"line":167,"column":17}},"142":{"start":{"line":167,"column":36},"end":{"line":167,"column":60}},"143":{"start":{"line":167,"column":133},"end":{"line":167,"column":169}},"144":{"start":{"line":167,"column":170},"end":{"line":167,"column":199}},"145":{"start":{"line":167,"column":259},"end":{"line":230,"column":166}},"146":{"start":{"line":172,"column":145},"end":{"line":230,"column":163}},"147":{"start":{"line":172,"column":207},"end":{"line":230,"column":101}},"148":{"start":{"line":172,"column":218},"end":{"line":230,"column":100}},"149":{"start":{"line":174,"column":8},"end":{"line":174,"column":32}},"150":{"start":{"line":174,"column":32},"end":{"line":174,"column":65}},"151":{"start":{"line":174,"column":65},"end":{"line":174,"column":91}},"152":{"start":{"line":174,"column":91},"end":{"line":174,"column":118}},"153":{"start":{"line":174,"column":118},"end":{"line":174,"column":137}},"154":{"start":{"line":176,"column":8},"end":{"line":180,"column":9}},"155":{"start":{"line":177,"column":9},"end":{"line":179,"column":10}},"156":{"start":{"line":178,"column":10},"end":{"line":178,"column":50}},"157":{"start":{"line":180,"column":9},"end":{"line":180,"column":29}},"158":{"start":{"line":180,"column":29},"end":{"line":180,"column":35}},"159":{"start":{"line":180,"column":42},"end":{"line":180,"column":61}},"160":{"start":{"line":180,"column":61},"end":{"line":180,"column":98}},"161":{"start":{"line":180,"column":98},"end":{"line":180,"column":123}},"162":{"start":{"line":180,"column":123},"end":{"line":180,"column":153}},"163":{"start":{"line":180,"column":161},"end":{"line":180,"column":181}},"164":{"start":{"line":180,"column":181},"end":{"line":180,"column":201}},"165":{"start":{"line":180,"column":201},"end":{"line":180,"column":274}},"166":{"start":{"line":180,"column":254},"end":{"line":180,"column":273}},"167":{"start":{"line":180,"column":282},"end":{"line":180,"column":302}},"168":{"start":{"line":180,"column":302},"end":{"line":180,"column":354}},"169":{"start":{"line":180,"column":327},"end":{"line":180,"column":347}},"170":{"start":{"line":180,"column":347},"end":{"line":180,"column":353}},"171":{"start":{"line":180,"column":354},"end":{"line":180,"column":375}},"172":{"start":{"line":180,"column":383},"end":{"line":180,"column":411}},"173":{"start":{"line":180,"column":419},"end":{"line":180,"column":447}},"174":{"start":{"line":182,"column":8},"end":{"line":182,"column":55}},"175":{"start":{"line":182,"column":55},"end":{"line":184,"column":62}},"176":{"start":{"line":184,"column":35},"end":{"line":184,"column":55}},"177":{"start":{"line":184,"column":55},"end":{"line":184,"column":61}},"178":{"start":{"line":185,"column":159},"end":{"line":185,"column":179}},"179":{"start":{"line":185,"column":179},"end":{"line":185,"column":185}},"180":{"start":{"line":185,"column":193},"end":{"line":190,"column":56}},"181":{"start":{"line":190,"column":64},"end":{"line":190,"column":84}},"182":{"start":{"line":190,"column":84},"end":{"line":190,"column":104}},"183":{"start":{"line":190,"column":104},"end":{"line":200,"column":152}},"184":{"start":{"line":200,"column":160},"end":{"line":200,"column":190}},"185":{"start":{"line":200,"column":190},"end":{"line":204,"column":50}},"186":{"start":{"line":204,"column":23},"end":{"line":204,"column":43}},"187":{"start":{"line":204,"column":43},"end":{"line":204,"column":49}},"188":{"start":{"line":204,"column":50},"end":{"line":207,"column":73}},"189":{"start":{"line":207,"column":81},"end":{"line":207,"column":101}},"190":{"start":{"line":207,"column":101},"end":{"line":213,"column":35}},"191":{"start":{"line":213,"column":43},"end":{"line":219,"column":69}},"192":{"start":{"line":219,"column":77},"end":{"line":219,"column":97}},"193":{"start":{"line":219,"column":97},"end":{"line":219,"column":103}},"194":{"start":{"line":219,"column":111},"end":{"line":219,"column":131}},"195":{"start":{"line":219,"column":131},"end":{"line":219,"column":169}},"196":{"start":{"line":226,"column":119},"end":{"line":230,"column":56}},"197":{"start":{"line":230,"column":75},"end":{"line":230,"column":99}},"198":{"start":{"line":230,"column":193},"end":{"line":230,"column":229}},"199":{"start":{"line":230,"column":230},"end":{"line":230,"column":248}},"200":{"start":{"line":230,"column":308},"end":{"line":276,"column":134}},"201":{"start":{"line":236,"column":26},"end":{"line":276,"column":131}},"202":{"start":{"line":236,"column":88},"end":{"line":276,"column":101}},"203":{"start":{"line":236,"column":99},"end":{"line":276,"column":100}},"204":{"start":{"line":236,"column":148},"end":{"line":236,"column":167}},"205":{"start":{"line":236,"column":167},"end":{"line":236,"column":186}},"206":{"start":{"line":236,"column":186},"end":{"line":243,"column":152}},"207":{"start":{"line":243,"column":159},"end":{"line":243,"column":189}},"208":{"start":{"line":243,"column":189},"end":{"line":247,"column":49}},"209":{"start":{"line":247,"column":23},"end":{"line":247,"column":42}},"210":{"start":{"line":247,"column":42},"end":{"line":247,"column":48}},"211":{"start":{"line":247,"column":49},"end":{"line":250,"column":73}},"212":{"start":{"line":250,"column":80},"end":{"line":250,"column":100}},"213":{"start":{"line":250,"column":100},"end":{"line":259,"column":35}},"214":{"start":{"line":259,"column":43},"end":{"line":265,"column":92}},"215":{"start":{"line":265,"column":100},"end":{"line":265,"column":120}},"216":{"start":{"line":265,"column":120},"end":{"line":265,"column":126}},"217":{"start":{"line":265,"column":134},"end":{"line":265,"column":154}},"218":{"start":{"line":265,"column":154},"end":{"line":265,"column":191}},"219":{"start":{"line":272,"column":119},"end":{"line":276,"column":56}},"220":{"start":{"line":276,"column":75},"end":{"line":276,"column":99}},"221":{"start":{"line":276,"column":161},"end":{"line":276,"column":197}},"222":{"start":{"line":276,"column":198},"end":{"line":276,"column":216}},"223":{"start":{"line":276,"column":285},"end":{"line":294,"column":115}},"224":{"start":{"line":281,"column":26},"end":{"line":294,"column":112}},"225":{"start":{"line":281,"column":88},"end":{"line":294,"column":93}},"226":{"start":{"line":281,"column":99},"end":{"line":294,"column":92}},"227":{"start":{"line":281,"column":148},"end":{"line":281,"column":167}},"228":{"start":{"line":281,"column":167},"end":{"line":283,"column":52}},"229":{"start":{"line":283,"column":59},"end":{"line":283,"column":89}},"230":{"start":{"line":283,"column":89},"end":{"line":285,"column":62}},"231":{"start":{"line":285,"column":36},"end":{"line":285,"column":55}},"232":{"start":{"line":285,"column":55},"end":{"line":285,"column":61}},"233":{"start":{"line":285,"column":62},"end":{"line":288,"column":66}},"234":{"start":{"line":288,"column":73},"end":{"line":294,"column":49}},"235":{"start":{"line":294,"column":67},"end":{"line":294,"column":91}},"236":{"start":{"line":294,"column":151},"end":{"line":294,"column":187}},"237":{"start":{"line":294,"column":188},"end":{"line":294,"column":215}},"238":{"start":{"line":294,"column":223},"end":{"line":294,"column":235}},"239":{"start":{"line":300,"column":19},"end":{"line":300,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":131},"end":{"line":1,"column":132}},"loc":{"start":{"line":1,"column":149},"end":{"line":1,"column":345}},"line":1},"1":{"name":"(anonymous_1)","decl":{"start":{"line":1,"column":365},"end":{"line":1,"column":366}},"loc":{"start":{"line":1,"column":377},"end":{"line":1,"column":892}},"line":1},"2":{"name":"defineProperties","decl":{"start":{"line":1,"column":387},"end":{"line":1,"column":403}},"loc":{"start":{"line":1,"column":419},"end":{"line":1,"column":686}},"line":1},"3":{"name":"(anonymous_3)","decl":{"start":{"line":1,"column":693},"end":{"line":1,"column":694}},"loc":{"start":{"line":1,"column":741},"end":{"line":1,"column":890}},"line":1},"4":{"name":"_defineProperty","decl":{"start":{"line":6,"column":215},"end":{"line":6,"column":230}},"loc":{"start":{"line":6,"column":248},"end":{"line":6,"column":408}},"line":6},"5":{"name":"_objectWithoutProperties","decl":{"start":{"line":6,"column":417},"end":{"line":6,"column":441}},"loc":{"start":{"line":6,"column":453},"end":{"line":6,"column":620}},"line":6},"6":{"name":"_asyncToGenerator","decl":{"start":{"line":6,"column":629},"end":{"line":6,"column":646}},"loc":{"start":{"line":6,"column":651},"end":{"line":6,"column":1053}},"line":6},"7":{"name":"(anonymous_7)","decl":{"start":{"line":6,"column":659},"end":{"line":6,"column":660}},"loc":{"start":{"line":6,"column":671},"end":{"line":6,"column":1051}},"line":6},"8":{"name":"(anonymous_8)","decl":{"start":{"line":6,"column":727},"end":{"line":6,"column":728}},"loc":{"start":{"line":6,"column":754},"end":{"line":6,"column":1048}},"line":6},"9":{"name":"step","decl":{"start":{"line":6,"column":764},"end":{"line":6,"column":768}},"loc":{"start":{"line":6,"column":779},"end":{"line":6,"column":1027}},"line":6},"10":{"name":"(anonymous_10)","decl":{"start":{"line":6,"column":946},"end":{"line":6,"column":947}},"loc":{"start":{"line":6,"column":963},"end":{"line":6,"column":985}},"line":6},"11":{"name":"(anonymous_11)","decl":{"start":{"line":6,"column":987},"end":{"line":6,"column":988}},"loc":{"start":{"line":6,"column":1002},"end":{"line":6,"column":1023}},"line":6},"12":{"name":"_classCallCheck","decl":{"start":{"line":6,"column":1062},"end":{"line":6,"column":1077}},"loc":{"start":{"line":6,"column":1101},"end":{"line":6,"column":1202}},"line":6},"13":{"name":"(anonymous_13)","decl":{"start":{"line":8,"column":7},"end":{"line":8,"column":8}},"loc":{"start":{"line":8,"column":19},"end":{"line":294,"column":236}},"line":8},"14":{"name":"Book","decl":{"start":{"line":10,"column":34},"end":{"line":10,"column":38}},"loc":{"start":{"line":10,"column":41},"end":{"line":15,"column":2}},"line":10},"15":{"name":"(anonymous_15)","decl":{"start":{"line":15,"column":47},"end":{"line":15,"column":48}},"loc":{"start":{"line":15,"column":59},"end":{"line":70,"column":206}},"line":15},"16":{"name":"_callee","decl":{"start":{"line":15,"column":136},"end":{"line":15,"column":143}},"loc":{"start":{"line":17,"column":8},"end":{"line":70,"column":129}},"line":17},"17":{"name":"_callee$","decl":{"start":{"line":17,"column":130},"end":{"line":17,"column":138}},"loc":{"start":{"line":17,"column":149},"end":{"line":70,"column":100}},"line":17},"18":{"name":"addBook","decl":{"start":{"line":70,"column":141},"end":{"line":70,"column":148}},"loc":{"start":{"line":70,"column":153},"end":{"line":70,"column":190}},"line":70},"19":{"name":"(anonymous_19)","decl":{"start":{"line":70,"column":241},"end":{"line":70,"column":242}},"loc":{"start":{"line":70,"column":253},"end":{"line":99,"column":218}},"line":70},"20":{"name":"_callee2","decl":{"start":{"line":70,"column":331},"end":{"line":70,"column":339}},"loc":{"start":{"line":76,"column":8},"end":{"line":99,"column":131}},"line":76},"21":{"name":"_callee2$","decl":{"start":{"line":76,"column":62},"end":{"line":76,"column":71}},"loc":{"start":{"line":76,"column":83},"end":{"line":99,"column":102}},"line":76},"22":{"name":"getAllBooks","decl":{"start":{"line":99,"column":143},"end":{"line":99,"column":154}},"loc":{"start":{"line":99,"column":160},"end":{"line":99,"column":198}},"line":99},"23":{"name":"(anonymous_23)","decl":{"start":{"line":99,"column":249},"end":{"line":99,"column":250}},"loc":{"start":{"line":99,"column":261},"end":{"line":137,"column":211}},"line":99},"24":{"name":"_callee3","decl":{"start":{"line":99,"column":339},"end":{"line":99,"column":347}},"loc":{"start":{"line":105,"column":8},"end":{"line":137,"column":132}},"line":105},"25":{"name":"_callee3$","decl":{"start":{"line":105,"column":58},"end":{"line":105,"column":67}},"loc":{"start":{"line":105,"column":79},"end":{"line":137,"column":102}},"line":105},"26":{"name":"getBook","decl":{"start":{"line":137,"column":144},"end":{"line":137,"column":151}},"loc":{"start":{"line":137,"column":157},"end":{"line":137,"column":195}},"line":137},"27":{"name":"(anonymous_27)","decl":{"start":{"line":137,"column":256},"end":{"line":137,"column":257}},"loc":{"start":{"line":137,"column":268},"end":{"line":167,"column":200}},"line":137},"28":{"name":"_callee4","decl":{"start":{"line":137,"column":346},"end":{"line":137,"column":354}},"loc":{"start":{"line":143,"column":7},"end":{"line":167,"column":93}},"line":143},"29":{"name":"_callee4$","decl":{"start":{"line":143,"column":85},"end":{"line":143,"column":94}},"loc":{"start":{"line":143,"column":106},"end":{"line":167,"column":63}},"line":143},"30":{"name":"checkBookAvailability","decl":{"start":{"line":167,"column":105},"end":{"line":167,"column":126}},"loc":{"start":{"line":167,"column":132},"end":{"line":167,"column":170}},"line":167},"31":{"name":"(anonymous_31)","decl":{"start":{"line":167,"column":234},"end":{"line":167,"column":235}},"loc":{"start":{"line":167,"column":246},"end":{"line":230,"column":249}},"line":167},"32":{"name":"_callee5","decl":{"start":{"line":167,"column":324},"end":{"line":167,"column":332}},"loc":{"start":{"line":172,"column":8},"end":{"line":230,"column":164}},"line":172},"33":{"name":"_callee5$","decl":{"start":{"line":172,"column":185},"end":{"line":172,"column":194}},"loc":{"start":{"line":172,"column":206},"end":{"line":230,"column":102}},"line":172},"34":{"name":"updateBook","decl":{"start":{"line":230,"column":176},"end":{"line":230,"column":186}},"loc":{"start":{"line":230,"column":192},"end":{"line":230,"column":230}},"line":230},"35":{"name":"(anonymous_35)","decl":{"start":{"line":230,"column":283},"end":{"line":230,"column":284}},"loc":{"start":{"line":230,"column":295},"end":{"line":276,"column":217}},"line":230},"36":{"name":"_callee6","decl":{"start":{"line":230,"column":373},"end":{"line":230,"column":381}},"loc":{"start":{"line":236,"column":8},"end":{"line":276,"column":132}},"line":236},"37":{"name":"_callee6$","decl":{"start":{"line":236,"column":66},"end":{"line":236,"column":75}},"loc":{"start":{"line":236,"column":87},"end":{"line":276,"column":102}},"line":236},"38":{"name":"deleteBook","decl":{"start":{"line":276,"column":144},"end":{"line":276,"column":154}},"loc":{"start":{"line":276,"column":160},"end":{"line":276,"column":198}},"line":276},"39":{"name":"(anonymous_39)","decl":{"start":{"line":276,"column":260},"end":{"line":276,"column":261}},"loc":{"start":{"line":276,"column":272},"end":{"line":294,"column":216}},"line":276},"40":{"name":"_callee7","decl":{"start":{"line":276,"column":350},"end":{"line":276,"column":358}},"loc":{"start":{"line":281,"column":8},"end":{"line":294,"column":113}},"line":281},"41":{"name":"_callee7$","decl":{"start":{"line":281,"column":66},"end":{"line":281,"column":75}},"loc":{"start":{"line":281,"column":87},"end":{"line":294,"column":94}},"line":281},"42":{"name":"getBookAvailability","decl":{"start":{"line":294,"column":125},"end":{"line":294,"column":144}},"loc":{"start":{"line":294,"column":150},"end":{"line":294,"column":188}},"line":294}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":114},"end":{"line":1,"column":345}},"type":"binary-expr","locations":[{"start":{"line":1,"column":114},"end":{"line":1,"column":127}},{"start":{"line":1,"column":131},"end":{"line":1,"column":345}}],"line":1},"1":{"loc":{"start":{"line":1,"column":245},"end":{"line":1,"column":328}},"type":"if","locations":[{"start":{"line":1,"column":245},"end":{"line":1,"column":328}},{"start":{"line":1,"column":245},"end":{"line":1,"column":328}}],"line":1},"2":{"loc":{"start":{"line":1,"column":510},"end":{"line":1,"column":540}},"type":"binary-expr","locations":[{"start":{"line":1,"column":510},"end":{"line":1,"column":531}},{"start":{"line":1,"column":535},"end":{"line":1,"column":540}}],"line":1},"3":{"loc":{"start":{"line":1,"column":572},"end":{"line":1,"column":626}},"type":"if","locations":[{"start":{"line":1,"column":572},"end":{"line":1,"column":626}},{"start":{"line":1,"column":572},"end":{"line":1,"column":626}}],"line":1},"4":{"loc":{"start":{"line":1,"column":742},"end":{"line":1,"column":810}},"type":"if","locations":[{"start":{"line":1,"column":742},"end":{"line":1,"column":810}},{"start":{"line":1,"column":742},"end":{"line":1,"column":810}}],"line":1},"5":{"loc":{"start":{"line":1,"column":810},"end":{"line":1,"column":870}},"type":"if","locations":[{"start":{"line":1,"column":810},"end":{"line":1,"column":870}},{"start":{"line":1,"column":810},"end":{"line":1,"column":870}}],"line":1},"6":{"loc":{"start":{"line":6,"column":249},"end":{"line":6,"column":396}},"type":"if","locations":[{"start":{"line":6,"column":249},"end":{"line":6,"column":396}},{"start":{"line":6,"column":249},"end":{"line":6,"column":396}}],"line":6},"7":{"loc":{"start":{"line":6,"column":490},"end":{"line":6,"column":525}},"type":"if","locations":[{"start":{"line":6,"column":490},"end":{"line":6,"column":525}},{"start":{"line":6,"column":490},"end":{"line":6,"column":525}}],"line":6},"8":{"loc":{"start":{"line":6,"column":525},"end":{"line":6,"column":585}},"type":"if","locations":[{"start":{"line":6,"column":525},"end":{"line":6,"column":585}},{"start":{"line":6,"column":525},"end":{"line":6,"column":585}}],"line":6},"9":{"loc":{"start":{"line":6,"column":872},"end":{"line":6,"column":1026}},"type":"if","locations":[{"start":{"line":6,"column":872},"end":{"line":6,"column":1026}},{"start":{"line":6,"column":872},"end":{"line":6,"column":1026}}],"line":6},"10":{"loc":{"start":{"line":6,"column":1102},"end":{"line":6,"column":1201}},"type":"if","locations":[{"start":{"line":6,"column":1102},"end":{"line":6,"column":1201}},{"start":{"line":6,"column":1102},"end":{"line":6,"column":1201}}],"line":6},"11":{"loc":{"start":{"line":17,"column":161},"end":{"line":70,"column":98}},"type":"switch","locations":[{"start":{"line":17,"column":201},"end":{"line":34,"column":34}},{"start":{"line":34,"column":34},"end":{"line":41,"column":37}},{"start":{"line":41,"column":37},"end":{"line":41,"column":98}},{"start":{"line":41,"column":98},"end":{"line":50,"column":40}},{"start":{"line":50,"column":40},"end":{"line":55,"column":44}},{"start":{"line":55,"column":44},"end":{"line":60,"column":63}},{"start":{"line":60,"column":63},"end":{"line":70,"column":55}},{"start":{"line":70,"column":55},"end":{"line":70,"column":63}},{"start":{"line":70,"column":63},"end":{"line":70,"column":97}}],"line":17},"12":{"loc":{"start":{"line":34,"column":70},"end":{"line":38,"column":63}},"type":"if","locations":[{"start":{"line":34,"column":70},"end":{"line":38,"column":63}},{"start":{"line":34,"column":70},"end":{"line":38,"column":63}}],"line":34},"13":{"loc":{"start":{"line":76,"column":95},"end":{"line":99,"column":100}},"type":"switch","locations":[{"start":{"line":76,"column":137},"end":{"line":83,"column":152}},{"start":{"line":83,"column":152},"end":{"line":89,"column":27}},{"start":{"line":89,"column":27},"end":{"line":99,"column":56}},{"start":{"line":99,"column":56},"end":{"line":99,"column":64}},{"start":{"line":99,"column":64},"end":{"line":99,"column":99}}],"line":76},"14":{"loc":{"start":{"line":105,"column":91},"end":{"line":137,"column":100}},"type":"switch","locations":[{"start":{"line":105,"column":133},"end":{"line":113,"column":152}},{"start":{"line":113,"column":152},"end":{"line":120,"column":63}},{"start":{"line":120,"column":63},"end":{"line":126,"column":23}},{"start":{"line":126,"column":23},"end":{"line":126,"column":57}},{"start":{"line":126,"column":57},"end":{"line":137,"column":56}},{"start":{"line":137,"column":56},"end":{"line":137,"column":64}},{"start":{"line":137,"column":64},"end":{"line":137,"column":99}}],"line":105},"15":{"loc":{"start":{"line":113,"column":181},"end":{"line":117,"column":41}},"type":"if","locations":[{"start":{"line":113,"column":181},"end":{"line":117,"column":41}},{"start":{"line":113,"column":181},"end":{"line":117,"column":41}}],"line":113},"16":{"loc":{"start":{"line":143,"column":118},"end":{"line":167,"column":61}},"type":"switch","locations":[{"start":{"line":143,"column":160},"end":{"line":149,"column":152}},{"start":{"line":149,"column":152},"end":{"line":154,"column":15}},{"start":{"line":154,"column":15},"end":{"line":160,"column":28}},{"start":{"line":160,"column":28},"end":{"line":160,"column":62}},{"start":{"line":160,"column":62},"end":{"line":167,"column":17}},{"start":{"line":167,"column":17},"end":{"line":167,"column":25}},{"start":{"line":167,"column":25},"end":{"line":167,"column":60}}],"line":143},"17":{"loc":{"start":{"line":149,"column":189},"end":{"line":153,"column":49}},"type":"if","locations":[{"start":{"line":149,"column":189},"end":{"line":153,"column":49}},{"start":{"line":149,"column":189},"end":{"line":153,"column":49}}],"line":149},"18":{"loc":{"start":{"line":158,"column":29},"end":{"line":158,"column":79}},"type":"cond-expr","locations":[{"start":{"line":158,"column":67},"end":{"line":158,"column":71}},{"start":{"line":158,"column":74},"end":{"line":158,"column":79}}],"line":158},"19":{"loc":{"start":{"line":172,"column":218},"end":{"line":230,"column":100}},"type":"switch","locations":[{"start":{"line":172,"column":260},"end":{"line":180,"column":35}},{"start":{"line":180,"column":35},"end":{"line":180,"column":153}},{"start":{"line":180,"column":153},"end":{"line":180,"column":274}},{"start":{"line":180,"column":274},"end":{"line":180,"column":375}},{"start":{"line":180,"column":375},"end":{"line":180,"column":411}},{"start":{"line":180,"column":411},"end":{"line":180,"column":447}},{"start":{"line":180,"column":447},"end":{"line":185,"column":185}},{"start":{"line":185,"column":185},"end":{"line":190,"column":56}},{"start":{"line":190,"column":56},"end":{"line":200,"column":152}},{"start":{"line":200,"column":152},"end":{"line":207,"column":73}},{"start":{"line":207,"column":73},"end":{"line":213,"column":35}},{"start":{"line":213,"column":35},"end":{"line":219,"column":69}},{"start":{"line":219,"column":69},"end":{"line":219,"column":103}},{"start":{"line":219,"column":103},"end":{"line":230,"column":56}},{"start":{"line":230,"column":56},"end":{"line":230,"column":64}},{"start":{"line":230,"column":64},"end":{"line":230,"column":99}}],"line":172},"20":{"loc":{"start":{"line":177,"column":9},"end":{"line":179,"column":10}},"type":"if","locations":[{"start":{"line":177,"column":9},"end":{"line":179,"column":10}},{"start":{"line":177,"column":9},"end":{"line":179,"column":10}}],"line":177},"21":{"loc":{"start":{"line":180,"column":201},"end":{"line":180,"column":274}},"type":"if","locations":[{"start":{"line":180,"column":201},"end":{"line":180,"column":274}},{"start":{"line":180,"column":201},"end":{"line":180,"column":274}}],"line":180},"22":{"loc":{"start":{"line":180,"column":205},"end":{"line":180,"column":251}},"type":"binary-expr","locations":[{"start":{"line":180,"column":205},"end":{"line":180,"column":231}},{"start":{"line":180,"column":235},"end":{"line":180,"column":251}}],"line":180},"23":{"loc":{"start":{"line":180,"column":302},"end":{"line":180,"column":354}},"type":"if","locations":[{"start":{"line":180,"column":302},"end":{"line":180,"column":354}},{"start":{"line":180,"column":302},"end":{"line":180,"column":354}}],"line":180},"24":{"loc":{"start":{"line":182,"column":55},"end":{"line":184,"column":62}},"type":"if","locations":[{"start":{"line":182,"column":55},"end":{"line":184,"column":62}},{"start":{"line":182,"column":55},"end":{"line":184,"column":62}}],"line":182},"25":{"loc":{"start":{"line":200,"column":190},"end":{"line":204,"column":50}},"type":"if","locations":[{"start":{"line":200,"column":190},"end":{"line":204,"column":50}},{"start":{"line":200,"column":190},"end":{"line":204,"column":50}}],"line":200},"26":{"loc":{"start":{"line":236,"column":99},"end":{"line":276,"column":100}},"type":"switch","locations":[{"start":{"line":236,"column":141},"end":{"line":243,"column":152}},{"start":{"line":243,"column":152},"end":{"line":250,"column":73}},{"start":{"line":250,"column":73},"end":{"line":259,"column":35}},{"start":{"line":259,"column":35},"end":{"line":265,"column":92}},{"start":{"line":265,"column":92},"end":{"line":265,"column":126}},{"start":{"line":265,"column":126},"end":{"line":276,"column":56}},{"start":{"line":276,"column":56},"end":{"line":276,"column":64}},{"start":{"line":276,"column":64},"end":{"line":276,"column":99}}],"line":236},"27":{"loc":{"start":{"line":243,"column":189},"end":{"line":247,"column":49}},"type":"if","locations":[{"start":{"line":243,"column":189},"end":{"line":247,"column":49}},{"start":{"line":243,"column":189},"end":{"line":247,"column":49}}],"line":243},"28":{"loc":{"start":{"line":281,"column":99},"end":{"line":294,"column":92}},"type":"switch","locations":[{"start":{"line":281,"column":141},"end":{"line":283,"column":52}},{"start":{"line":283,"column":52},"end":{"line":288,"column":66}},{"start":{"line":288,"column":66},"end":{"line":294,"column":49}},{"start":{"line":294,"column":49},"end":{"line":294,"column":56}},{"start":{"line":294,"column":56},"end":{"line":294,"column":91}}],"line":281},"29":{"loc":{"start":{"line":283,"column":89},"end":{"line":285,"column":62}},"type":"if","locations":[{"start":{"line":283,"column":89},"end":{"line":285,"column":62}},{"start":{"line":283,"column":89},"end":{"line":285,"column":62}}],"line":283}},"s":{"0":4,"1":4,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":4,"9":4,"10":28,"11":28,"12":28,"13":28,"14":28,"15":28,"16":4,"17":4,"18":4,"19":4,"20":0,"21":4,"22":28,"23":0,"24":28,"25":28,"26":4,"27":4,"28":18,"29":11,"30":7,"31":0,"32":7,"33":4,"34":28,"35":39,"36":39,"37":71,"38":71,"39":65,"40":6,"41":6,"42":65,"43":33,"44":32,"45":32,"46":0,"47":39,"48":4,"49":0,"50":4,"51":4,"52":4,"53":4,"54":4,"55":10,"56":27,"57":30,"58":10,"59":10,"60":10,"61":4,"62":4,"63":4,"64":4,"65":3,"66":3,"67":1,"68":1,"69":2,"70":2,"71":2,"72":2,"73":2,"74":1,"75":1,"76":1,"77":1,"78":3,"79":1,"80":1,"81":1,"82":10,"83":10,"84":4,"85":4,"86":3,"87":9,"88":9,"89":3,"90":3,"91":3,"92":3,"93":2,"94":2,"95":1,"96":1,"97":1,"98":3,"99":3,"100":4,"101":4,"102":4,"103":12,"104":13,"105":4,"106":4,"107":4,"108":4,"109":3,"110":3,"111":1,"112":1,"113":2,"114":1,"115":0,"116":0,"117":1,"118":1,"119":1,"120":4,"121":4,"122":4,"123":4,"124":8,"125":24,"126":29,"127":8,"128":8,"129":8,"130":7,"131":7,"132":5,"133":5,"134":2,"135":5,"136":5,"137":0,"138":0,"139":1,"140":1,"141":1,"142":8,"143":8,"144":4,"145":4,"146":7,"147":36,"148":60,"149":7,"150":7,"151":7,"152":7,"153":7,"154":7,"155":8,"156":7,"157":7,"158":7,"159":0,"160":0,"161":0,"162":0,"163":7,"164":7,"165":7,"166":0,"167":7,"168":7,"169":7,"170":7,"171":0,"172":7,"173":7,"174":7,"175":7,"176":2,"177":2,"178":5,"179":5,"180":2,"181":5,"182":5,"183":5,"184":4,"185":4,"186":3,"187":3,"188":1,"189":3,"190":3,"191":3,"192":0,"193":0,"194":1,"195":1,"196":1,"197":7,"198":7,"199":4,"200":4,"201":4,"202":13,"203":14,"204":4,"205":4,"206":4,"207":3,"208":3,"209":1,"210":1,"211":2,"212":1,"213":1,"214":1,"215":0,"216":0,"217":1,"218":1,"219":1,"220":4,"221":4,"222":4,"223":4,"224":3,"225":9,"226":11,"227":3,"228":3,"229":3,"230":3,"231":2,"232":2,"233":1,"234":2,"235":3,"236":3,"237":4,"238":4,"239":4},"f":{"0":0,"1":4,"2":4,"3":4,"4":28,"5":4,"6":28,"7":39,"8":39,"9":71,"10":32,"11":0,"12":4,"13":4,"14":4,"15":4,"16":10,"17":27,"18":10,"19":4,"20":3,"21":9,"22":3,"23":4,"24":4,"25":12,"26":4,"27":4,"28":8,"29":24,"30":8,"31":4,"32":7,"33":36,"34":7,"35":4,"36":4,"37":13,"38":4,"39":4,"40":3,"41":9,"42":3},"b":{"0":[4,0],"1":[0,0],"2":[28,28],"3":[28,0],"4":[4,0],"5":[0,4],"6":[0,28],"7":[11,7],"8":[0,7],"9":[33,32],"10":[0,4],"11":[10,3,2,1,1,3,1,0,10],"12":[1,2],"13":[3,2,1,0,3],"14":[4,3,1,0,1,0,4],"15":[1,2],"16":[8,7,5,0,1,0,8],"17":[5,2],"18":[4,1],"19":[7,0,7,7,7,7,7,2,5,4,3,3,0,1,0,7],"20":[7,1],"21":[0,7],"22":[7,0],"23":[7,0],"24":[2,5],"25":[3,1],"26":[4,3,1,1,0,1,0,4],"27":[1,2],"28":[3,3,2,0,3],"29":[2,1]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"fb1aa2c1f31e9c16d41b863ef1fbaa07b98bb391","code":["import Sequelize from 'sequelize';","import { db } from '../db/db.js';","import logger from '../logger.js';","import HttpStatus from 'http-status-codes';","import { validateBook } from '../validators/bookValidator.js';","import { bookProperties } from '../constants/bookProperties.js';","","class Book {","","\tconstructor () {","\t\t// Need 'this' to be defined to access checkBookAvailability within borrowBook.","\t\t// All methods were static previously, but 'this' was undefined inside those methods when the methods were passed as arguments to the handler.","\t\tthis.checkBookAvailability = this.checkBookAvailability.bind(this);","\t\tthis.getBookAvailability = this.getBookAvailability.bind(this);","\t}","","\tasync addBook (req) {","","\t\tconst bookToAdd = req.body;","\t\tlet createdBook;","\t\tlet existingBook;","","\t\tvalidateBook(bookToAdd, { operation: 'add' });","","\t\tconst { name, author, edition, ...restOfBookProps } = bookToAdd;","","\t\ttry {","","\t\t\texistingBook = await db.book.findAll({","\t\t\t\twhere: {","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t\tname,","\t\t\t\t\tauthor,","\t\t\t\t\tedition,","\t\t\t\t},","\t\t\t});","","\t\t\tif (existingBook.length === 0) {","\t\t\t\tcreatedBook = await db.book.create({","\t\t\t\t\t...bookToAdd,","\t\t\t\t\tnoOfBooksAvailable: 1,","\t\t\t\t});","\t\t\t}","\t\t\telse {","","\t\t\t\tawait db.book.update({","\t\t\t\t\tnoOfBooksAvailable: existingBook[0].noOfBooksAvailable + 1,","\t\t\t\t}, {","\t\t\t\t\twhere: {","\t\t\t\t\t\tid: existingBook[0].id,","\t\t\t\t\t},","\t\t\t\t});","","\t\t\t\tcreatedBook = existingBook[0];","\t\t\t\tcreatedBook.noOfBooksAvailable += 1;","\t\t\t}","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.CREATED,","\t\t\t\tresult: 'This book has been added to our library.',","\t\t\t};","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to create books at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tasync getAllBooks (req) {","","\t\tlet allBooks;","\t\ttry {","","\t\t\tallBooks = await db.book.findAll({","\t\t\t\twhere: {","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\tjson: allBooks,","\t\t\t};","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to fetch books at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tasync getBook (req) {","","\t\tlet book;","\t\ttry {","","\t\t\tbook = await db.book.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: req.params.id,","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (!book) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'The requested book is not available now.',","\t\t\t\t};","\t\t\t}","\t\t\telse {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tjson: book,","\t\t\t\t};","\t\t\t}","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to get this book at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tasync checkBookAvailability (id) {","\t\ttry {","","\t\t\tconst existingBook = await db.book.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: id,","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (!existingBook) {","\t\t\t\treturn false;","\t\t\t}","\t\t\telse {","","\t\t\t\tconst availabilityStatus = existingBook.noOfBooksAvailable > 0 ? true : false;","","\t\t\t\treturn availabilityStatus;","\t\t\t}","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn 'ERROR';","","\t\t}","\t}","","\tasync updateBook (req) {","","\t\tconst propertiesToUpdate = {};","","\t\tfor (const key of Object.keys(req.body)) {","\t\t\tif (bookProperties[key]) {","\t\t\t\tpropertiesToUpdate[key] = req.body[key];","\t\t\t}","\t\t}","","\t\tconst propertyKeys = Object.keys(propertiesToUpdate);","","\t\tif (propertyKeys.length > 0) {","\t\t\tvalidateBook(propertiesToUpdate, { operation: 'update' });","\t\t}","\t\telse {","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\tresult: 'Received no properties to update.',","\t\t\t};","\t\t}","","\t\ttry {","","\t\t\t// Move the below query into a separate sub, as it is common for many subs.","\t\t\tconst existingBook = await db.book.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: req.params.id,","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (!existingBook) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'The requested book is not available to be updated.',","\t\t\t\t};","\t\t\t}","\t\t\telse {","\t\t\t\tawait db.book.update(propertiesToUpdate, {","\t\t\t\t\twhere: {","\t\t\t\t\t\tid: req.params.id,","\t\t\t\t\t},","\t\t\t\t});","","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'The properties of this book have been updated.',","\t\t\t\t};","\t\t\t}","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to update this book at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tasync deleteBook (req) {","","\t\ttry {","","\t\t\tconst existingBook = await db.book.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: req.params.id,","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (!existingBook) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'The requested book is not available to be deleted.',","\t\t\t\t};","\t\t\t}","\t\t\telse {","","\t\t\t\tawait db.book.update({","\t\t\t\t\tdeleted: true,","\t\t\t\t}, {","\t\t\t\t\twhere: {","\t\t\t\t\t\tid: req.params.id,","\t\t\t\t\t},","\t\t\t\t});","","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'The requested book has been marked as deleted in the library records.',","\t\t\t\t};","\t\t\t}","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to delete this book at the moment.',","\t\t\t\terror,","\t\t\t};","\t\t}","\t}","","\tasync getBookAvailability (req) {","","\t\tconst availability = await this.checkBookAvailability(req.params.id);","","\t\tif (availability === 'ERROR') {","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to check availability at the moment.',","\t\t\t};","\t\t}","\t\telse {","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\tjson: { availability },","\t\t\t};","\t\t}","\t}","}","","const bookInstance = new Book();","","export default bookInstance;",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/validators/bookValidator.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/validators/bookValidator.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":132}},"2":{"start":{"line":1,"column":310},"end":{"line":1,"column":364}},"3":{"start":{"line":3,"column":19},"end":{"line":13,"column":1}},"4":{"start":{"line":4,"column":1},"end":{"line":12,"column":2}},"5":{"start":{"line":5,"column":2},"end":{"line":5,"column":151}},"6":{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},"7":{"start":{"line":8,"column":2},"end":{"line":8,"column":114}},"8":{"start":{"line":11,"column":2},"end":{"line":11,"column":12}},"9":{"start":{"line":15,"column":21},"end":{"line":22,"column":1}},"10":{"start":{"line":16,"column":1},"end":{"line":21,"column":2}},"11":{"start":{"line":17,"column":2},"end":{"line":17,"column":74}},"12":{"start":{"line":20,"column":2},"end":{"line":20,"column":12}},"13":{"start":{"line":24,"column":26},"end":{"line":31,"column":1}},"14":{"start":{"line":25,"column":1},"end":{"line":30,"column":2}},"15":{"start":{"line":26,"column":2},"end":{"line":26,"column":80}},"16":{"start":{"line":29,"column":2},"end":{"line":29,"column":12}},"17":{"start":{"line":33,"column":28},"end":{"line":40,"column":1}},"18":{"start":{"line":34,"column":1},"end":{"line":39,"column":2}},"19":{"start":{"line":35,"column":2},"end":{"line":35,"column":53}},"20":{"start":{"line":38,"column":2},"end":{"line":38,"column":12}},"21":{"start":{"line":42,"column":22},"end":{"line":49,"column":1}},"22":{"start":{"line":43,"column":1},"end":{"line":48,"column":2}},"23":{"start":{"line":44,"column":2},"end":{"line":44,"column":76}},"24":{"start":{"line":47,"column":2},"end":{"line":47,"column":12}},"25":{"start":{"line":51,"column":43},"end":{"line":79,"column":1}},"26":{"start":{"line":53,"column":23},"end":{"line":53,"column":25}},"27":{"start":{"line":55,"column":1},"end":{"line":63,"column":2}},"28":{"start":{"line":57,"column":2},"end":{"line":57,"column":40}},"29":{"start":{"line":58,"column":2},"end":{"line":58,"column":44}},"30":{"start":{"line":59,"column":2},"end":{"line":59,"column":54}},"31":{"start":{"line":60,"column":2},"end":{"line":60,"column":58}},"32":{"start":{"line":61,"column":2},"end":{"line":61,"column":46}},"33":{"start":{"line":65,"column":1},"end":{"line":73,"column":2}},"34":{"start":{"line":67,"column":2},"end":{"line":67,"column":66}},"35":{"start":{"line":68,"column":2},"end":{"line":68,"column":72}},"36":{"start":{"line":69,"column":2},"end":{"line":69,"column":87}},"37":{"start":{"line":70,"column":2},"end":{"line":70,"column":93}},"38":{"start":{"line":71,"column":2},"end":{"line":71,"column":75}},"39":{"start":{"line":75,"column":1},"end":{"line":77,"column":2}},"40":{"start":{"line":76,"column":2},"end":{"line":76,"column":31}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":1,"column":281},"end":{"line":1,"column":303}},"loc":{"start":{"line":1,"column":309},"end":{"line":1,"column":365}},"line":1},"1":{"name":"validateName","decl":{"start":{"line":3,"column":28},"end":{"line":3,"column":40}},"loc":{"start":{"line":3,"column":47},"end":{"line":13,"column":1}},"line":3},"2":{"name":"validateAuthor","decl":{"start":{"line":15,"column":30},"end":{"line":15,"column":44}},"loc":{"start":{"line":15,"column":53},"end":{"line":22,"column":1}},"line":15},"3":{"name":"validateShelfNumber","decl":{"start":{"line":24,"column":35},"end":{"line":24,"column":54}},"loc":{"start":{"line":24,"column":68},"end":{"line":31,"column":1}},"line":24},"4":{"name":"validatePublishedDate","decl":{"start":{"line":33,"column":37},"end":{"line":33,"column":58}},"loc":{"start":{"line":33,"column":74},"end":{"line":40,"column":1}},"line":33},"5":{"name":"validateEdition","decl":{"start":{"line":42,"column":31},"end":{"line":42,"column":46}},"loc":{"start":{"line":42,"column":56},"end":{"line":49,"column":1}},"line":42},"6":{"name":"validateBook","decl":{"start":{"line":51,"column":75},"end":{"line":51,"column":87}},"loc":{"start":{"line":51,"column":150},"end":{"line":79,"column":1}},"line":51}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":317},"end":{"line":1,"column":363}},"type":"cond-expr","locations":[{"start":{"line":1,"column":341},"end":{"line":1,"column":344}},{"start":{"line":1,"column":347},"end":{"line":1,"column":363}}],"line":1},"1":{"loc":{"start":{"line":1,"column":317},"end":{"line":1,"column":338}},"type":"binary-expr","locations":[{"start":{"line":1,"column":317},"end":{"line":1,"column":320}},{"start":{"line":1,"column":324},"end":{"line":1,"column":338}}],"line":1},"2":{"loc":{"start":{"line":4,"column":1},"end":{"line":12,"column":2}},"type":"if","locations":[{"start":{"line":4,"column":1},"end":{"line":12,"column":2}},{"start":{"line":4,"column":1},"end":{"line":12,"column":2}}],"line":4},"3":{"loc":{"start":{"line":4,"column":5},"end":{"line":4,"column":41}},"type":"binary-expr","locations":[{"start":{"line":4,"column":5},"end":{"line":4,"column":10}},{"start":{"line":4,"column":14},"end":{"line":4,"column":41}}],"line":4},"4":{"loc":{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},"type":"if","locations":[{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},{"start":{"line":7,"column":1},"end":{"line":12,"column":2}}],"line":7},"5":{"loc":{"start":{"line":16,"column":1},"end":{"line":21,"column":2}},"type":"if","locations":[{"start":{"line":16,"column":1},"end":{"line":21,"column":2}},{"start":{"line":16,"column":1},"end":{"line":21,"column":2}}],"line":16},"6":{"loc":{"start":{"line":16,"column":5},"end":{"line":16,"column":45}},"type":"binary-expr","locations":[{"start":{"line":16,"column":5},"end":{"line":16,"column":12}},{"start":{"line":16,"column":16},"end":{"line":16,"column":45}}],"line":16},"7":{"loc":{"start":{"line":25,"column":1},"end":{"line":30,"column":2}},"type":"if","locations":[{"start":{"line":25,"column":1},"end":{"line":30,"column":2}},{"start":{"line":25,"column":1},"end":{"line":30,"column":2}}],"line":25},"8":{"loc":{"start":{"line":25,"column":5},"end":{"line":25,"column":55}},"type":"binary-expr","locations":[{"start":{"line":25,"column":5},"end":{"line":25,"column":17}},{"start":{"line":25,"column":21},"end":{"line":25,"column":55}}],"line":25},"9":{"loc":{"start":{"line":34,"column":1},"end":{"line":39,"column":2}},"type":"if","locations":[{"start":{"line":34,"column":1},"end":{"line":39,"column":2}},{"start":{"line":34,"column":1},"end":{"line":39,"column":2}}],"line":34},"10":{"loc":{"start":{"line":34,"column":5},"end":{"line":34,"column":86}},"type":"binary-expr","locations":[{"start":{"line":34,"column":5},"end":{"line":34,"column":18}},{"start":{"line":34,"column":22},"end":{"line":34,"column":86}}],"line":34},"11":{"loc":{"start":{"line":43,"column":1},"end":{"line":48,"column":2}},"type":"if","locations":[{"start":{"line":43,"column":1},"end":{"line":48,"column":2}},{"start":{"line":43,"column":1},"end":{"line":48,"column":2}}],"line":43},"12":{"loc":{"start":{"line":43,"column":5},"end":{"line":43,"column":46}},"type":"binary-expr","locations":[{"start":{"line":43,"column":5},"end":{"line":43,"column":12}},{"start":{"line":43,"column":16},"end":{"line":43,"column":46}}],"line":43},"13":{"loc":{"start":{"line":55,"column":1},"end":{"line":63,"column":2}},"type":"if","locations":[{"start":{"line":55,"column":1},"end":{"line":63,"column":2}},{"start":{"line":55,"column":1},"end":{"line":63,"column":2}}],"line":55},"14":{"loc":{"start":{"line":65,"column":1},"end":{"line":73,"column":2}},"type":"if","locations":[{"start":{"line":65,"column":1},"end":{"line":73,"column":2}},{"start":{"line":65,"column":1},"end":{"line":73,"column":2}}],"line":65},"15":{"loc":{"start":{"line":67,"column":21},"end":{"line":67,"column":65}},"type":"cond-expr","locations":[{"start":{"line":67,"column":42},"end":{"line":67,"column":60}},{"start":{"line":67,"column":63},"end":{"line":67,"column":65}}],"line":67},"16":{"loc":{"start":{"line":68,"column":21},"end":{"line":68,"column":71}},"type":"cond-expr","locations":[{"start":{"line":68,"column":44},"end":{"line":68,"column":66}},{"start":{"line":68,"column":69},"end":{"line":68,"column":71}}],"line":68},"17":{"loc":{"start":{"line":69,"column":21},"end":{"line":69,"column":86}},"type":"cond-expr","locations":[{"start":{"line":69,"column":49},"end":{"line":69,"column":81}},{"start":{"line":69,"column":84},"end":{"line":69,"column":86}}],"line":69},"18":{"loc":{"start":{"line":70,"column":21},"end":{"line":70,"column":92}},"type":"cond-expr","locations":[{"start":{"line":70,"column":51},"end":{"line":70,"column":87}},{"start":{"line":70,"column":90},"end":{"line":70,"column":92}}],"line":70},"19":{"loc":{"start":{"line":71,"column":21},"end":{"line":71,"column":74}},"type":"cond-expr","locations":[{"start":{"line":71,"column":45},"end":{"line":71,"column":69}},{"start":{"line":71,"column":72},"end":{"line":71,"column":74}}],"line":71},"20":{"loc":{"start":{"line":75,"column":1},"end":{"line":77,"column":2}},"type":"if","locations":[{"start":{"line":75,"column":1},"end":{"line":77,"column":2}},{"start":{"line":75,"column":1},"end":{"line":77,"column":2}}],"line":75}},"s":{"0":4,"1":4,"2":4,"3":4,"4":11,"5":2,"6":9,"7":1,"8":8,"9":4,"10":11,"11":3,"12":8,"13":4,"14":11,"15":3,"16":8,"17":4,"18":11,"19":1,"20":10,"21":4,"22":13,"23":1,"24":12,"25":4,"26":15,"27":15,"28":10,"29":10,"30":10,"31":10,"32":10,"33":15,"34":5,"35":5,"36":5,"37":5,"38":5,"39":15,"40":6},"f":{"0":4,"1":11,"2":11,"3":11,"4":11,"5":13,"6":15},"b":{"0":[0,4],"1":[4,4],"2":[2,9],"3":[11,10],"4":[1,8],"5":[3,8],"6":[11,9],"7":[3,8],"8":[11,9],"9":[1,10],"10":[11,9],"11":[1,12],"12":[13,11],"13":[10,5],"14":[5,10],"15":[1,4],"16":[1,4],"17":[1,4],"18":[1,4],"19":[3,2],"20":[6,9]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"c65d0e58c3b5e6c3335561a5aa46217cf97a656c","code":["import validator from 'validator';","","const validateName = (name) => {","\tif (!name || !(typeof (name) === 'string')) {","\t\treturn 'Name of the book cannot be empty, should be a string, has to contain between 6 and 20 characters and it cannot contain special characters. ';","\t}","\telse if (!validator.matches(name, /[a-zA-Z0-9\\s]{6,20}/i)) {","\t\treturn 'Name of the book has to contain between 6 and 20 characters and it cannot contain special characters. ';","\t}","\telse {","\t\treturn '';","\t}","};","","const validateAuthor = (author) => {","\tif (!author || !(typeof (author) === 'string')) {","\t\treturn 'Author of the book cannot be empty and it should be a string. ';","\t}","\telse {","\t\treturn '';","\t}","};","","const validateShelfNumber = (shelfNumber) => {","\tif (!shelfNumber || !(typeof (shelfNumber) === 'string')) {","\t\treturn 'Shelf number of the book cannot be empty and it should be a string. ';","\t}","\telse {","\t\treturn '';","\t}","};","","const validatePublishedDate = (publishedDate) => {","\tif (publishedDate && !publishedDate.match(/[1,2][7,8,9,0][0-9]{2}-[0-9]{2}-[0-9]{2}/)) {","\t\treturn 'Published date of the book is not valid. ';","\t}","\telse {","\t\treturn '';","\t}","};","","const validateEdition = (edition) => {","\tif (edition && !(typeof (edition) === 'string')) {","\t\treturn 'Edition number of the book is not valid. It has to be a number. ';","\t}","\telse {","\t\treturn '';","\t}","};","","export const validateBook = ({ name, author, edition, publishedDate, shelfNumber }, { operation = 'noop' }) => {","","\tlet validationError = '';","","\tif (operation === 'add') {","","\t\tvalidationError += validateName(name);","\t\tvalidationError += validateAuthor(author);","\t\tvalidationError += validateShelfNumber(shelfNumber);","\t\tvalidationError += validatePublishedDate(publishedDate);","\t\tvalidationError += validateEdition(edition);","","\t}","","\tif (operation === 'update') {","","\t\tvalidationError += name !== undefined ? validateName(name) : '';","\t\tvalidationError += author !== undefined ? validateAuthor(author) : '';","\t\tvalidationError += shelfNumber !== undefined ? validateShelfNumber(shelfNumber) : '';","\t\tvalidationError += publishedDate !== undefined ? validatePublishedDate(publishedDate) : '';","\t\tvalidationError += edition !== undefined ? validateEdition(edition) : '';","","\t}","","\tif (validationError) {","\t\tthrow Error(validationError);","\t}","","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/constants/bookProperties.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/constants/bookProperties.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":144},"end":{"line":6,"column":29}}},"fnMap":{},"branchMap":{},"s":{"0":4,"1":4},"f":{},"b":{},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"2c9f89e2cebe11973fd8d2d87e70e8dced17b22c","code":["export const bookProperties = {","\tname: 'NAME',","\tauthor: 'AUTHOR',","\tpublishedDate: 'PUBLISHEDDATE',","\tedition: 'EDITION',","\tshelfNumber: 'SHELFNUMBER',","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/memberController.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/memberController.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":132}},"2":{"start":{"line":3,"column":178},"end":{"line":3,"column":232}},"3":{"start":{"line":3,"column":265},"end":{"line":3,"column":665}},"4":{"start":{"line":3,"column":295},"end":{"line":3,"column":320}},"5":{"start":{"line":3,"column":321},"end":{"line":3,"column":663}},"6":{"start":{"line":3,"column":393},"end":{"line":3,"column":485}},"7":{"start":{"line":3,"column":409},"end":{"line":3,"column":422}},"8":{"start":{"line":3,"column":435},"end":{"line":3,"column":445}},"9":{"start":{"line":3,"column":463},"end":{"line":3,"column":477}},"10":{"start":{"line":3,"column":477},"end":{"line":3,"column":484}},"11":{"start":{"line":3,"column":485},"end":{"line":3,"column":639}},"12":{"start":{"line":3,"column":501},"end":{"line":3,"column":516}},"13":{"start":{"line":3,"column":524},"end":{"line":3,"column":638}},"14":{"start":{"line":3,"column":577},"end":{"line":3,"column":597}},"15":{"start":{"line":3,"column":616},"end":{"line":3,"column":635}},"16":{"start":{"line":3,"column":640},"end":{"line":3,"column":660}},"17":{"start":{"line":5,"column":43},"end":{"line":13,"column":1}},"18":{"start":{"line":7,"column":44},"end":{"line":7,"column":95}},"19":{"start":{"line":9,"column":1},"end":{"line":9,"column":697}},"20":{"start":{"line":9,"column":79},"end":{"line":9,"column":627}},"21":{"start":{"line":9,"column":628},"end":{"line":9,"column":692}},"22":{"start":{"line":9,"column":655},"end":{"line":9,"column":690}},"23":{"start":{"line":10,"column":1},"end":{"line":10,"column":716}},"24":{"start":{"line":10,"column":86},"end":{"line":10,"column":644}},"25":{"start":{"line":10,"column":645},"end":{"line":10,"column":711}},"26":{"start":{"line":10,"column":673},"end":{"line":10,"column":709}},"27":{"start":{"line":12,"column":1},"end":{"line":12,"column":21}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":3,"column":149},"end":{"line":3,"column":171}},"loc":{"start":{"line":3,"column":177},"end":{"line":3,"column":233}},"line":3},"1":{"name":"_asyncToGenerator","decl":{"start":{"line":3,"column":242},"end":{"line":3,"column":259}},"loc":{"start":{"line":3,"column":264},"end":{"line":3,"column":666}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":272},"end":{"line":3,"column":273}},"loc":{"start":{"line":3,"column":284},"end":{"line":3,"column":664}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":3,"column":340},"end":{"line":3,"column":341}},"loc":{"start":{"line":3,"column":367},"end":{"line":3,"column":661}},"line":3},"4":{"name":"step","decl":{"start":{"line":3,"column":377},"end":{"line":3,"column":381}},"loc":{"start":{"line":3,"column":392},"end":{"line":3,"column":640}},"line":3},"5":{"name":"(anonymous_5)","decl":{"start":{"line":3,"column":559},"end":{"line":3,"column":560}},"loc":{"start":{"line":3,"column":576},"end":{"line":3,"column":598}},"line":3},"6":{"name":"(anonymous_6)","decl":{"start":{"line":3,"column":600},"end":{"line":3,"column":601}},"loc":{"start":{"line":3,"column":615},"end":{"line":3,"column":636}},"line":3},"7":{"name":"memberRouter","decl":{"start":{"line":5,"column":99},"end":{"line":5,"column":111}},"loc":{"start":{"line":5,"column":114},"end":{"line":13,"column":1}},"line":5},"8":{"name":"(anonymous_8)","decl":{"start":{"line":9,"column":55},"end":{"line":9,"column":56}},"loc":{"start":{"line":9,"column":67},"end":{"line":9,"column":693}},"line":9},"9":{"name":"_callee","decl":{"start":{"line":9,"column":168},"end":{"line":9,"column":175}},"loc":{"start":{"line":9,"column":210},"end":{"line":9,"column":625}},"line":9},"10":{"name":"(anonymous_10)","decl":{"start":{"line":9,"column":635},"end":{"line":9,"column":636}},"loc":{"start":{"line":9,"column":654},"end":{"line":9,"column":691}},"line":9},"11":{"name":"(anonymous_11)","decl":{"start":{"line":10,"column":61},"end":{"line":10,"column":62}},"loc":{"start":{"line":10,"column":73},"end":{"line":10,"column":712}},"line":10},"12":{"name":"_callee2","decl":{"start":{"line":10,"column":175},"end":{"line":10,"column":183}},"loc":{"start":{"line":10,"column":218},"end":{"line":10,"column":642}},"line":10},"13":{"name":"(anonymous_13)","decl":{"start":{"line":10,"column":652},"end":{"line":10,"column":653}},"loc":{"start":{"line":10,"column":672},"end":{"line":10,"column":710}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":185},"end":{"line":3,"column":231}},"type":"cond-expr","locations":[{"start":{"line":3,"column":209},"end":{"line":3,"column":212}},{"start":{"line":3,"column":215},"end":{"line":3,"column":231}}],"line":3},"1":{"loc":{"start":{"line":3,"column":185},"end":{"line":3,"column":206}},"type":"binary-expr","locations":[{"start":{"line":3,"column":185},"end":{"line":3,"column":188}},{"start":{"line":3,"column":192},"end":{"line":3,"column":206}}],"line":3},"2":{"loc":{"start":{"line":3,"column":485},"end":{"line":3,"column":639}},"type":"if","locations":[{"start":{"line":3,"column":485},"end":{"line":3,"column":639}},{"start":{"line":3,"column":485},"end":{"line":3,"column":639}}],"line":3}},"s":{"0":3,"1":3,"2":6,"3":6,"4":14,"5":14,"6":14,"7":14,"8":14,"9":0,"10":0,"11":14,"12":14,"13":0,"14":0,"15":0,"16":14,"17":3,"18":3,"19":3,"20":3,"21":3,"22":10,"23":3,"24":3,"25":3,"26":4,"27":3},"f":{"0":6,"1":6,"2":14,"3":14,"4":14,"5":0,"6":0,"7":3,"8":3,"9":10,"10":10,"11":3,"12":4,"13":4},"b":{"0":[3,3],"1":[6,6],"2":[14,0]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"28c2cb2f689a62faf0a06931125fc8bd3313c857","code":["import express from 'express';","import { requestHandler } from '../middleware/handlers.js';","import MemberFunctions from '../logic/member.js';","","export const memberRouter = () => {","","\tconst memberRouter = express.Router();","","\tmemberRouter.post   ('/members',     async (req, res) => requestHandler(req, res, MemberFunctions.registerMember));","\tmemberRouter.delete ('/members/:id', async (req, res) => requestHandler(req, res, MemberFunctions.unRegisterMember));","","\treturn memberRouter;","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/member.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/member.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":118},"end":{"line":1,"column":647}},"2":{"start":{"line":1,"column":173},"end":{"line":1,"column":438}},"3":{"start":{"line":1,"column":230},"end":{"line":1,"column":238}},"4":{"start":{"line":1,"column":239},"end":{"line":1,"column":294}},"5":{"start":{"line":1,"column":294},"end":{"line":1,"column":325}},"6":{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},"7":{"start":{"line":1,"column":352},"end":{"line":1,"column":379}},"8":{"start":{"line":1,"column":379},"end":{"line":1,"column":437}},"9":{"start":{"line":1,"column":439},"end":{"line":1,"column":644}},"10":{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},"11":{"start":{"line":1,"column":511},"end":{"line":1,"column":563}},"12":{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},"13":{"start":{"line":1,"column":580},"end":{"line":1,"column":623}},"14":{"start":{"line":1,"column":623},"end":{"line":1,"column":642}},"15":{"start":{"line":5,"column":252},"end":{"line":5,"column":399}},"16":{"start":{"line":5,"column":269},"end":{"line":5,"column":373}},"17":{"start":{"line":5,"column":381},"end":{"line":5,"column":398}},"18":{"start":{"line":5,"column":399},"end":{"line":5,"column":410}},"19":{"start":{"line":5,"column":443},"end":{"line":5,"column":843}},"20":{"start":{"line":5,"column":473},"end":{"line":5,"column":498}},"21":{"start":{"line":5,"column":499},"end":{"line":5,"column":841}},"22":{"start":{"line":5,"column":571},"end":{"line":5,"column":663}},"23":{"start":{"line":5,"column":587},"end":{"line":5,"column":600}},"24":{"start":{"line":5,"column":613},"end":{"line":5,"column":623}},"25":{"start":{"line":5,"column":641},"end":{"line":5,"column":655}},"26":{"start":{"line":5,"column":655},"end":{"line":5,"column":662}},"27":{"start":{"line":5,"column":663},"end":{"line":5,"column":817}},"28":{"start":{"line":5,"column":679},"end":{"line":5,"column":694}},"29":{"start":{"line":5,"column":702},"end":{"line":5,"column":816}},"30":{"start":{"line":5,"column":755},"end":{"line":5,"column":775}},"31":{"start":{"line":5,"column":794},"end":{"line":5,"column":813}},"32":{"start":{"line":5,"column":818},"end":{"line":5,"column":838}},"33":{"start":{"line":5,"column":893},"end":{"line":5,"column":992}},"34":{"start":{"line":5,"column":934},"end":{"line":5,"column":991}},"35":{"start":{"line":7,"column":9},"end":{"line":101,"column":253}},"36":{"start":{"line":7,"column":41},"end":{"line":7,"column":71}},"37":{"start":{"line":7,"column":72},"end":{"line":101,"column":236}},"38":{"start":{"line":7,"column":156},"end":{"line":50,"column":131}},"39":{"start":{"line":9,"column":107},"end":{"line":50,"column":128}},"40":{"start":{"line":9,"column":167},"end":{"line":50,"column":99}},"41":{"start":{"line":9,"column":178},"end":{"line":50,"column":98}},"42":{"start":{"line":9,"column":225},"end":{"line":11,"column":260}},"43":{"start":{"line":13,"column":8},"end":{"line":13,"column":32}},"44":{"start":{"line":15,"column":172},"end":{"line":15,"column":190}},"45":{"start":{"line":15,"column":190},"end":{"line":15,"column":208}},"46":{"start":{"line":15,"column":208},"end":{"line":22,"column":159}},"47":{"start":{"line":22,"column":166},"end":{"line":22,"column":197}},"48":{"start":{"line":22,"column":197},"end":{"line":26,"column":50}},"49":{"start":{"line":26,"column":25},"end":{"line":26,"column":43}},"50":{"start":{"line":26,"column":43},"end":{"line":26,"column":49}},"51":{"start":{"line":26,"column":50},"end":{"line":29,"column":73}},"52":{"start":{"line":29,"column":80},"end":{"line":29,"column":99}},"53":{"start":{"line":29,"column":99},"end":{"line":35,"column":43}},"54":{"start":{"line":35,"column":51},"end":{"line":40,"column":62}},"55":{"start":{"line":40,"column":70},"end":{"line":40,"column":89}},"56":{"start":{"line":40,"column":89},"end":{"line":40,"column":124}},"57":{"start":{"line":46,"column":118},"end":{"line":50,"column":55}},"58":{"start":{"line":50,"column":74},"end":{"line":50,"column":97}},"59":{"start":{"line":50,"column":161},"end":{"line":50,"column":196}},"60":{"start":{"line":50,"column":197},"end":{"line":50,"column":219}},"61":{"start":{"line":50,"column":285},"end":{"line":101,"column":134}},"62":{"start":{"line":56,"column":38},"end":{"line":101,"column":131}},"63":{"start":{"line":56,"column":100},"end":{"line":101,"column":101}},"64":{"start":{"line":56,"column":111},"end":{"line":101,"column":100}},"65":{"start":{"line":57,"column":8},"end":{"line":57,"column":33}},"66":{"start":{"line":57,"column":33},"end":{"line":57,"column":52}},"67":{"start":{"line":57,"column":52},"end":{"line":57,"column":71}},"68":{"start":{"line":57,"column":71},"end":{"line":63,"column":30}},"69":{"start":{"line":63,"column":37},"end":{"line":63,"column":69}},"70":{"start":{"line":63,"column":69},"end":{"line":67,"column":51}},"71":{"start":{"line":67,"column":25},"end":{"line":67,"column":44}},"72":{"start":{"line":67,"column":44},"end":{"line":67,"column":50}},"73":{"start":{"line":67,"column":51},"end":{"line":70,"column":67}},"74":{"start":{"line":70,"column":74},"end":{"line":74,"column":66}},"75":{"start":{"line":74,"column":40},"end":{"line":74,"column":59}},"76":{"start":{"line":74,"column":59},"end":{"line":74,"column":65}},"77":{"start":{"line":74,"column":66},"end":{"line":77,"column":66}},"78":{"start":{"line":77,"column":73},"end":{"line":77,"column":93}},"79":{"start":{"line":77,"column":93},"end":{"line":85,"column":30}},"80":{"start":{"line":85,"column":38},"end":{"line":91,"column":64}},"81":{"start":{"line":91,"column":72},"end":{"line":91,"column":92}},"82":{"start":{"line":91,"column":92},"end":{"line":91,"column":129}},"83":{"start":{"line":97,"column":119},"end":{"line":101,"column":56}},"84":{"start":{"line":101,"column":75},"end":{"line":101,"column":99}},"85":{"start":{"line":101,"column":167},"end":{"line":101,"column":203}},"86":{"start":{"line":101,"column":204},"end":{"line":101,"column":228}},"87":{"start":{"line":101,"column":236},"end":{"line":101,"column":250}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":118},"end":{"line":1,"column":119}},"loc":{"start":{"line":1,"column":130},"end":{"line":1,"column":645}},"line":1},"1":{"name":"defineProperties","decl":{"start":{"line":1,"column":140},"end":{"line":1,"column":156}},"loc":{"start":{"line":1,"column":172},"end":{"line":1,"column":439}},"line":1},"2":{"name":"(anonymous_2)","decl":{"start":{"line":1,"column":446},"end":{"line":1,"column":447}},"loc":{"start":{"line":1,"column":494},"end":{"line":1,"column":643}},"line":1},"3":{"name":"_defineProperty","decl":{"start":{"line":5,"column":218},"end":{"line":5,"column":233}},"loc":{"start":{"line":5,"column":251},"end":{"line":5,"column":411}},"line":5},"4":{"name":"_asyncToGenerator","decl":{"start":{"line":5,"column":420},"end":{"line":5,"column":437}},"loc":{"start":{"line":5,"column":442},"end":{"line":5,"column":844}},"line":5},"5":{"name":"(anonymous_5)","decl":{"start":{"line":5,"column":450},"end":{"line":5,"column":451}},"loc":{"start":{"line":5,"column":462},"end":{"line":5,"column":842}},"line":5},"6":{"name":"(anonymous_6)","decl":{"start":{"line":5,"column":518},"end":{"line":5,"column":519}},"loc":{"start":{"line":5,"column":545},"end":{"line":5,"column":839}},"line":5},"7":{"name":"step","decl":{"start":{"line":5,"column":555},"end":{"line":5,"column":559}},"loc":{"start":{"line":5,"column":570},"end":{"line":5,"column":818}},"line":5},"8":{"name":"(anonymous_8)","decl":{"start":{"line":5,"column":737},"end":{"line":5,"column":738}},"loc":{"start":{"line":5,"column":754},"end":{"line":5,"column":776}},"line":5},"9":{"name":"(anonymous_9)","decl":{"start":{"line":5,"column":778},"end":{"line":5,"column":779}},"loc":{"start":{"line":5,"column":793},"end":{"line":5,"column":814}},"line":5},"10":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":853},"end":{"line":5,"column":868}},"loc":{"start":{"line":5,"column":892},"end":{"line":5,"column":993}},"line":5},"11":{"name":"(anonymous_11)","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":10}},"loc":{"start":{"line":7,"column":21},"end":{"line":101,"column":251}},"line":7},"12":{"name":"Member","decl":{"start":{"line":7,"column":31},"end":{"line":7,"column":37}},"loc":{"start":{"line":7,"column":40},"end":{"line":7,"column":72}},"line":7},"13":{"name":"(anonymous_13)","decl":{"start":{"line":7,"column":132},"end":{"line":7,"column":133}},"loc":{"start":{"line":7,"column":144},"end":{"line":50,"column":220}},"line":7},"14":{"name":"_callee","decl":{"start":{"line":7,"column":221},"end":{"line":7,"column":228}},"loc":{"start":{"line":9,"column":8},"end":{"line":50,"column":129}},"line":9},"15":{"name":"_callee$","decl":{"start":{"line":9,"column":147},"end":{"line":9,"column":155}},"loc":{"start":{"line":9,"column":166},"end":{"line":50,"column":100}},"line":9},"16":{"name":"registerMember","decl":{"start":{"line":50,"column":141},"end":{"line":50,"column":155}},"loc":{"start":{"line":50,"column":160},"end":{"line":50,"column":197}},"line":50},"17":{"name":"(anonymous_17)","decl":{"start":{"line":50,"column":260},"end":{"line":50,"column":261}},"loc":{"start":{"line":50,"column":272},"end":{"line":101,"column":229}},"line":50},"18":{"name":"_callee2","decl":{"start":{"line":50,"column":350},"end":{"line":50,"column":358}},"loc":{"start":{"line":56,"column":8},"end":{"line":101,"column":132}},"line":56},"19":{"name":"_callee2$","decl":{"start":{"line":56,"column":78},"end":{"line":56,"column":87}},"loc":{"start":{"line":56,"column":99},"end":{"line":101,"column":102}},"line":56},"20":{"name":"unRegisterMember","decl":{"start":{"line":101,"column":144},"end":{"line":101,"column":160}},"loc":{"start":{"line":101,"column":166},"end":{"line":101,"column":204}},"line":101}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":263},"end":{"line":1,"column":293}},"type":"binary-expr","locations":[{"start":{"line":1,"column":263},"end":{"line":1,"column":284}},{"start":{"line":1,"column":288},"end":{"line":1,"column":293}}],"line":1},"1":{"loc":{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},"type":"if","locations":[{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},{"start":{"line":1,"column":325},"end":{"line":1,"column":379}}],"line":1},"2":{"loc":{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},"type":"if","locations":[{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},{"start":{"line":1,"column":495},"end":{"line":1,"column":563}}],"line":1},"3":{"loc":{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},"type":"if","locations":[{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},{"start":{"line":1,"column":563},"end":{"line":1,"column":623}}],"line":1},"4":{"loc":{"start":{"line":5,"column":252},"end":{"line":5,"column":399}},"type":"if","locations":[{"start":{"line":5,"column":252},"end":{"line":5,"column":399}},{"start":{"line":5,"column":252},"end":{"line":5,"column":399}}],"line":5},"5":{"loc":{"start":{"line":5,"column":663},"end":{"line":5,"column":817}},"type":"if","locations":[{"start":{"line":5,"column":663},"end":{"line":5,"column":817}},{"start":{"line":5,"column":663},"end":{"line":5,"column":817}}],"line":5},"6":{"loc":{"start":{"line":5,"column":893},"end":{"line":5,"column":992}},"type":"if","locations":[{"start":{"line":5,"column":893},"end":{"line":5,"column":992}},{"start":{"line":5,"column":893},"end":{"line":5,"column":992}}],"line":5},"7":{"loc":{"start":{"line":9,"column":178},"end":{"line":50,"column":98}},"type":"switch","locations":[{"start":{"line":9,"column":218},"end":{"line":22,"column":159}},{"start":{"line":22,"column":159},"end":{"line":29,"column":73}},{"start":{"line":29,"column":73},"end":{"line":35,"column":43}},{"start":{"line":35,"column":43},"end":{"line":40,"column":62}},{"start":{"line":40,"column":62},"end":{"line":50,"column":55}},{"start":{"line":50,"column":55},"end":{"line":50,"column":63}},{"start":{"line":50,"column":63},"end":{"line":50,"column":97}}],"line":9},"8":{"loc":{"start":{"line":11,"column":70},"end":{"line":11,"column":128}},"type":"cond-expr","locations":[{"start":{"line":11,"column":105},"end":{"line":11,"column":107}},{"start":{"line":11,"column":110},"end":{"line":11,"column":128}}],"line":11},"9":{"loc":{"start":{"line":11,"column":195},"end":{"line":11,"column":259}},"type":"cond-expr","locations":[{"start":{"line":11,"column":233},"end":{"line":11,"column":235}},{"start":{"line":11,"column":238},"end":{"line":11,"column":259}}],"line":11},"10":{"loc":{"start":{"line":22,"column":197},"end":{"line":26,"column":50}},"type":"if","locations":[{"start":{"line":22,"column":197},"end":{"line":26,"column":50}},{"start":{"line":22,"column":197},"end":{"line":26,"column":50}}],"line":22},"11":{"loc":{"start":{"line":56,"column":111},"end":{"line":101,"column":100}},"type":"switch","locations":[{"start":{"line":56,"column":153},"end":{"line":63,"column":30}},{"start":{"line":63,"column":30},"end":{"line":70,"column":67}},{"start":{"line":70,"column":67},"end":{"line":77,"column":66}},{"start":{"line":77,"column":66},"end":{"line":85,"column":30}},{"start":{"line":85,"column":30},"end":{"line":91,"column":64}},{"start":{"line":91,"column":64},"end":{"line":101,"column":56}},{"start":{"line":101,"column":56},"end":{"line":101,"column":64}},{"start":{"line":101,"column":64},"end":{"line":101,"column":99}}],"line":56},"12":{"loc":{"start":{"line":63,"column":69},"end":{"line":67,"column":51}},"type":"if","locations":[{"start":{"line":63,"column":69},"end":{"line":67,"column":51}},{"start":{"line":63,"column":69},"end":{"line":67,"column":51}}],"line":63},"13":{"loc":{"start":{"line":70,"column":74},"end":{"line":74,"column":66}},"type":"if","locations":[{"start":{"line":70,"column":74},"end":{"line":74,"column":66}},{"start":{"line":70,"column":74},"end":{"line":74,"column":66}}],"line":70}},"s":{"0":3,"1":3,"2":3,"3":6,"4":6,"5":6,"6":6,"7":6,"8":6,"9":3,"10":3,"11":0,"12":3,"13":3,"14":3,"15":4,"16":0,"17":4,"18":4,"19":6,"20":14,"21":14,"22":25,"23":25,"24":19,"25":6,"26":6,"27":19,"28":8,"29":11,"30":11,"31":0,"32":14,"33":0,"34":0,"35":3,"36":0,"37":3,"38":3,"39":10,"40":27,"41":30,"42":10,"43":10,"44":4,"45":4,"46":4,"47":4,"48":4,"49":3,"50":3,"51":1,"52":3,"53":3,"54":2,"55":1,"56":1,"57":1,"58":10,"59":10,"60":3,"61":3,"62":4,"63":14,"64":19,"65":4,"66":4,"67":4,"68":4,"69":4,"70":4,"71":3,"72":3,"73":1,"74":3,"75":2,"76":2,"77":1,"78":2,"79":2,"80":1,"81":1,"82":1,"83":1,"84":4,"85":4,"86":3,"87":3},"f":{"0":3,"1":3,"2":3,"3":4,"4":6,"5":14,"6":14,"7":25,"8":11,"9":0,"10":0,"11":3,"12":0,"13":3,"14":10,"15":27,"16":10,"17":3,"18":4,"19":14,"20":4},"b":{"0":[6,6],"1":[6,0],"2":[0,3],"3":[3,0],"4":[0,4],"5":[8,11],"6":[0,0],"7":[10,4,3,2,1,0,10],"8":[1,9],"9":[6,4],"10":[3,1],"11":[4,4,3,2,1,1,0,4],"12":[3,1],"13":[2,1]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"8e8698b46ea4a05044259fb623cb9c6f9386b837","code":["import Sequelize from 'sequelize';","import { db } from '../db/db.js';","import logger from '../logger.js';","import HttpStatus from 'http-status-codes';","import { validateMember } from '../validators/memberValidator.js';","","export default class Member {","","\tstatic async registerMember (req) {","","\t\tconst { username = '', contactNumber = '' } = req.body;","","\t\tlet existingMember;","","\t\tvalidateMember({ username, contactNumber });","","\t\ttry {","","\t\t\texistingMember = await db.member.findOne({","\t\t\t\twhere: {","\t\t\t\t\tusername,","\t\t\t\t\tunRegisteredYN: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (existingMember) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\t\tresult: 'The requested user is already a registered member.',","\t\t\t\t};","\t\t\t}","","\t\t\tawait db.member.create({","\t\t\t\tusername,","\t\t\t\tcontactNumber,","\t\t\t});","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.CREATED,","\t\t\t\tresult: 'The requested user has been registered.',","\t\t\t};","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to register this user at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tstatic async unRegisterMember (req) {","\t\tconst memberId = req.params.id;","","\t\ttry {","","\t\t\tconst existingMember = await db.member.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: memberId,","\t\t\t\t},","\t\t\t});","","\t\t\tif (!existingMember) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\t\tresult: 'This user is not already registered with us.',","\t\t\t\t};","\t\t\t}","","\t\t\tif (existingMember.unRegisteredYN) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'This user has already unregistered with us.',","\t\t\t\t};","\t\t\t}","","\t\t\tawait db.member.update({","\t\t\t\tunRegisteredYN: true,","\t\t\t}, {","\t\t\t\twhere: {","\t\t\t\t\tid: memberId,","\t\t\t\t},","\t\t\t});","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\tresult: 'The requested user has been unregistered.',","\t\t\t};","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to unregister this user at the moment.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","}",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/validators/memberValidator.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/validators/memberValidator.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":134}},"2":{"start":{"line":1,"column":312},"end":{"line":1,"column":366}},"3":{"start":{"line":3,"column":45},"end":{"line":25,"column":1}},"4":{"start":{"line":5,"column":23},"end":{"line":5,"column":25}},"5":{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},"6":{"start":{"line":8,"column":2},"end":{"line":8,"column":153}},"7":{"start":{"line":10,"column":1},"end":{"line":12,"column":2}},"8":{"start":{"line":11,"column":2},"end":{"line":11,"column":110}},"9":{"start":{"line":14,"column":1},"end":{"line":19,"column":2}},"10":{"start":{"line":15,"column":2},"end":{"line":15,"column":59}},"11":{"start":{"line":17,"column":1},"end":{"line":19,"column":2}},"12":{"start":{"line":18,"column":2},"end":{"line":18,"column":65}},"13":{"start":{"line":21,"column":1},"end":{"line":23,"column":2}},"14":{"start":{"line":22,"column":2},"end":{"line":22,"column":31}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":1,"column":283},"end":{"line":1,"column":305}},"loc":{"start":{"line":1,"column":311},"end":{"line":1,"column":367}},"line":1},"1":{"name":"validateMember","decl":{"start":{"line":3,"column":79},"end":{"line":3,"column":93}},"loc":{"start":{"line":3,"column":125},"end":{"line":25,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":319},"end":{"line":1,"column":365}},"type":"cond-expr","locations":[{"start":{"line":1,"column":343},"end":{"line":1,"column":346}},{"start":{"line":1,"column":349},"end":{"line":1,"column":365}}],"line":1},"1":{"loc":{"start":{"line":1,"column":319},"end":{"line":1,"column":340}},"type":"binary-expr","locations":[{"start":{"line":1,"column":319},"end":{"line":1,"column":322}},{"start":{"line":1,"column":326},"end":{"line":1,"column":340}}],"line":1},"2":{"loc":{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},"type":"if","locations":[{"start":{"line":7,"column":1},"end":{"line":12,"column":2}},{"start":{"line":7,"column":1},"end":{"line":12,"column":2}}],"line":7},"3":{"loc":{"start":{"line":7,"column":5},"end":{"line":7,"column":52}},"type":"binary-expr","locations":[{"start":{"line":7,"column":5},"end":{"line":7,"column":20}},{"start":{"line":7,"column":24},"end":{"line":7,"column":52}}],"line":7},"4":{"loc":{"start":{"line":10,"column":1},"end":{"line":12,"column":2}},"type":"if","locations":[{"start":{"line":10,"column":1},"end":{"line":12,"column":2}},{"start":{"line":10,"column":1},"end":{"line":12,"column":2}}],"line":10},"5":{"loc":{"start":{"line":14,"column":1},"end":{"line":19,"column":2}},"type":"if","locations":[{"start":{"line":14,"column":1},"end":{"line":19,"column":2}},{"start":{"line":14,"column":1},"end":{"line":19,"column":2}}],"line":14},"6":{"loc":{"start":{"line":17,"column":1},"end":{"line":19,"column":2}},"type":"if","locations":[{"start":{"line":17,"column":1},"end":{"line":19,"column":2}},{"start":{"line":17,"column":1},"end":{"line":19,"column":2}}],"line":17},"7":{"loc":{"start":{"line":17,"column":5},"end":{"line":17,"column":117}},"type":"binary-expr","locations":[{"start":{"line":17,"column":5},"end":{"line":17,"column":18}},{"start":{"line":17,"column":22},"end":{"line":17,"column":117}}],"line":17},"8":{"loc":{"start":{"line":21,"column":1},"end":{"line":23,"column":2}},"type":"if","locations":[{"start":{"line":21,"column":1},"end":{"line":23,"column":2}},{"start":{"line":21,"column":1},"end":{"line":23,"column":2}}],"line":21}},"s":{"0":3,"1":3,"2":3,"3":3,"4":10,"5":10,"6":3,"7":7,"8":1,"9":10,"10":1,"11":9,"12":1,"13":10,"14":6},"f":{"0":3,"1":10},"b":{"0":[0,3],"1":[3,3],"2":[3,7],"3":[10,8],"4":[1,6],"5":[1,9],"6":[1,8],"7":[9,3],"8":[6,4]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"28d03d174e0cdbf6b3f7de0c628f39e6f6eb717c","code":["import validator from 'validator';","","export const validateMember = ({ username, contactNumber }) => {","","\tlet validationError = '';","","\tif (username === '' || typeof (username) === 'number') {","\t\tvalidationError += 'Username cannot be empty and it should be a string, should be between 6-12 characters/digits. Cannot contain special characters. ';","\t}","\telse if (!validator.matches(username, /[a-zA-Z0-9\\s]{6,12}/i)) {","\t\tvalidationError += 'Username should be between 6-12 characters/digits. Cannot contain special characters. ';","\t}","","\tif (typeof (contactNumber) === 'number') {","\t\tvalidationError += 'Contact number should be a string. ';","\t}","\telse if (contactNumber && !validator.isNumeric(contactNumber)) {","\t\tvalidationError += 'Contact number can contain only numbers. ';","\t}","","\tif (validationError) {","\t\tthrow Error(validationError);","\t}","","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/bookTransactionsController.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/controllers/bookTransactionsController.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":142}},"2":{"start":{"line":3,"column":218},"end":{"line":3,"column":272}},"3":{"start":{"line":3,"column":305},"end":{"line":3,"column":705}},"4":{"start":{"line":3,"column":335},"end":{"line":3,"column":360}},"5":{"start":{"line":3,"column":361},"end":{"line":3,"column":703}},"6":{"start":{"line":3,"column":433},"end":{"line":3,"column":525}},"7":{"start":{"line":3,"column":449},"end":{"line":3,"column":462}},"8":{"start":{"line":3,"column":475},"end":{"line":3,"column":485}},"9":{"start":{"line":3,"column":503},"end":{"line":3,"column":517}},"10":{"start":{"line":3,"column":517},"end":{"line":3,"column":524}},"11":{"start":{"line":3,"column":525},"end":{"line":3,"column":679}},"12":{"start":{"line":3,"column":541},"end":{"line":3,"column":556}},"13":{"start":{"line":3,"column":564},"end":{"line":3,"column":678}},"14":{"start":{"line":3,"column":617},"end":{"line":3,"column":637}},"15":{"start":{"line":3,"column":656},"end":{"line":3,"column":675}},"16":{"start":{"line":3,"column":680},"end":{"line":3,"column":700}},"17":{"start":{"line":5,"column":53},"end":{"line":13,"column":1}},"18":{"start":{"line":7,"column":54},"end":{"line":7,"column":105}},"19":{"start":{"line":9,"column":1},"end":{"line":9,"column":749}},"20":{"start":{"line":9,"column":113},"end":{"line":9,"column":679}},"21":{"start":{"line":9,"column":680},"end":{"line":9,"column":744}},"22":{"start":{"line":9,"column":707},"end":{"line":9,"column":742}},"23":{"start":{"line":11,"column":1},"end":{"line":11,"column":31}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":3,"column":189},"end":{"line":3,"column":211}},"loc":{"start":{"line":3,"column":217},"end":{"line":3,"column":273}},"line":3},"1":{"name":"_asyncToGenerator","decl":{"start":{"line":3,"column":282},"end":{"line":3,"column":299}},"loc":{"start":{"line":3,"column":304},"end":{"line":3,"column":706}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":312},"end":{"line":3,"column":313}},"loc":{"start":{"line":3,"column":324},"end":{"line":3,"column":704}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":3,"column":380},"end":{"line":3,"column":381}},"loc":{"start":{"line":3,"column":407},"end":{"line":3,"column":701}},"line":3},"4":{"name":"step","decl":{"start":{"line":3,"column":417},"end":{"line":3,"column":421}},"loc":{"start":{"line":3,"column":432},"end":{"line":3,"column":680}},"line":3},"5":{"name":"(anonymous_5)","decl":{"start":{"line":3,"column":599},"end":{"line":3,"column":600}},"loc":{"start":{"line":3,"column":616},"end":{"line":3,"column":638}},"line":3},"6":{"name":"(anonymous_6)","decl":{"start":{"line":3,"column":640},"end":{"line":3,"column":641}},"loc":{"start":{"line":3,"column":655},"end":{"line":3,"column":676}},"line":3},"7":{"name":"bookTransactionsRouter","decl":{"start":{"line":5,"column":119},"end":{"line":5,"column":141}},"loc":{"start":{"line":5,"column":144},"end":{"line":13,"column":1}},"line":5},"8":{"name":"(anonymous_8)","decl":{"start":{"line":9,"column":89},"end":{"line":9,"column":90}},"loc":{"start":{"line":9,"column":101},"end":{"line":9,"column":745}},"line":9},"9":{"name":"_callee","decl":{"start":{"line":9,"column":202},"end":{"line":9,"column":209}},"loc":{"start":{"line":9,"column":244},"end":{"line":9,"column":677}},"line":9},"10":{"name":"(anonymous_10)","decl":{"start":{"line":9,"column":687},"end":{"line":9,"column":688}},"loc":{"start":{"line":9,"column":706},"end":{"line":9,"column":743}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":225},"end":{"line":3,"column":271}},"type":"cond-expr","locations":[{"start":{"line":3,"column":249},"end":{"line":3,"column":252}},{"start":{"line":3,"column":255},"end":{"line":3,"column":271}}],"line":3},"1":{"loc":{"start":{"line":3,"column":225},"end":{"line":3,"column":246}},"type":"binary-expr","locations":[{"start":{"line":3,"column":225},"end":{"line":3,"column":228}},{"start":{"line":3,"column":232},"end":{"line":3,"column":246}}],"line":3},"2":{"loc":{"start":{"line":3,"column":525},"end":{"line":3,"column":679}},"type":"if","locations":[{"start":{"line":3,"column":525},"end":{"line":3,"column":679}},{"start":{"line":3,"column":525},"end":{"line":3,"column":679}}],"line":3}},"s":{"0":3,"1":3,"2":6,"3":3,"4":13,"5":13,"6":13,"7":13,"8":13,"9":0,"10":0,"11":13,"12":13,"13":0,"14":0,"15":0,"16":13,"17":3,"18":3,"19":3,"20":3,"21":3,"22":13,"23":3},"f":{"0":6,"1":3,"2":13,"3":13,"4":13,"5":0,"6":0,"7":3,"8":3,"9":13,"10":13},"b":{"0":[3,3],"1":[6,6],"2":[13,0]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"40353178514611080650fe91a2be3575550fde32","code":["import express from 'express';","import { requestHandler } from '../middleware/handlers.js';","import BookTransactions from '../logic/bookTransactions.js';","","export const bookTransactionsRouter = () => {","","\tconst bookTransactionsRouter = express.Router();","","\tbookTransactionsRouter.post   ('/members/:memberId/books/:bookId',              async (req, res) => requestHandler(req, res, BookTransactions.handleBookTransactions));","","\treturn bookTransactionsRouter;","","};",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/bookTransactions.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/logic/bookTransactions.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":118},"end":{"line":1,"column":647}},"2":{"start":{"line":1,"column":173},"end":{"line":1,"column":438}},"3":{"start":{"line":1,"column":230},"end":{"line":1,"column":238}},"4":{"start":{"line":1,"column":239},"end":{"line":1,"column":294}},"5":{"start":{"line":1,"column":294},"end":{"line":1,"column":325}},"6":{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},"7":{"start":{"line":1,"column":352},"end":{"line":1,"column":379}},"8":{"start":{"line":1,"column":379},"end":{"line":1,"column":437}},"9":{"start":{"line":1,"column":439},"end":{"line":1,"column":644}},"10":{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},"11":{"start":{"line":1,"column":511},"end":{"line":1,"column":563}},"12":{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},"13":{"start":{"line":1,"column":580},"end":{"line":1,"column":623}},"14":{"start":{"line":1,"column":623},"end":{"line":1,"column":642}},"15":{"start":{"line":5,"column":170},"end":{"line":5,"column":224}},"16":{"start":{"line":5,"column":268},"end":{"line":5,"column":415}},"17":{"start":{"line":5,"column":285},"end":{"line":5,"column":389}},"18":{"start":{"line":5,"column":397},"end":{"line":5,"column":414}},"19":{"start":{"line":5,"column":415},"end":{"line":5,"column":426}},"20":{"start":{"line":5,"column":459},"end":{"line":5,"column":859}},"21":{"start":{"line":5,"column":489},"end":{"line":5,"column":514}},"22":{"start":{"line":5,"column":515},"end":{"line":5,"column":857}},"23":{"start":{"line":5,"column":587},"end":{"line":5,"column":679}},"24":{"start":{"line":5,"column":603},"end":{"line":5,"column":616}},"25":{"start":{"line":5,"column":629},"end":{"line":5,"column":639}},"26":{"start":{"line":5,"column":657},"end":{"line":5,"column":671}},"27":{"start":{"line":5,"column":671},"end":{"line":5,"column":678}},"28":{"start":{"line":5,"column":679},"end":{"line":5,"column":833}},"29":{"start":{"line":5,"column":695},"end":{"line":5,"column":710}},"30":{"start":{"line":5,"column":718},"end":{"line":5,"column":832}},"31":{"start":{"line":5,"column":771},"end":{"line":5,"column":791}},"32":{"start":{"line":5,"column":810},"end":{"line":5,"column":829}},"33":{"start":{"line":5,"column":834},"end":{"line":5,"column":854}},"34":{"start":{"line":5,"column":909},"end":{"line":5,"column":1008}},"35":{"start":{"line":5,"column":950},"end":{"line":5,"column":1007}},"36":{"start":{"line":7,"column":19},"end":{"line":191,"column":328}},"37":{"start":{"line":10,"column":2},"end":{"line":10,"column":47}},"38":{"start":{"line":11,"column":2},"end":{"line":11,"column":47}},"39":{"start":{"line":12,"column":2},"end":{"line":12,"column":71}},"40":{"start":{"line":13,"column":2},"end":{"line":191,"column":301}},"41":{"start":{"line":13,"column":86},"end":{"line":89,"column":163}},"42":{"start":{"line":15,"column":70},"end":{"line":89,"column":160}},"43":{"start":{"line":15,"column":130},"end":{"line":89,"column":130}},"44":{"start":{"line":15,"column":141},"end":{"line":89,"column":129}},"45":{"start":{"line":17,"column":8},"end":{"line":17,"column":35}},"46":{"start":{"line":18,"column":8},"end":{"line":18,"column":39}},"47":{"start":{"line":18,"column":39},"end":{"line":18,"column":57}},"48":{"start":{"line":18,"column":57},"end":{"line":23,"column":160}},"49":{"start":{"line":23,"column":167},"end":{"line":23,"column":198}},"50":{"start":{"line":23,"column":198},"end":{"line":27,"column":50}},"51":{"start":{"line":27,"column":25},"end":{"line":27,"column":43}},"52":{"start":{"line":27,"column":43},"end":{"line":27,"column":49}},"53":{"start":{"line":27,"column":50},"end":{"line":30,"column":122}},"54":{"start":{"line":30,"column":129},"end":{"line":30,"column":148}},"55":{"start":{"line":30,"column":148},"end":{"line":34,"column":104}},"56":{"start":{"line":34,"column":112},"end":{"line":34,"column":145}},"57":{"start":{"line":34,"column":145},"end":{"line":36,"column":63}},"58":{"start":{"line":36,"column":37},"end":{"line":36,"column":56}},"59":{"start":{"line":36,"column":56},"end":{"line":36,"column":62}},"60":{"start":{"line":36,"column":63},"end":{"line":36,"column":82}},"61":{"start":{"line":36,"column":82},"end":{"line":36,"column":101}},"62":{"start":{"line":36,"column":101},"end":{"line":43,"column":152}},"63":{"start":{"line":43,"column":160},"end":{"line":43,"column":181}},"64":{"start":{"line":43,"column":181},"end":{"line":43,"column":200}},"65":{"start":{"line":43,"column":200},"end":{"line":51,"column":28}},"66":{"start":{"line":51,"column":36},"end":{"line":51,"column":55}},"67":{"start":{"line":51,"column":55},"end":{"line":59,"column":30}},"68":{"start":{"line":59,"column":38},"end":{"line":65,"column":75}},"69":{"start":{"line":65,"column":83},"end":{"line":65,"column":102}},"70":{"start":{"line":65,"column":102},"end":{"line":65,"column":138}},"71":{"start":{"line":71,"column":118},"end":{"line":75,"column":55}},"72":{"start":{"line":75,"column":63},"end":{"line":75,"column":82}},"73":{"start":{"line":75,"column":82},"end":{"line":75,"column":88}},"74":{"start":{"line":75,"column":96},"end":{"line":80,"column":64}},"75":{"start":{"line":80,"column":38},"end":{"line":80,"column":57}},"76":{"start":{"line":80,"column":57},"end":{"line":80,"column":63}},"77":{"start":{"line":80,"column":64},"end":{"line":83,"column":64}},"78":{"start":{"line":83,"column":72},"end":{"line":89,"column":86}},"79":{"start":{"line":89,"column":105},"end":{"line":89,"column":128}},"80":{"start":{"line":89,"column":189},"end":{"line":89,"column":224}},"81":{"start":{"line":89,"column":225},"end":{"line":89,"column":243}},"82":{"start":{"line":89,"column":303},"end":{"line":165,"column":134}},"83":{"start":{"line":95,"column":52},"end":{"line":165,"column":131}},"84":{"start":{"line":95,"column":114},"end":{"line":165,"column":101}},"85":{"start":{"line":95,"column":125},"end":{"line":165,"column":100}},"86":{"start":{"line":97,"column":8},"end":{"line":97,"column":35}},"87":{"start":{"line":98,"column":8},"end":{"line":98,"column":39}},"88":{"start":{"line":98,"column":39},"end":{"line":98,"column":58}},"89":{"start":{"line":98,"column":58},"end":{"line":98,"column":77}},"90":{"start":{"line":98,"column":77},"end":{"line":105,"column":152}},"91":{"start":{"line":105,"column":159},"end":{"line":105,"column":181}},"92":{"start":{"line":105,"column":181},"end":{"line":105,"column":200}},"93":{"start":{"line":105,"column":200},"end":{"line":112,"column":159}},"94":{"start":{"line":112,"column":166},"end":{"line":112,"column":198}},"95":{"start":{"line":112,"column":198},"end":{"line":116,"column":52}},"96":{"start":{"line":116,"column":25},"end":{"line":116,"column":45}},"97":{"start":{"line":116,"column":45},"end":{"line":116,"column":51}},"98":{"start":{"line":116,"column":52},"end":{"line":119,"column":119}},"99":{"start":{"line":119,"column":127},"end":{"line":123,"column":42}},"100":{"start":{"line":123,"column":15},"end":{"line":123,"column":35}},"101":{"start":{"line":123,"column":35},"end":{"line":123,"column":41}},"102":{"start":{"line":123,"column":42},"end":{"line":126,"column":67}},"103":{"start":{"line":126,"column":75},"end":{"line":130,"column":74}},"104":{"start":{"line":130,"column":47},"end":{"line":130,"column":67}},"105":{"start":{"line":130,"column":67},"end":{"line":130,"column":73}},"106":{"start":{"line":130,"column":74},"end":{"line":133,"column":77}},"107":{"start":{"line":133,"column":85},"end":{"line":133,"column":105}},"108":{"start":{"line":133,"column":105},"end":{"line":141,"column":28}},"109":{"start":{"line":141,"column":36},"end":{"line":141,"column":56}},"110":{"start":{"line":141,"column":56},"end":{"line":149,"column":30}},"111":{"start":{"line":149,"column":38},"end":{"line":155,"column":65}},"112":{"start":{"line":155,"column":73},"end":{"line":155,"column":93}},"113":{"start":{"line":155,"column":93},"end":{"line":155,"column":130}},"114":{"start":{"line":161,"column":119},"end":{"line":165,"column":56}},"115":{"start":{"line":165,"column":75},"end":{"line":165,"column":99}},"116":{"start":{"line":165,"column":161},"end":{"line":165,"column":197}},"117":{"start":{"line":165,"column":198},"end":{"line":165,"column":216}},"118":{"start":{"line":165,"column":288},"end":{"line":191,"column":187}},"119":{"start":{"line":171,"column":31},"end":{"line":191,"column":184}},"120":{"start":{"line":171,"column":93},"end":{"line":191,"column":165}},"121":{"start":{"line":171,"column":104},"end":{"line":191,"column":164}},"122":{"start":{"line":173,"column":8},"end":{"line":173,"column":35}},"123":{"start":{"line":173,"column":35},"end":{"line":175,"column":75}},"124":{"start":{"line":175,"column":49},"end":{"line":175,"column":68}},"125":{"start":{"line":175,"column":68},"end":{"line":175,"column":74}},"126":{"start":{"line":175,"column":75},"end":{"line":175,"column":94}},"127":{"start":{"line":175,"column":94},"end":{"line":177,"column":31}},"128":{"start":{"line":177,"column":38},"end":{"line":177,"column":73}},"129":{"start":{"line":177,"column":73},"end":{"line":178,"column":27}},"130":{"start":{"line":178,"column":34},"end":{"line":181,"column":76}},"131":{"start":{"line":181,"column":49},"end":{"line":181,"column":69}},"132":{"start":{"line":181,"column":69},"end":{"line":181,"column":75}},"133":{"start":{"line":181,"column":76},"end":{"line":181,"column":96}},"134":{"start":{"line":181,"column":96},"end":{"line":183,"column":31}},"135":{"start":{"line":183,"column":39},"end":{"line":183,"column":74}},"136":{"start":{"line":183,"column":74},"end":{"line":184,"column":27}},"137":{"start":{"line":184,"column":35},"end":{"line":191,"column":120}},"138":{"start":{"line":191,"column":139},"end":{"line":191,"column":163}},"139":{"start":{"line":191,"column":226},"end":{"line":191,"column":262}},"140":{"start":{"line":191,"column":263},"end":{"line":191,"column":293}},"141":{"start":{"line":191,"column":301},"end":{"line":191,"column":325}},"142":{"start":{"line":198,"column":31},"end":{"line":198,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":1,"column":118},"end":{"line":1,"column":119}},"loc":{"start":{"line":1,"column":130},"end":{"line":1,"column":645}},"line":1},"1":{"name":"defineProperties","decl":{"start":{"line":1,"column":140},"end":{"line":1,"column":156}},"loc":{"start":{"line":1,"column":172},"end":{"line":1,"column":439}},"line":1},"2":{"name":"(anonymous_2)","decl":{"start":{"line":1,"column":446},"end":{"line":1,"column":447}},"loc":{"start":{"line":1,"column":494},"end":{"line":1,"column":643}},"line":1},"3":{"name":"_interopRequireDefault","decl":{"start":{"line":5,"column":141},"end":{"line":5,"column":163}},"loc":{"start":{"line":5,"column":169},"end":{"line":5,"column":225}},"line":5},"4":{"name":"_defineProperty","decl":{"start":{"line":5,"column":234},"end":{"line":5,"column":249}},"loc":{"start":{"line":5,"column":267},"end":{"line":5,"column":427}},"line":5},"5":{"name":"_asyncToGenerator","decl":{"start":{"line":5,"column":436},"end":{"line":5,"column":453}},"loc":{"start":{"line":5,"column":458},"end":{"line":5,"column":860}},"line":5},"6":{"name":"(anonymous_6)","decl":{"start":{"line":5,"column":466},"end":{"line":5,"column":467}},"loc":{"start":{"line":5,"column":478},"end":{"line":5,"column":858}},"line":5},"7":{"name":"(anonymous_7)","decl":{"start":{"line":5,"column":534},"end":{"line":5,"column":535}},"loc":{"start":{"line":5,"column":561},"end":{"line":5,"column":855}},"line":5},"8":{"name":"step","decl":{"start":{"line":5,"column":571},"end":{"line":5,"column":575}},"loc":{"start":{"line":5,"column":586},"end":{"line":5,"column":834}},"line":5},"9":{"name":"(anonymous_9)","decl":{"start":{"line":5,"column":753},"end":{"line":5,"column":754}},"loc":{"start":{"line":5,"column":770},"end":{"line":5,"column":792}},"line":5},"10":{"name":"(anonymous_10)","decl":{"start":{"line":5,"column":794},"end":{"line":5,"column":795}},"loc":{"start":{"line":5,"column":809},"end":{"line":5,"column":830}},"line":5},"11":{"name":"_classCallCheck","decl":{"start":{"line":5,"column":869},"end":{"line":5,"column":884}},"loc":{"start":{"line":5,"column":908},"end":{"line":5,"column":1009}},"line":5},"12":{"name":"(anonymous_12)","decl":{"start":{"line":7,"column":19},"end":{"line":7,"column":20}},"loc":{"start":{"line":7,"column":31},"end":{"line":191,"column":326}},"line":7},"13":{"name":"BookTransactions","decl":{"start":{"line":9,"column":34},"end":{"line":9,"column":50}},"loc":{"start":{"line":9,"column":53},"end":{"line":13,"column":2}},"line":9},"14":{"name":"(anonymous_14)","decl":{"start":{"line":13,"column":62},"end":{"line":13,"column":63}},"loc":{"start":{"line":13,"column":74},"end":{"line":89,"column":244}},"line":13},"15":{"name":"_callee","decl":{"start":{"line":13,"column":151},"end":{"line":13,"column":158}},"loc":{"start":{"line":15,"column":8},"end":{"line":89,"column":161}},"line":15},"16":{"name":"_callee$","decl":{"start":{"line":15,"column":110},"end":{"line":15,"column":118}},"loc":{"start":{"line":15,"column":129},"end":{"line":89,"column":131}},"line":15},"17":{"name":"borrowBook","decl":{"start":{"line":89,"column":173},"end":{"line":89,"column":183}},"loc":{"start":{"line":89,"column":188},"end":{"line":89,"column":225}},"line":89},"18":{"name":"(anonymous_18)","decl":{"start":{"line":89,"column":278},"end":{"line":89,"column":279}},"loc":{"start":{"line":89,"column":290},"end":{"line":165,"column":217}},"line":89},"19":{"name":"_callee2","decl":{"start":{"line":89,"column":368},"end":{"line":89,"column":376}},"loc":{"start":{"line":95,"column":8},"end":{"line":165,"column":132}},"line":95},"20":{"name":"_callee2$","decl":{"start":{"line":95,"column":92},"end":{"line":95,"column":101}},"loc":{"start":{"line":95,"column":113},"end":{"line":165,"column":102}},"line":95},"21":{"name":"returnBook","decl":{"start":{"line":165,"column":144},"end":{"line":165,"column":154}},"loc":{"start":{"line":165,"column":160},"end":{"line":165,"column":198}},"line":165},"22":{"name":"(anonymous_22)","decl":{"start":{"line":165,"column":263},"end":{"line":165,"column":264}},"loc":{"start":{"line":165,"column":275},"end":{"line":191,"column":294}},"line":165},"23":{"name":"_callee3","decl":{"start":{"line":165,"column":353},"end":{"line":165,"column":361}},"loc":{"start":{"line":171,"column":8},"end":{"line":191,"column":185}},"line":171},"24":{"name":"_callee3$","decl":{"start":{"line":171,"column":71},"end":{"line":171,"column":80}},"loc":{"start":{"line":171,"column":92},"end":{"line":191,"column":166}},"line":171},"25":{"name":"handleBookTransactions","decl":{"start":{"line":191,"column":197},"end":{"line":191,"column":219}},"loc":{"start":{"line":191,"column":225},"end":{"line":191,"column":263}},"line":191}},"branchMap":{"0":{"loc":{"start":{"line":1,"column":263},"end":{"line":1,"column":293}},"type":"binary-expr","locations":[{"start":{"line":1,"column":263},"end":{"line":1,"column":284}},{"start":{"line":1,"column":288},"end":{"line":1,"column":293}}],"line":1},"1":{"loc":{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},"type":"if","locations":[{"start":{"line":1,"column":325},"end":{"line":1,"column":379}},{"start":{"line":1,"column":325},"end":{"line":1,"column":379}}],"line":1},"2":{"loc":{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},"type":"if","locations":[{"start":{"line":1,"column":495},"end":{"line":1,"column":563}},{"start":{"line":1,"column":495},"end":{"line":1,"column":563}}],"line":1},"3":{"loc":{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},"type":"if","locations":[{"start":{"line":1,"column":563},"end":{"line":1,"column":623}},{"start":{"line":1,"column":563},"end":{"line":1,"column":623}}],"line":1},"4":{"loc":{"start":{"line":5,"column":177},"end":{"line":5,"column":223}},"type":"cond-expr","locations":[{"start":{"line":5,"column":201},"end":{"line":5,"column":204}},{"start":{"line":5,"column":207},"end":{"line":5,"column":223}}],"line":5},"5":{"loc":{"start":{"line":5,"column":177},"end":{"line":5,"column":198}},"type":"binary-expr","locations":[{"start":{"line":5,"column":177},"end":{"line":5,"column":180}},{"start":{"line":5,"column":184},"end":{"line":5,"column":198}}],"line":5},"6":{"loc":{"start":{"line":5,"column":268},"end":{"line":5,"column":415}},"type":"if","locations":[{"start":{"line":5,"column":268},"end":{"line":5,"column":415}},{"start":{"line":5,"column":268},"end":{"line":5,"column":415}}],"line":5},"7":{"loc":{"start":{"line":5,"column":679},"end":{"line":5,"column":833}},"type":"if","locations":[{"start":{"line":5,"column":679},"end":{"line":5,"column":833}},{"start":{"line":5,"column":679},"end":{"line":5,"column":833}}],"line":5},"8":{"loc":{"start":{"line":5,"column":909},"end":{"line":5,"column":1008}},"type":"if","locations":[{"start":{"line":5,"column":909},"end":{"line":5,"column":1008}},{"start":{"line":5,"column":909},"end":{"line":5,"column":1008}}],"line":5},"9":{"loc":{"start":{"line":15,"column":141},"end":{"line":89,"column":129}},"type":"switch","locations":[{"start":{"line":15,"column":181},"end":{"line":23,"column":160}},{"start":{"line":23,"column":160},"end":{"line":30,"column":122}},{"start":{"line":30,"column":122},"end":{"line":34,"column":104}},{"start":{"line":34,"column":104},"end":{"line":43,"column":152}},{"start":{"line":43,"column":152},"end":{"line":51,"column":28}},{"start":{"line":51,"column":28},"end":{"line":59,"column":30}},{"start":{"line":59,"column":30},"end":{"line":65,"column":75}},{"start":{"line":65,"column":75},"end":{"line":75,"column":55}},{"start":{"line":75,"column":55},"end":{"line":75,"column":88}},{"start":{"line":75,"column":88},"end":{"line":83,"column":64}},{"start":{"line":83,"column":64},"end":{"line":89,"column":86}},{"start":{"line":89,"column":86},"end":{"line":89,"column":94}},{"start":{"line":89,"column":94},"end":{"line":89,"column":128}}],"line":15},"10":{"loc":{"start":{"line":23,"column":198},"end":{"line":27,"column":50}},"type":"if","locations":[{"start":{"line":23,"column":198},"end":{"line":27,"column":50}},{"start":{"line":23,"column":198},"end":{"line":27,"column":50}}],"line":23},"11":{"loc":{"start":{"line":34,"column":145},"end":{"line":36,"column":63}},"type":"if","locations":[{"start":{"line":34,"column":145},"end":{"line":36,"column":63}},{"start":{"line":34,"column":145},"end":{"line":36,"column":63}}],"line":34},"12":{"loc":{"start":{"line":75,"column":96},"end":{"line":80,"column":64}},"type":"if","locations":[{"start":{"line":75,"column":96},"end":{"line":80,"column":64}},{"start":{"line":75,"column":96},"end":{"line":80,"column":64}}],"line":75},"13":{"loc":{"start":{"line":95,"column":125},"end":{"line":165,"column":100}},"type":"switch","locations":[{"start":{"line":95,"column":167},"end":{"line":105,"column":152}},{"start":{"line":105,"column":152},"end":{"line":112,"column":159}},{"start":{"line":112,"column":159},"end":{"line":119,"column":119}},{"start":{"line":119,"column":119},"end":{"line":126,"column":67}},{"start":{"line":126,"column":67},"end":{"line":133,"column":77}},{"start":{"line":133,"column":77},"end":{"line":141,"column":28}},{"start":{"line":141,"column":28},"end":{"line":149,"column":30}},{"start":{"line":149,"column":30},"end":{"line":155,"column":65}},{"start":{"line":155,"column":65},"end":{"line":165,"column":56}},{"start":{"line":165,"column":56},"end":{"line":165,"column":64}},{"start":{"line":165,"column":64},"end":{"line":165,"column":99}}],"line":95},"14":{"loc":{"start":{"line":112,"column":198},"end":{"line":116,"column":52}},"type":"if","locations":[{"start":{"line":112,"column":198},"end":{"line":116,"column":52}},{"start":{"line":112,"column":198},"end":{"line":116,"column":52}}],"line":112},"15":{"loc":{"start":{"line":119,"column":127},"end":{"line":123,"column":42}},"type":"if","locations":[{"start":{"line":119,"column":127},"end":{"line":123,"column":42}},{"start":{"line":119,"column":127},"end":{"line":123,"column":42}}],"line":119},"16":{"loc":{"start":{"line":126,"column":75},"end":{"line":130,"column":74}},"type":"if","locations":[{"start":{"line":126,"column":75},"end":{"line":130,"column":74}},{"start":{"line":126,"column":75},"end":{"line":130,"column":74}}],"line":126},"17":{"loc":{"start":{"line":171,"column":104},"end":{"line":191,"column":164}},"type":"switch","locations":[{"start":{"line":171,"column":146},"end":{"line":177,"column":31}},{"start":{"line":177,"column":31},"end":{"line":178,"column":27}},{"start":{"line":178,"column":27},"end":{"line":183,"column":31}},{"start":{"line":183,"column":31},"end":{"line":184,"column":27}},{"start":{"line":184,"column":27},"end":{"line":191,"column":120}},{"start":{"line":191,"column":120},"end":{"line":191,"column":128}},{"start":{"line":191,"column":128},"end":{"line":191,"column":163}}],"line":171},"18":{"loc":{"start":{"line":173,"column":35},"end":{"line":175,"column":75}},"type":"if","locations":[{"start":{"line":173,"column":35},"end":{"line":175,"column":75}},{"start":{"line":173,"column":35},"end":{"line":175,"column":75}}],"line":173},"19":{"loc":{"start":{"line":178,"column":34},"end":{"line":181,"column":76}},"type":"if","locations":[{"start":{"line":178,"column":34},"end":{"line":181,"column":76}},{"start":{"line":178,"column":34},"end":{"line":181,"column":76}}],"line":178}},"s":{"0":3,"1":3,"2":3,"3":9,"4":9,"5":9,"6":9,"7":9,"8":9,"9":3,"10":3,"11":3,"12":3,"13":0,"14":3,"15":12,"16":21,"17":0,"18":21,"19":21,"20":9,"21":25,"22":25,"23":71,"24":71,"25":71,"26":0,"27":0,"28":71,"29":25,"30":46,"31":46,"32":0,"33":25,"34":3,"35":0,"36":3,"37":3,"38":3,"39":3,"40":3,"41":3,"42":6,"43":31,"44":39,"45":6,"46":6,"47":6,"48":6,"49":6,"50":6,"51":5,"52":5,"53":1,"54":5,"55":5,"56":5,"57":5,"58":2,"59":2,"60":3,"61":3,"62":3,"63":3,"64":3,"65":3,"66":2,"67":2,"68":2,"69":1,"70":1,"71":1,"72":0,"73":0,"74":2,"75":1,"76":1,"77":1,"78":1,"79":6,"80":6,"81":3,"82":3,"83":6,"84":29,"85":41,"86":6,"87":6,"88":6,"89":6,"90":6,"91":6,"92":6,"93":6,"94":6,"95":6,"96":5,"97":5,"98":1,"99":5,"100":4,"101":4,"102":1,"103":4,"104":3,"105":3,"106":1,"107":3,"108":3,"109":2,"110":2,"111":2,"112":1,"113":1,"114":1,"115":6,"116":6,"117":3,"118":3,"119":13,"120":38,"121":46,"122":13,"123":13,"124":7,"125":7,"126":6,"127":6,"128":6,"129":6,"130":7,"131":1,"132":1,"133":6,"134":6,"135":6,"136":6,"137":1,"138":13,"139":13,"140":3,"141":3,"142":3},"f":{"0":3,"1":3,"2":3,"3":12,"4":21,"5":9,"6":25,"7":25,"8":71,"9":46,"10":0,"11":3,"12":3,"13":3,"14":3,"15":6,"16":31,"17":6,"18":3,"19":6,"20":29,"21":6,"22":3,"23":13,"24":38,"25":13},"b":{"0":[9,9],"1":[9,0],"2":[3,0],"3":[0,3],"4":[6,6],"5":[12,12],"6":[0,21],"7":[25,46],"8":[0,3],"9":[6,6,5,5,3,2,2,1,0,2,1,0,6],"10":[5,1],"11":[2,3],"12":[1,1],"13":[6,6,6,5,4,3,2,2,1,0,6],"14":[5,1],"15":[4,1],"16":[3,1],"17":[13,6,7,6,1,0,13],"18":[7,6],"19":[1,6]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"64efe13713e22971ed537952d84105e950e3f11c","code":["import Sequelize from 'sequelize';","import { db } from '../db/db.js';","import logger from '../logger.js';","import HttpStatus from 'http-status-codes';","import BookFunctions from '../logic/book.js';","","class BookTransactions {","","\tconstructor () {","\t\tthis.borrowBook = this.borrowBook.bind(this);","\t\tthis.returnBook = this.returnBook.bind(this);","\t\tthis.handleBookTransactions = this.handleBookTransactions.bind(this);","\t}","","\tasync borrowBook (req) {","","\t\tconst bookId = req.params.bookId;","\t\tconst memberId = req.params.memberId;","","\t\tconst existingMember = await db.member.findOne({","\t\t\twhere: {","\t\t\t\tid: memberId,","\t\t\t\tunRegisteredYN: { [Sequelize.Op.eq]: false },","\t\t\t},","\t\t});","","\t\tif (!existingMember) {","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.UNAUTHORIZED,","\t\t\t\tresult: `You must be a registered member to borrow this book. Please register first.`,","\t\t\t};","\t\t}","\t\telse {","\t\t\tconst bookAvailability = await BookFunctions.checkBookAvailability(bookId);","","\t\t\tif (bookAvailability === true) {","","\t\t\t\ttry {","","\t\t\t\t\tconst book = await db.book.findOne({","\t\t\t\t\t\twhere: {","\t\t\t\t\t\t\tid: bookId,","\t\t\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t\t\t},","\t\t\t\t\t});","","\t\t\t\t\tawait db.book.update({","\t\t\t\t\t\tnoOfBooksAvailable: book.noOfBooksAvailable - 1,","\t\t\t\t\t}, {","\t\t\t\t\t\twhere: {","\t\t\t\t\t\t\tid: bookId,","\t\t\t\t\t\t},","\t\t\t\t\t});","","\t\t\t\t\tawait db.member.update({","\t\t\t\t\t\tnoOfBooksTaken: existingMember.noOfBooksTaken + 1,","\t\t\t\t\t}, {","\t\t\t\t\t\twhere: {","\t\t\t\t\t\t\tid: memberId,","\t\t\t\t\t\t},","\t\t\t\t\t});","","\t\t\t\t\treturn {","\t\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\t\tresult: 'One copy of the requested book has been lent to you.',","\t\t\t\t\t};","","\t\t\t\t}","\t\t\t\tcatch (error) {","","\t\t\t\t\tlogger.error(error);","\t\t\t\t\treturn {","\t\t\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\t\t\tresult: 'Unable to lend this book at the moment due to technical issues.',","\t\t\t\t\t\terror,","\t\t\t\t\t};","","\t\t\t\t}","\t\t\t}","\t\t\telse if (bookAvailability === false) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\t\tresult: 'This book is not available at the moment.',","\t\t\t\t};","\t\t\t}","\t\t\telse {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\t\tresult: 'Unable to lend this book at the moment due to technical issues.',","\t\t\t\t};","\t\t\t}","\t\t}","\t}","","\tasync returnBook (req) {","","\t\tconst bookId = req.params.bookId;","\t\tconst memberId = req.params.memberId;","","\t\ttry {","","\t\t\tconst book = await db.book.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: bookId,","\t\t\t\t\tdeleted: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tconst existingMember = await db.member.findOne({","\t\t\t\twhere: {","\t\t\t\t\tid: memberId,","\t\t\t\t\tunRegisteredYN: { [Sequelize.Op.ne]: true },","\t\t\t\t},","\t\t\t});","","\t\t\tif (!existingMember) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.UNAUTHORIZED,","\t\t\t\t\tresult: `You must be a registered member to return a book. Please register first.`,","\t\t\t\t};","\t\t\t}","","\t\t\tif (!book) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\t\tresult: 'We did not lend you this book. Please check.',","\t\t\t\t};","\t\t\t}","","\t\t\tif (existingMember.noOfBooksTaken === 0) {","\t\t\t\treturn {","\t\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\t\tresult: 'You\\'ve returned all your books already. Please check.',","\t\t\t\t};","\t\t\t}","","\t\t\tawait db.book.update({","\t\t\t\tnoOfBooksAvailable: book.noOfBooksAvailable + 1,","\t\t\t}, {","\t\t\t\twhere: {","\t\t\t\t\tid: bookId,","\t\t\t\t},","\t\t\t});","","\t\t\tawait db.member.update({","\t\t\t\tnoOfBooksTaken: existingMember.noOfBooksTaken - 1,","\t\t\t}, {","\t\t\t\twhere: {","\t\t\t\t\tid: memberId,","\t\t\t\t},","\t\t\t});","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.OK,","\t\t\t\tresult: 'The return of your book has been accepted.',","\t\t\t};","","\t\t}","\t\tcatch (error) {","","\t\t\tlogger.error(error);","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.INTERNAL_SERVER_ERROR,","\t\t\t\tresult: 'Unable to accept this book at the moment due to technical issues.',","\t\t\t\terror,","\t\t\t};","","\t\t}","\t}","","\tasync handleBookTransactions (req) {","","\t\tlet transactionResult;","","\t\tif (req.body.transactionType === 'BORROW') {","","\t\t\ttransactionResult = await this.borrowBook(req);","\t\t\treturn transactionResult;","","\t\t}","\t\telse if (req.body.transactionType === 'RETURN') {","","\t\t\ttransactionResult = await this.returnBook(req);","\t\t\treturn transactionResult;","","\t\t}","\t\telse {","","\t\t\treturn {","\t\t\t\tstatus: HttpStatus.BAD_REQUEST,","\t\t\t\tresult: 'Missing or invalid transaction type. Specify either BORROW or RETURN as type. Should be a string.',","\t\t\t};","","\t\t}","\t}","}","","const bookTransactionsInstance = new BookTransactions();","","export default bookTransactionsInstance;",""]},"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/tests/testdata/populateDb.js":{"path":"/Users/nvaithyanathan/Desktop/Node/library-application/library-app/tests/testdata/populateDb.js","statementMap":{"0":{"start":{"line":1,"column":37},"end":{"line":1,"column":99}},"1":{"start":{"line":1,"column":99},"end":{"line":1,"column":164}},"2":{"start":{"line":3,"column":38},"end":{"line":8,"column":26}},"3":{"start":{"line":12,"column":36},"end":{"line":27,"column":25}},"4":{"start":{"line":31,"column":41},"end":{"line":48,"column":227}},"5":{"start":{"line":31,"column":86},"end":{"line":48,"column":156}},"6":{"start":{"line":48,"column":157},"end":{"line":48,"column":224}},"7":{"start":{"line":48,"column":187},"end":{"line":48,"column":222}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":31,"column":62},"end":{"line":31,"column":63}},"loc":{"start":{"line":31,"column":74},"end":{"line":48,"column":225}},"line":31},"1":{"name":"_callee","decl":{"start":{"line":31,"column":175},"end":{"line":31,"column":182}},"loc":{"start":{"line":31,"column":209},"end":{"line":48,"column":154}},"line":31},"2":{"name":"populateDb","decl":{"start":{"line":48,"column":173},"end":{"line":48,"column":183}},"loc":{"start":{"line":48,"column":186},"end":{"line":48,"column":223}},"line":48}},"branchMap":{},"s":{"0":4,"1":4,"2":4,"3":4,"4":4,"5":4,"6":4,"7":4},"f":{"0":4,"1":4,"2":4},"b":{},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"16b9ab12759158a0671d5b6f3ca7b9726b6c00f0","code":["import { db } from '../../db/db.js';","","export const members = [","\t{","\t\tusername: 'abcdef',","\t},","\t{","\t\tusername: 'qwertymnop',","\t},","];","","export const books = [","\t{","\t\tname: 'book11',","\t\tauthor: 'vaithy',","\t\tedition: '5',","\t\tshelfNumber: '5',","\t\tpublishedDate: '2017-12-02',","\t\tnoOfBooksAvailable: 1,","\t},","\t{","\t\tname: 'book22',","\t\tauthor: 'vaithy',","\t\tedition: '5',","\t\tshelfNumber: '5',","\t\tpublishedDate: '2017-12-02',","\t\tnoOfBooksAvailable: 1,","\t},","];","","export const populateDb = async () => {","","\tawait db.syncSchema();","","\tawait db.member.destroy({","\t\twhere: {},","\t\ttruncate: true,","\t});","","\tawait db.book.destroy({","\t\twhere: {},","\t\ttruncate: true,","\t});","","\tawait db.member.create(members[0]);","\tawait db.member.create(members[1]);","\tawait db.book.create(books[0]);","\tawait db.book.create(books[1]);","","};",""]}}