/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 9);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!********************!*\
  !*** ../logger.js ***!
  \********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _appFabricLogger = __webpack_require__(/*! @athena/app-fabric-logger */ 12);\n\nvar _appFabricLogger2 = _interopRequireDefault(_appFabricLogger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar logger = new _appFabricLogger2.default({\n\tprettyPrint: true,\n\tcolorize: true\n});\n\nexports.default = logger;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9sb2dnZXIuanM/N2YyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyIGZyb20gJ0BhdGhlbmEvYXBwLWZhYnJpYy1sb2dnZXInO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHtcblx0cHJldHR5UHJpbnQ6IHRydWUsXG5cdGNvbG9yaXplOiB0cnVlLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsb2dnZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"sequelize\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInNlcXVlbGl6ZVwiPzVjZDUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwic2VxdWVsaXplXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!*******************!*\
  !*** ../db/db.js ***!
  \*******************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.db = undefined;\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _book = __webpack_require__(/*! ../models/book.js */ 13);\n\nvar _book2 = _interopRequireDefault(_book);\n\nvar _member = __webpack_require__(/*! ../models/member.js */ 6);\n\nvar _member2 = _interopRequireDefault(_member);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar db = {};\n\ndb.transaction = function () {\n\tvar _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(f, username) {\n\t\treturn regeneratorRuntime.wrap(function _callee$(_context) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context.prev = _context.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t_context.next = 2;\n\t\t\t\t\t\treturn db.initializeDb();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t_context.next = 4;\n\t\t\t\t\t\treturn db.sequelize.transaction(f);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn _context.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee, undefined);\n\t}));\n\n\treturn function (_x, _x2) {\n\t\treturn _ref.apply(this, arguments);\n\t};\n}();\n\nvar initialized = false;\ndb.initializeDb = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n\tvar connectionString, sequelize;\n\treturn regeneratorRuntime.wrap(function _callee2$(_context2) {\n\t\twhile (1) {\n\t\t\tswitch (_context2.prev = _context2.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif (!initialized) {\n\t\t\t\t\t\tconnectionString = '';\n\n\t\t\t\t\t\tif (process.env.NODE_ENV === 'test') {\n\t\t\t\t\t\t\t_logger2.default.info('Connecting to test database.');\n\t\t\t\t\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library_test';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsequelize = new _sequelize2.default(connectionString, {\n\t\t\t\t\t\t\tlogging: false,\n\t\t\t\t\t\t\tquery: {\n\t\t\t\t\t\t\t\traw: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdb.member = (0, _member2.default)(sequelize);\n\t\t\t\t\t\tdb.book = (0, _book2.default)(sequelize);\n\t\t\t\t\t\tdb.sequelize = sequelize;\n\t\t\t\t\t\tinitialized = true;\n\t\t\t\t\t}\n\n\t\t\t\tcase 1:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn _context2.stop();\n\t\t\t}\n\t\t}\n\t}, _callee2, undefined);\n}));\n\ndb.syncSchema = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n\tvar force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\tvar params;\n\treturn regeneratorRuntime.wrap(function _callee3$(_context3) {\n\t\twhile (1) {\n\t\t\tswitch (_context3.prev = _context3.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_context3.prev = 0;\n\t\t\t\t\tparams = { force: force };\n\t\t\t\t\t_context3.next = 4;\n\t\t\t\t\treturn db.initializeDb();\n\n\t\t\t\tcase 4:\n\t\t\t\t\t_context3.next = 6;\n\t\t\t\t\treturn db.member.sync(params);\n\n\t\t\t\tcase 6:\n\t\t\t\t\t_context3.next = 8;\n\t\t\t\t\treturn db.book.sync(params);\n\n\t\t\t\tcase 8:\n\t\t\t\t\t_context3.next = 13;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 10:\n\t\t\t\t\t_context3.prev = 10;\n\t\t\t\t\t_context3.t0 = _context3['catch'](0);\n\n\t\t\t\t\t_logger2.default.error(_context3.t0);\n\n\t\t\t\tcase 13:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn _context3.stop();\n\t\t\t}\n\t\t}\n\t}, _callee3, undefined, [[0, 10]]);\n}));\n\nexports.db = db;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9kYi9kYi5qcz9kMWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCBib29rTW9kZWwgZnJvbSAnLi4vbW9kZWxzL2Jvb2suanMnO1xuaW1wb3J0IG1lbWJlck1vZGVsIGZyb20gJy4uL21vZGVscy9tZW1iZXIuanMnO1xuXG5jb25zdCBkYiA9IHt9O1xuXG5kYi50cmFuc2FjdGlvbiA9IGFzeW5jIChmLCB1c2VybmFtZSkgPT4ge1xuXHRhd2FpdCBkYi5pbml0aWFsaXplRGIoKTtcblx0YXdhaXQgZGIuc2VxdWVsaXplLnRyYW5zYWN0aW9uKGYpO1xufTtcblxubGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG5kYi5pbml0aWFsaXplRGIgPSBhc3luYyAoKSA9PiB7XG5cdGlmICghaW5pdGlhbGl6ZWQpIHtcblx0XHRsZXQgY29ubmVjdGlvblN0cmluZyA9ICcnO1xuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG5cdFx0XHRsb2dnZXIuaW5mbygnQ29ubmVjdGluZyB0byB0ZXN0IGRhdGFiYXNlLicpO1xuXHRcdFx0Y29ubmVjdGlvblN0cmluZyA9ICdwb3N0Z3JlczovL252YWl0aHlhbmF0aGFuOmxrYXMxMjM0UVFAbG9jYWxob3N0OjU0MzIvbGlicmFyeV90ZXN0Jztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25uZWN0aW9uU3RyaW5nID0gJ3Bvc3RncmVzOi8vbnZhaXRoeWFuYXRoYW46bGthczEyMzRRUUBsb2NhbGhvc3Q6NTQzMi9saWJyYXJ5Jztcblx0XHR9XG5cblx0XHRjb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbm5lY3Rpb25TdHJpbmcsIHtcblx0XHRcdGxvZ2dpbmc6IGZhbHNlLFxuXHRcdFx0cXVlcnk6IHtcblx0XHRcdFx0cmF3OiB0cnVlLFxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHRkYi5tZW1iZXIgPSBtZW1iZXJNb2RlbChzZXF1ZWxpemUpO1xuXHRcdGRiLmJvb2sgPSBib29rTW9kZWwoc2VxdWVsaXplKTtcblx0XHRkYi5zZXF1ZWxpemUgPSBzZXF1ZWxpemU7XG5cdFx0aW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHR9XG59O1xuXG5kYi5zeW5jU2NoZW1hID0gYXN5bmMgKGZvcmNlID0gZmFsc2UpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBwYXJhbXMgPSB7IGZvcmNlIH07XHRcblx0XHRhd2FpdCBkYi5pbml0aWFsaXplRGIoKTtcblx0XHRhd2FpdCBkYi5tZW1iZXIuc3luYyhwYXJhbXMpO1xuXHRcdGF3YWl0IGRiLmJvb2suc3luYyhwYXJhbXMpO1xuXHR9XG5cdGNhdGNoIChlKSB7XG5cdFx0bG9nZ2VyLmVycm9yKGUpO1xuXHR9XG59O1xuXG5leHBvcnQgeyBkYiB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGRiL2RiLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFPQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3NcIj9kMmQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJleHByZXNzXCJcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!*********************************!*\
  !*** ../middleware/handlers.js ***!
  \*********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.requestHandler = undefined;\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar requestHandler = exports.requestHandler = function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res, requestHandlerFunction) {\n        var result, jsonToReturn;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n                switch (_context.prev = _context.next) {\n                    case 0:\n                        result = {};\n                        _context.prev = 1;\n                        _context.next = 4;\n                        return requestHandlerFunction(req);\n\n                    case 4:\n                        result = _context.sent;\n                        _context.next = 13;\n                        break;\n\n                    case 7:\n                        _context.prev = 7;\n                        _context.t0 = _context['catch'](1);\n\n\n                        _logger2.default.error(_context.t0);\n\n                        result.status = 400;\n                        result.result = 'Unable to process your request.';\n\n                        if (_context.t0) {\n                            result.error = _context.t0.toString();\n                        }\n\n                    case 13:\n                        jsonToReturn = {};\n\n\n                        if (result.json) {\n                            jsonToReturn = result.json;\n                        } else {\n                            jsonToReturn = {\n                                result: result.result\n                            };\n\n                            if (result.error) {\n                                jsonToReturn.error = result.error.toString();\n                            }\n                        }\n                        _logger2.default.info(JSON.stringify(jsonToReturn));\n                        res.status(result.status).json(jsonToReturn);\n\n                    case 17:\n                    case 'end':\n                        return _context.stop();\n                }\n            }\n        }, _callee, undefined, [[1, 7]]);\n    }));\n\n    return function requestHandler(_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n    };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9taWRkbGV3YXJlL2hhbmRsZXJzLmpzP2UyZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXIuanMnO1xuXG5leHBvcnQgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMsIHJlcXVlc3RIYW5kbGVyRnVuY3Rpb24pID0+IHtcbiAgIFxuICAgIGxldCByZXN1bHQgPSB7fTtcblxuICAgIHRyeSB7XG5cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVxdWVzdEhhbmRsZXJGdW5jdGlvbihyZXEpO1xuXG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgXG4gICAgICAgIHJlc3VsdC5zdGF0dXMgPSA0MDA7XG4gICAgICAgIHJlc3VsdC5yZXN1bHQgPSAnVW5hYmxlIHRvIHByb2Nlc3MgeW91ciByZXF1ZXN0LidcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgXG4gICAgbGV0IGpzb25Ub1JldHVybiA9IHt9O1xuXG4gICAgaWYgKHJlc3VsdC5qc29uKSB7XG4gICAgICAgIGpzb25Ub1JldHVybiA9IHJlc3VsdC5qc29uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvblRvUmV0dXJuID0ge1xuICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQucmVzdWx0LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgIGpzb25Ub1JldHVybi5lcnJvciA9IHJlc3VsdC5lcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvZ2dlci5pbmZvKEpTT04uc3RyaW5naWZ5KGpzb25Ub1JldHVybikpO1xuICAgIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1cykuanNvbihqc29uVG9SZXR1cm4pO1xuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbWlkZGxld2FyZS9oYW5kbGVycy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTtBQXNCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!************************************!*\
  !*** external "http-status-codes" ***!
  \************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"http-status-codes\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImh0dHAtc3RhdHVzLWNvZGVzXCI/MjQ2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImh0dHAtc3RhdHVzLWNvZGVzXCJcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!***************************!*\
  !*** ../models/member.js ***!
  \***************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (sequelizeInstance) {\n    return sequelizeInstance.define('member', {\n        username: {\n            field: 'username',\n            type: _sequelize2.default.STRING(20),\n            notNull: true\n        },\n        noOfBooksTaken: {\n            field: 'noofbookstaken',\n            type: _sequelize2.default.INTEGER,\n            notNull: true,\n            defaultValue: 0\n        },\n        contactNumber: {\n            field: 'contactnumber',\n            type: _sequelize2.default.STRING(10)\n        },\n        amountDue: {\n            field: 'amountdue',\n            type: _sequelize2.default.FLOAT,\n            notNull: true,\n            defaultValue: 0\n        },\n        joinedOn: {\n            field: 'joinedon',\n            type: _sequelize2.default.DATE,\n            notNull: true,\n            defaultValue: function defaultValue() {\n                var date = new Date();\n                return date.getDate();\n            }\n        },\n        unRegisteredYN: {\n            field: 'unregisteredyn',\n            type: _sequelize2.default.BOOLEAN,\n            defaultValue: false\n        }\n    });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9tb2RlbHMvbWVtYmVyLmpzPzZlNDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplSW5zdGFuY2UpID0+IHNlcXVlbGl6ZUluc3RhbmNlLmRlZmluZSgnbWVtYmVyJywge1xuICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIGZpZWxkOiAndXNlcm5hbWUnLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HKDIwKSxcbiAgICAgICAgbm90TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgbm9PZkJvb2tzVGFrZW46IHtcbiAgICAgICAgZmllbGQ6ICdub29mYm9va3N0YWtlbicsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSLFxuICAgICAgICBub3ROdWxsOiB0cnVlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IDBcbiAgICB9LFxuICAgIGNvbnRhY3ROdW1iZXI6IHtcbiAgICAgICAgZmllbGQ6ICdjb250YWN0bnVtYmVyJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygxMClcbiAgICB9LFxuICAgIGFtb3VudER1ZToge1xuICAgICAgICBmaWVsZDogJ2Ftb3VudGR1ZScsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5GTE9BVCxcbiAgICAgICAgbm90TnVsbDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBqb2luZWRPbjoge1xuICAgICAgICBmaWVsZDogJ2pvaW5lZG9uJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkRBVEUsXG4gICAgICAgIG5vdE51bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVuUmVnaXN0ZXJlZFlOOiB7XG4gICAgICAgIGZpZWxkOiAndW5yZWdpc3RlcmVkeW4nLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICAgIH0gICBcbn0pO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbW9kZWxzL21lbWJlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQS9CQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!************************!*\
  !*** ../logic/book.js ***!
  \************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _db = __webpack_require__(/*! ../db/db.js */ 2);\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _httpStatusCodes = __webpack_require__(/*! http-status-codes */ 5);\n\nvar _httpStatusCodes2 = _interopRequireDefault(_httpStatusCodes);\n\nvar _bookValidator = __webpack_require__(/*! ../validators/bookValidator.js */ 15);\n\nvar _bookProperties = __webpack_require__(/*! ../constants/bookProperties.js */ 16);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Book = function () {\n    function Book() {\n        _classCallCheck(this, Book);\n\n        // Need 'this' to be defined to access checkBookAvailability within borrowBook.\n        // All methods were static previously, but 'this' was undefined inside those methods when the methods were passed as arguments to the handler.\n        this.checkBookAvailability = this.checkBookAvailability.bind(this);\n        this.getBookAvailability = this.getBookAvailability.bind(this);\n    }\n\n    _createClass(Book, [{\n        key: 'addBook',\n        value: function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req) {\n                var bookToAdd, createdBook, existingBook;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                bookToAdd = req.body;\n                                createdBook = void 0;\n                                existingBook = void 0;\n\n\n                                (0, _bookValidator.validateBook)(bookToAdd, { operation: 'add' });\n\n                                _context.prev = 4;\n                                _context.next = 7;\n                                return _db.db.book.findAll({\n                                    where: _extends({\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }, bookToAdd)\n                                });\n\n                            case 7:\n                                existingBook = _context.sent;\n\n                                if (!(existingBook.length === 0)) {\n                                    _context.next = 14;\n                                    break;\n                                }\n\n                                _context.next = 11;\n                                return _db.db.book.create(Object.assign(bookToAdd, { noOfBooksAvailable: 1 }));\n\n                            case 11:\n                                createdBook = _context.sent;\n                                _context.next = 18;\n                                break;\n\n                            case 14:\n                                _context.next = 16;\n                                return _db.db.book.update({\n                                    noOfBooksAvailable: existingBook[0].noOfBooksAvailable + 1\n                                }, {\n                                    where: {\n                                        id: existingBook[0].id\n                                    }\n                                });\n\n                            case 16:\n\n                                createdBook = existingBook[0];\n                                createdBook.noOfBooksAvailable += 1;\n\n                            case 18:\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.CREATED,\n                                    result: 'This book has been added to our library.'\n                                });\n\n                            case 21:\n                                _context.prev = 21;\n                                _context.t0 = _context['catch'](4);\n\n\n                                _logger2.default.error(_context.t0);\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to create books at the moment.',\n                                    error: _context.t0\n                                });\n\n                            case 25:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[4, 21]]);\n            }));\n\n            function addBook(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return addBook;\n        }()\n    }, {\n        key: 'getAllBooks',\n        value: function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req) {\n                var allBooks;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                allBooks = void 0;\n                                _context2.prev = 1;\n                                _context2.next = 4;\n                                return _db.db.book.findAll({\n                                    where: {\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 4:\n                                allBooks = _context2.sent;\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    json: allBooks\n                                });\n\n                            case 8:\n                                _context2.prev = 8;\n                                _context2.t0 = _context2['catch'](1);\n\n\n                                _logger2.default.error(_context2.t0);\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to fetch books at the moment.',\n                                    error: _context2.t0\n                                });\n\n                            case 12:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this, [[1, 8]]);\n            }));\n\n            function getAllBooks(_x2) {\n                return _ref2.apply(this, arguments);\n            }\n\n            return getAllBooks;\n        }()\n    }, {\n        key: 'getBook',\n        value: function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req) {\n                var book;\n                return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                book = void 0;\n                                _context3.prev = 1;\n                                _context3.next = 4;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: req.params.id,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 4:\n                                book = _context3.sent;\n\n                                if (book) {\n                                    _context3.next = 7;\n                                    break;\n                                }\n\n                                return _context3.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The requested book is not available now.'\n                                });\n\n                            case 7:\n                                return _context3.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    json: book\n                                });\n\n                            case 10:\n                                _context3.prev = 10;\n                                _context3.t0 = _context3['catch'](1);\n\n\n                                _logger2.default.error(_context3.t0);\n                                return _context3.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to get this book at the moment.',\n                                    error: _context3.t0\n                                });\n\n                            case 14:\n                            case 'end':\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this, [[1, 10]]);\n            }));\n\n            function getBook(_x3) {\n                return _ref3.apply(this, arguments);\n            }\n\n            return getBook;\n        }()\n    }, {\n        key: 'checkBookAvailability',\n        value: function () {\n            var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(id) {\n                var existingBook, availabilityStatus;\n                return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                    while (1) {\n                        switch (_context4.prev = _context4.next) {\n                            case 0:\n                                _context4.prev = 0;\n                                _context4.next = 3;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: id,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 3:\n                                existingBook = _context4.sent;\n\n                                if (existingBook) {\n                                    _context4.next = 6;\n                                    break;\n                                }\n\n                                return _context4.abrupt('return', false);\n\n                            case 6:\n                                availabilityStatus = existingBook.noOfBooksAvailable > 0 ? true : false;\n                                return _context4.abrupt('return', availabilityStatus);\n\n                            case 10:\n                                _context4.prev = 10;\n                                _context4.t0 = _context4['catch'](0);\n\n\n                                _logger2.default.error(_context4.t0);\n                                return _context4.abrupt('return', 'ERROR');\n\n                            case 14:\n                            case 'end':\n                                return _context4.stop();\n                        }\n                    }\n                }, _callee4, this, [[0, 10]]);\n            }));\n\n            function checkBookAvailability(_x4) {\n                return _ref4.apply(this, arguments);\n            }\n\n            return checkBookAvailability;\n        }()\n    }, {\n        key: 'updateBook',\n        value: function () {\n            var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req) {\n                var propertiesToUpdate, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, key, propertyKeys, existingBook;\n\n                return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                        switch (_context5.prev = _context5.next) {\n                            case 0:\n                                propertiesToUpdate = {};\n                                _iteratorNormalCompletion = true;\n                                _didIteratorError = false;\n                                _iteratorError = undefined;\n                                _context5.prev = 4;\n\n\n                                for (_iterator = Object.keys(req.body)[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                                    key = _step.value;\n\n                                    if (_bookProperties.bookProperties[key]) {\n                                        propertiesToUpdate[key] = req.body[key];\n                                    }\n                                }\n\n                                _context5.next = 12;\n                                break;\n\n                            case 8:\n                                _context5.prev = 8;\n                                _context5.t0 = _context5['catch'](4);\n                                _didIteratorError = true;\n                                _iteratorError = _context5.t0;\n\n                            case 12:\n                                _context5.prev = 12;\n                                _context5.prev = 13;\n\n                                if (!_iteratorNormalCompletion && _iterator.return) {\n                                    _iterator.return();\n                                }\n\n                            case 15:\n                                _context5.prev = 15;\n\n                                if (!_didIteratorError) {\n                                    _context5.next = 18;\n                                    break;\n                                }\n\n                                throw _iteratorError;\n\n                            case 18:\n                                return _context5.finish(15);\n\n                            case 19:\n                                return _context5.finish(12);\n\n                            case 20:\n                                propertyKeys = Object.keys(propertiesToUpdate);\n\n                                if (!(propertyKeys.length > 0)) {\n                                    _context5.next = 25;\n                                    break;\n                                }\n\n                                (0, _bookValidator.validateBook)(propertiesToUpdate, { operation: 'update' });\n                                _context5.next = 26;\n                                break;\n\n                            case 25:\n                                return _context5.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'Received no properties to update.'\n                                });\n\n                            case 26:\n                                _context5.prev = 26;\n                                _context5.next = 29;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: req.params.id,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 29:\n                                existingBook = _context5.sent;\n\n                                if (existingBook) {\n                                    _context5.next = 32;\n                                    break;\n                                }\n\n                                return _context5.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The requested book is not available to be updated.'\n                                });\n\n                            case 32:\n                                _context5.next = 34;\n                                return _db.db.book.update(propertiesToUpdate, {\n                                    where: {\n                                        id: req.params.id\n                                    }\n                                });\n\n                            case 34:\n                                return _context5.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The properties of this book have been updated.'\n                                });\n\n                            case 37:\n                                _context5.prev = 37;\n                                _context5.t1 = _context5['catch'](26);\n\n\n                                _logger2.default.error(_context5.t1);\n                                return _context5.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to update this book at the moment.',\n                                    error: _context5.t1\n                                });\n\n                            case 41:\n                            case 'end':\n                                return _context5.stop();\n                        }\n                    }\n                }, _callee5, this, [[4, 8, 12, 20], [13,, 15, 19], [26, 37]]);\n            }));\n\n            function updateBook(_x5) {\n                return _ref5.apply(this, arguments);\n            }\n\n            return updateBook;\n        }()\n    }, {\n        key: 'deleteBook',\n        value: function () {\n            var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(req) {\n                var existingBook;\n                return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                        switch (_context6.prev = _context6.next) {\n                            case 0:\n                                _context6.prev = 0;\n                                _context6.next = 3;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: req.params.id,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 3:\n                                existingBook = _context6.sent;\n\n                                if (existingBook) {\n                                    _context6.next = 6;\n                                    break;\n                                }\n\n                                return _context6.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The requested book is not available to be deleted.'\n                                });\n\n                            case 6:\n                                _context6.next = 8;\n                                return _db.db.book.update({\n                                    deleted: true\n                                }, {\n                                    where: {\n                                        id: req.params.id\n                                    }\n                                });\n\n                            case 8:\n                                return _context6.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The requested book has been marked as deleted in the library records.'\n                                });\n\n                            case 11:\n                                _context6.prev = 11;\n                                _context6.t0 = _context6['catch'](0);\n\n\n                                _logger2.default.error(_context6.t0);\n                                return _context6.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to delete this book at the moment.',\n                                    error: _context6.t0\n                                });\n\n                            case 15:\n                            case 'end':\n                                return _context6.stop();\n                        }\n                    }\n                }, _callee6, this, [[0, 11]]);\n            }));\n\n            function deleteBook(_x6) {\n                return _ref6.apply(this, arguments);\n            }\n\n            return deleteBook;\n        }()\n    }, {\n        key: 'getBookAvailability',\n        value: function () {\n            var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(req) {\n                var availability;\n                return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                        switch (_context7.prev = _context7.next) {\n                            case 0:\n                                _context7.next = 2;\n                                return this.checkBookAvailability(req.params.id);\n\n                            case 2:\n                                availability = _context7.sent;\n\n                                if (!(availability === 'ERROR')) {\n                                    _context7.next = 7;\n                                    break;\n                                }\n\n                                return _context7.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to check availability at the moment.'\n                                });\n\n                            case 7:\n                                return _context7.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    json: { availability: availability }\n                                });\n\n                            case 8:\n                            case 'end':\n                                return _context7.stop();\n                        }\n                    }\n                }, _callee7, this);\n            }));\n\n            function getBookAvailability(_x7) {\n                return _ref7.apply(this, arguments);\n            }\n\n            return getBookAvailability;\n        }()\n    }]);\n\n    return Book;\n}();\n\n;\n\nvar bookInstance = new Book();\n\nexports.default = bookInstance;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9sb2dpYy9ib29rLmpzPzZmN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9kYi9kYi5qcyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZUJvb2sgfSBmcm9tICcuLi92YWxpZGF0b3JzL2Jvb2tWYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgYm9va1Byb3BlcnRpZXMgfSBmcm9tICcuLi9jb25zdGFudHMvYm9va1Byb3BlcnRpZXMuanMnO1xuXG5jbGFzcyBCb29rIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgLy8gTmVlZCAndGhpcycgdG8gYmUgZGVmaW5lZCB0byBhY2Nlc3MgY2hlY2tCb29rQXZhaWxhYmlsaXR5IHdpdGhpbiBib3Jyb3dCb29rLlxuICAgICAgICAvLyBBbGwgbWV0aG9kcyB3ZXJlIHN0YXRpYyBwcmV2aW91c2x5LCBidXQgJ3RoaXMnIHdhcyB1bmRlZmluZWQgaW5zaWRlIHRob3NlIG1ldGhvZHMgd2hlbiB0aGUgbWV0aG9kcyB3ZXJlIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIGhhbmRsZXIuXG4gICAgICAgIHRoaXMuY2hlY2tCb29rQXZhaWxhYmlsaXR5ID0gdGhpcy5jaGVja0Jvb2tBdmFpbGFiaWxpdHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRCb29rQXZhaWxhYmlsaXR5ID0gdGhpcy5nZXRCb29rQXZhaWxhYmlsaXR5LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkQm9vayAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgYm9va1RvQWRkID0gcmVxLmJvZHk7XG4gICAgICAgIGxldCBjcmVhdGVkQm9vaztcbiAgICAgICAgbGV0IGV4aXN0aW5nQm9vaztcbiAgICAgICAgXG4gICAgICAgIHZhbGlkYXRlQm9vayhib29rVG9BZGQsIHsgb3BlcmF0aW9uOiAnYWRkJyB9KTtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBleGlzdGluZ0Jvb2sgPSBhd2FpdCBkYi5ib29rLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgLi4uYm9va1RvQWRkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Jvb2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlZEJvb2sgPSBhd2FpdCBkYi5ib29rLmNyZWF0ZShPYmplY3QuYXNzaWduKGJvb2tUb0FkZCwgeyBub09mQm9va3NBdmFpbGFibGU6IDEgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5ib29rLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogZXhpc3RpbmdCb29rWzBdLm5vT2ZCb29rc0F2YWlsYWJsZSArIDFcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZXhpc3RpbmdCb29rWzBdLmlkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNyZWF0ZWRCb29rID0gZXhpc3RpbmdCb29rWzBdO1xuICAgICAgICAgICAgICAgIGNyZWF0ZWRCb29rLm5vT2ZCb29rc0F2YWlsYWJsZSArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5DUkVBVEVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoaXMgYm9vayBoYXMgYmVlbiBhZGRlZCB0byBvdXIgbGlicmFyeS4nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGNyZWF0ZSBib29rcyBhdCB0aGUgbW9tZW50LicsXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsQm9va3MgKHJlcSkge1xuXG4gICAgICAgIGxldCBhbGxCb29rcztcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgYWxsQm9va3MgPSBhd2FpdCBkYi5ib29rLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5PSyxcbiAgICAgICAgICAgICAgICBqc29uOiBhbGxCb29rc1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGZldGNoIGJvb2tzIGF0IHRoZSBtb21lbnQuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRCb29rIChyZXEpIHtcblxuICAgICAgICBsZXQgYm9vaztcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgYm9vayA9IGF3YWl0IGRiLmJvb2suZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmKCFib29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSBub3cuJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAganNvbjogYm9va1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGdldCB0aGlzIGJvb2sgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrQm9va0F2YWlsYWJpbGl0eSAoaWQpIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gXG4gICAgICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlTdGF0dXMgPSBleGlzdGluZ0Jvb2subm9PZkJvb2tzQXZhaWxhYmxlID4gMCA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIGF2YWlsYWJpbGl0eVN0YXR1cztcblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuICdFUlJPUic7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUJvb2sgKHJlcSkge1xuXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzVG9VcGRhdGUgPSB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZXEuYm9keSkpIHtcbiAgICAgICAgICAgIGlmIChib29rUHJvcGVydGllc1trZXldKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1RvVXBkYXRlW2tleV0gPSByZXEuYm9keVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcGVydHlLZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllc1RvVXBkYXRlKTtcblxuICAgICAgICBpZiAocHJvcGVydHlLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhbGlkYXRlQm9vayhwcm9wZXJ0aWVzVG9VcGRhdGUsIHsgb3BlcmF0aW9uOiAndXBkYXRlJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLkJBRF9SRVFVRVNULFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1JlY2VpdmVkIG5vIHByb3BlcnRpZXMgdG8gdXBkYXRlLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIC8vIE1vdmUgdGhlIGJlbG93IHF1ZXJ5IGludG8gYSBzZXBhcmF0ZSBzdWIsIGFzIGl0IGlzIGNvbW1vbiBmb3IgbWFueSBzdWJzLlxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSB0byBiZSB1cGRhdGVkLidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGRiLmJvb2sudXBkYXRlKHByb3BlcnRpZXNUb1VwZGF0ZSwge1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgYm9vayBoYXZlIGJlZW4gdXBkYXRlZC4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gdXBkYXRlIHRoaXMgYm9vayBhdCB0aGUgbW9tZW50LicsXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlQm9vayAocmVxKSB7XG5cbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSB0byBiZSBkZWxldGVkLidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGRiLmJvb2sudXBkYXRlKHtcbiAgICAgICAgICAgICAgZGVsZXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXF1ZXN0ZWQgYm9vayBoYXMgYmVlbiBtYXJrZWQgYXMgZGVsZXRlZCBpbiB0aGUgbGlicmFyeSByZWNvcmRzLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byBkZWxldGUgdGhpcyBib29rIGF0IHRoZSBtb21lbnQuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Qm9va0F2YWlsYWJpbGl0eSAocmVxKSB7XG4gICAgICAgXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eSA9IGF3YWl0IHRoaXMuY2hlY2tCb29rQXZhaWxhYmlsaXR5KHJlcS5wYXJhbXMuaWQpO1xuXG4gICAgICAgIGlmIChhdmFpbGFiaWxpdHkgPT09ICdFUlJPUicpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gY2hlY2sgYXZhaWxhYmlsaXR5IGF0IHRoZSBtb21lbnQuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAganNvbjogeyBhdmFpbGFiaWxpdHkgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuY29uc3QgYm9va0luc3RhbmNlID0gbmV3IEJvb2soKTtcblxuZXhwb3J0IGRlZmF1bHQgYm9va0luc3RhbmNlO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsb2dpYy9ib29rLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFNQTs7Ozs7O0FBQ0E7QUFDQTs7QUFEQTs7Ozs7O0FBSUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBREE7QUFDQTs7O0FBS0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTs7Ozs7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFDQTs7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTs7Ozs7O0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFNQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTs7Ozs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTtBQUNBO0FBTUE7Ozs7O0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7Ozs7OztBQUlBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUE7Ozs7Ozs7QUFFQTs7Ozs7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBOzs7OztBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTtBQUNBO0FBTUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7O0FBS0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQTs7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTtBQUNBO0FBTUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7O0FBS0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBO0FBREE7QUFDQTs7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOzs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0E7Ozs7Ozs7QUFFQTtBQUNBOztBQURBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!****************************!*\
  !*** external "validator" ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"validator\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInZhbGlkYXRvclwiPzU0ZDEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidmFsaWRhdG9yXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwidmFsaWRhdG9yXCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!****************************************!*\
  !*** multi babel-polyfill ./server.js ***!
  \****************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! babel-polyfill */10);
module.exports = __webpack_require__(/*! ./server.js */11);


/***/ }),
/* 10 */
/*!*********************************!*\
  !*** external "babel-polyfill" ***!
  \*********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"babel-polyfill\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiYWJlbC1wb2x5ZmlsbFwiP2QwZDYiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYmFiZWwtcG9seWZpbGxcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJiYWJlbC1wb2x5ZmlsbFwiXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!*******************!*\
  !*** ./server.js ***!
  \*******************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _db = __webpack_require__(/*! ../db/db.js */ 2);\n\nvar _bookController = __webpack_require__(/*! ../controllers/bookController.js */ 14);\n\nvar _memberController = __webpack_require__(/*! ../controllers/memberController.js */ 17);\n\nvar _bookTransactionsController = __webpack_require__(/*! ../controllers/bookTransactionsController.js */ 20);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar express = __webpack_require__(/*! express */ 3);\nvar bodyParser = __webpack_require__(/*! body-parser */ 22);\n\n\nvar app = express();\nvar port = 8080;\n\napp.use(function (req, res, next) {\n  _logger2.default.info('Incoming request.');\n  next();\n});\n\napp.use(bodyParser.json());\n\napp.use('/api', (0, _bookController.bookRouter)());\napp.use('/api', (0, _memberController.memberRouter)());\napp.use('/api', (0, _bookTransactionsController.bookTransactionsRouter)());\n\nif (process.env.NODE_ENV !== 'test') {\n\n  app.listen(port, function () {\n    _db.db.syncSchema();\n    console.log('Server is running on port ' + port + '.');\n  });\n}\n\nexports.default = app;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NlcnZlci5qcz9lYTc1Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZGIvZGIuanMnXHJcbmltcG9ydCB7IGJvb2tSb3V0ZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9ib29rQ29udHJvbGxlci5qcyc7XHJcbmltcG9ydCB7IG1lbWJlclJvdXRlciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL21lbWJlckNvbnRyb2xsZXIuanMnO1xyXG5pbXBvcnQgeyBib29rVHJhbnNhY3Rpb25zUm91dGVyIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvYm9va1RyYW5zYWN0aW9uc0NvbnRyb2xsZXIuanMnO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBwb3J0ID0gODA4MDtcclxuXHJcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgbG9nZ2VyLmluZm8oYEluY29taW5nIHJlcXVlc3QuYCk7XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5cclxuYXBwLnVzZSgnL2FwaScsIGJvb2tSb3V0ZXIoKSk7XHJcbmFwcC51c2UoJy9hcGknLCBtZW1iZXJSb3V0ZXIoKSk7XHJcbmFwcC51c2UoJy9hcGknLCBib29rVHJhbnNhY3Rpb25zUm91dGVyKCkpO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcclxuXHJcbiAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgICBkYi5zeW5jU2NoZW1hKCk7XHJcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9LmApO1xyXG4gIH0pXHJcbiAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwcDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc2VydmVyL3NlcnZlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!********************************************!*\
  !*** external "@athena/app-fabric-logger" ***!
  \********************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"@athena/app-fabric-logger\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYXRoZW5hL2FwcC1mYWJyaWMtbG9nZ2VyXCI/YjRkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYXRoZW5hL2FwcC1mYWJyaWMtbG9nZ2VyXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGF0aGVuYS9hcHAtZmFicmljLWxvZ2dlclwiXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!*************************!*\
  !*** ../models/book.js ***!
  \*************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _member = __webpack_require__(/*! ./member.js */ 6);\n\nvar _member2 = _interopRequireDefault(_member);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (sequelizeInstance) {\n    return sequelizeInstance.define('book', {\n        name: {\n            field: 'name',\n            type: _sequelize2.default.STRING(20),\n            notNull: true\n        },\n        author: {\n            field: 'author',\n            type: _sequelize2.default.STRING(20),\n            notNull: true\n        },\n        publishedDate: {\n            field: 'publisheddate',\n            type: _sequelize2.default.DATE\n        },\n        edition: {\n            field: 'edition',\n            type: _sequelize2.default.STRING(2)\n        },\n        shelfNumber: {\n            field: 'shelfnumber',\n            type: _sequelize2.default.STRING(2),\n            notNull: true\n        },\n        deleted: {\n            field: 'deleted',\n            type: _sequelize2.default.BOOLEAN,\n            notNull: true,\n            defaultValue: false\n        },\n        noOfBooksAvailable: {\n            field: 'noofbooksavailable',\n            type: _sequelize2.default.INTEGER,\n            notNull: true\n        }\n    });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbW9kZWxzL2Jvb2suanM/OGJhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgbWVtYmVyIGZyb20gJy4vbWVtYmVyLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcXVlbGl6ZUluc3RhbmNlKSA9PiBzZXF1ZWxpemVJbnN0YW5jZS5kZWZpbmUoJ2Jvb2snLCB7XG4gICAgbmFtZToge1xuICAgICAgICBmaWVsZDogJ25hbWUnLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HKDIwKSxcbiAgICAgICAgbm90TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgYXV0aG9yOiB7XG4gICAgICAgIGZpZWxkOiAnYXV0aG9yJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygyMCksXG4gICAgICAgIG5vdE51bGw6IHRydWVcbiAgICB9LFxuICAgIHB1Ymxpc2hlZERhdGU6IHtcbiAgICAgICAgZmllbGQ6ICdwdWJsaXNoZWRkYXRlJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkRBVEVcbiAgICB9LFxuICAgIGVkaXRpb246IHtcbiAgICAgICAgZmllbGQ6ICdlZGl0aW9uJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygyKVxuICAgIH0sXG4gICAgc2hlbGZOdW1iZXI6IHtcbiAgICAgICAgZmllbGQ6ICdzaGVsZm51bWJlcicsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcoMiksXG4gICAgICAgIG5vdE51bGw6IHRydWVcbiAgICB9LFxuICAgIGRlbGV0ZWQ6IHtcbiAgICAgICAgZmllbGQ6ICdkZWxldGVkJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkJPT0xFQU4sXG4gICAgICAgIG5vdE51bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2VcbiAgICB9LFxuICAgIG5vT2ZCb29rc0F2YWlsYWJsZToge1xuICAgICAgICBmaWVsZDogJ25vb2Zib29rc2F2YWlsYWJsZScsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSLFxuICAgICAgICBub3ROdWxsOiB0cnVlXG4gICAgfVxufSk7XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBtb2RlbHMvYm9vay5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUE5QkE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!****************************************!*\
  !*** ../controllers/bookController.js ***!
  \****************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.bookRouter = undefined;\n\nvar _express = __webpack_require__(/*! express */ 3);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _handlers = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n\nvar _book = __webpack_require__(/*! ../logic/book.js */ 7);\n\nvar _book2 = _interopRequireDefault(_book);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar bookRouter = exports.bookRouter = function bookRouter() {\n\n    var bookRouter = _express2.default.Router();\n\n    bookRouter.post('/books', function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            return _context.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.addBook));\n\n                        case 1:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, undefined);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }());\n    bookRouter.get('/books', function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res) {\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            return _context2.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.getAllBooks));\n\n                        case 1:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, undefined);\n        }));\n\n        return function (_x3, _x4) {\n            return _ref2.apply(this, arguments);\n        };\n    }());\n    bookRouter.get('/books/:id', function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res) {\n            return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            return _context3.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.getBook));\n\n                        case 1:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, _callee3, undefined);\n        }));\n\n        return function (_x5, _x6) {\n            return _ref3.apply(this, arguments);\n        };\n    }());\n    bookRouter.get('/books/availability/:id', function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(req, res) {\n            return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            return _context4.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.getBookAvailability));\n\n                        case 1:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, _callee4, undefined);\n        }));\n\n        return function (_x7, _x8) {\n            return _ref4.apply(this, arguments);\n        };\n    }());\n    bookRouter.patch('/books/:id', function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req, res) {\n            return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                    switch (_context5.prev = _context5.next) {\n                        case 0:\n                            return _context5.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.updateBook));\n\n                        case 1:\n                        case 'end':\n                            return _context5.stop();\n                    }\n                }\n            }, _callee5, undefined);\n        }));\n\n        return function (_x9, _x10) {\n            return _ref5.apply(this, arguments);\n        };\n    }());\n    bookRouter.delete('/books/:id', function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(req, res) {\n            return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                while (1) {\n                    switch (_context6.prev = _context6.next) {\n                        case 0:\n                            return _context6.abrupt('return', (0, _handlers.requestHandler)(req, res, _book2.default.deleteBook));\n\n                        case 1:\n                        case 'end':\n                            return _context6.stop();\n                    }\n                }\n            }, _callee6, undefined);\n        }));\n\n        return function (_x11, _x12) {\n            return _ref6.apply(this, arguments);\n        };\n    }());\n\n    return bookRouter;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvYm9va0NvbnRyb2xsZXIuanM/ZGUzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9oYW5kbGVycy5qcyc7XG5pbXBvcnQgQm9va0Z1bmN0aW9ucyBmcm9tICcuLi9sb2dpYy9ib29rLmpzJztcblxuZXhwb3J0IGNvbnN0IGJvb2tSb3V0ZXIgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBib29rUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAgIGJvb2tSb3V0ZXIucG9zdCAgICgnL2Jvb2tzJywgICAgICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmFkZEJvb2spKTtcbiAgICBib29rUm91dGVyLmdldCAgICAoJy9ib29rcycsICAgICAgICAgICAgICAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va0Z1bmN0aW9ucy5nZXRBbGxCb29rcykpO1xuICAgIGJvb2tSb3V0ZXIuZ2V0ICAgICgnL2Jvb2tzLzppZCcsICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmdldEJvb2spKTtcbiAgICBib29rUm91dGVyLmdldCAgICAoJy9ib29rcy9hdmFpbGFiaWxpdHkvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va0Z1bmN0aW9ucy5nZXRCb29rQXZhaWxhYmlsaXR5KSk7XG4gICAgYm9va1JvdXRlci5wYXRjaCAgKCcvYm9va3MvOmlkJywgICAgICAgICAgICAgIGFzeW5jIChyZXEsIHJlcykgPT4gcmVxdWVzdEhhbmRsZXIocmVxLCByZXMsIEJvb2tGdW5jdGlvbnMudXBkYXRlQm9vaykpO1xuICAgIGJvb2tSb3V0ZXIuZGVsZXRlICgnL2Jvb2tzLzppZCcsICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmRlbGV0ZUJvb2spKTtcblxuICAgIHJldHVybiBib29rUm91dGVyO1xufTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnRyb2xsZXJzL2Jvb2tDb250cm9sbGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/*!**************************************!*\
  !*** ../validators/bookValidator.js ***!
  \**************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.validateBook = undefined;\n\nvar _validator = __webpack_require__(/*! validator */ 8);\n\nvar _validator2 = _interopRequireDefault(_validator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar validateName = function validateName(name) {\n    if (!name || !(typeof name === 'string')) {\n        return 'Name of the book cannot be empty, should be a string, has to contain between 6 and 20 characters and it cannot contain special characters. ';\n    } else if (!_validator2.default.matches(name, /[a-zA-Z0-9\\s]{6,20}/i)) {\n        return 'Name of the book has to contain between 6 and 20 characters and it cannot contain special characters. ';\n    } else {\n        return '';\n    }\n};\n\nvar validateAuthor = function validateAuthor(author) {\n    if (!author || !(typeof author === 'string')) {\n        return 'Author of the book cannot be empty and it should be a string. ';\n    } else {\n        return '';\n    }\n};\n\nvar validateShelfNumber = function validateShelfNumber(shelfNumber) {\n    if (!shelfNumber || !(typeof shelfNumber === 'string')) {\n        return 'Shelf number of the book cannot be empty and it should be a string. ';\n    } else {\n        return '';\n    }\n};\n\nvar validatePublishedDate = function validatePublishedDate(publishedDate) {\n    if (publishedDate && !publishedDate.match(/[1,2][7,8,9,0][0-9]{2}-[0-9]{2}-[0-9]{2}/)) {\n        return 'Published date of the book is not valid. ';\n    } else {\n        return '';\n    }\n};\n\nvar validateEdition = function validateEdition(edition) {\n    if (edition && !(typeof edition === 'string')) {\n        return 'Edition number of the book is not valid. It has to be a number. ';\n    } else {\n        return '';\n    }\n};\n\nvar validateBook = exports.validateBook = function validateBook(_ref, _ref2) {\n    var name = _ref.name,\n        author = _ref.author,\n        edition = _ref.edition,\n        publishedDate = _ref.publishedDate,\n        shelfNumber = _ref.shelfNumber;\n    var _ref2$operation = _ref2.operation,\n        operation = _ref2$operation === undefined ? 'noop' : _ref2$operation;\n\n\n    var validationError = '';\n\n    if (operation === 'add') {\n\n        validationError += validateName(name);\n        validationError += validateAuthor(author);\n        validationError += validateShelfNumber(shelfNumber);\n        validationError += validatePublishedDate(publishedDate);\n        validationError += validateEdition(edition);\n    }\n\n    if (operation === 'update') {\n\n        validationError += name !== undefined ? validateName(name) : '';\n        validationError += author !== undefined ? validateAuthor(author) : '';\n        validationError += shelfNumber !== undefined ? validateShelfNumber(shelfNumber) : '';\n        validationError += publishedDate !== undefined ? validatePublishedDate(publishedDate) : '';\n        validationError += edition !== undefined ? validateEdition(edition) : '';\n    }\n\n    if (validationError) {\n        throw Error(validationError);\n    }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdmFsaWRhdG9ycy9ib29rVmFsaWRhdG9yLmpzPzk1MmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRvciBmcm9tICd2YWxpZGF0b3InO1xuXG5jb25zdCB2YWxpZGF0ZU5hbWUgPSAobmFtZSkgPT4ge1xuICAgIGlmICghbmFtZSB8fCAhKHR5cGVvZihuYW1lKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybiAnTmFtZSBvZiB0aGUgYm9vayBjYW5ub3QgYmUgZW1wdHksIHNob3VsZCBiZSBhIHN0cmluZywgaGFzIHRvIGNvbnRhaW4gYmV0d2VlbiA2IGFuZCAyMCBjaGFyYWN0ZXJzIGFuZCBpdCBjYW5ub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuICc7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2YWxpZGF0b3IubWF0Y2hlcyhuYW1lLCAvW2EtekEtWjAtOVxcc117NiwyMH0vaSkpIHtcbiAgICAgICAgcmV0dXJuICdOYW1lIG9mIHRoZSBib29rIGhhcyB0byBjb250YWluIGJldHdlZW4gNiBhbmQgMjAgY2hhcmFjdGVycyBhbmQgaXQgY2Fubm90IGNvbnRhaW4gc3BlY2lhbCBjaGFyYWN0ZXJzLiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuY29uc3QgdmFsaWRhdGVBdXRob3IgPSAoYXV0aG9yKSA9PiB7XG4gICAgaWYgKCFhdXRob3IgfHwgISh0eXBlb2YoYXV0aG9yKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybiAnQXV0aG9yIG9mIHRoZSBib29rIGNhbm5vdCBiZSBlbXB0eSBhbmQgaXQgc2hvdWxkIGJlIGEgc3RyaW5nLiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuY29uc3QgdmFsaWRhdGVTaGVsZk51bWJlciA9IChzaGVsZk51bWJlcikgPT4ge1xuICAgIGlmICghc2hlbGZOdW1iZXIgfHwgISh0eXBlb2Yoc2hlbGZOdW1iZXIpID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuICdTaGVsZiBudW1iZXIgb2YgdGhlIGJvb2sgY2Fubm90IGJlIGVtcHR5IGFuZCBpdCBzaG91bGQgYmUgYSBzdHJpbmcuICc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuXG5jb25zdCB2YWxpZGF0ZVB1Ymxpc2hlZERhdGUgPSAocHVibGlzaGVkRGF0ZSkgPT4ge1xuICAgIGlmKHB1Ymxpc2hlZERhdGUgJiYgIXB1Ymxpc2hlZERhdGUubWF0Y2goL1sxLDJdWzcsOCw5LDBdWzAtOV17Mn0tWzAtOV17Mn0tWzAtOV17Mn0vKSkge1xuICAgICAgICByZXR1cm4gJ1B1Ymxpc2hlZCBkYXRlIG9mIHRoZSBib29rIGlzIG5vdCB2YWxpZC4gJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG5cbmNvbnN0IHZhbGlkYXRlRWRpdGlvbiA9IChlZGl0aW9uKSA9PiB7XG4gICAgaWYgKGVkaXRpb24gJiYgISh0eXBlb2YoZWRpdGlvbikgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm4gJ0VkaXRpb24gbnVtYmVyIG9mIHRoZSBib29rIGlzIG5vdCB2YWxpZC4gSXQgaGFzIHRvIGJlIGEgbnVtYmVyLiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQm9vayA9ICh7IG5hbWUsIGF1dGhvciwgZWRpdGlvbiwgcHVibGlzaGVkRGF0ZSwgc2hlbGZOdW1iZXIgfSwgeyBvcGVyYXRpb24gPSAnbm9vcCcgfSkgPT4ge1xuXG4gICAgbGV0IHZhbGlkYXRpb25FcnJvciA9ICcnO1xuXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2FkZCcpIHtcblxuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gdmFsaWRhdGVOYW1lKG5hbWUpO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gdmFsaWRhdGVBdXRob3IoYXV0aG9yKTtcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHZhbGlkYXRlU2hlbGZOdW1iZXIoc2hlbGZOdW1iZXIpO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gdmFsaWRhdGVQdWJsaXNoZWREYXRlKHB1Ymxpc2hlZERhdGUpO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gdmFsaWRhdGVFZGl0aW9uKGVkaXRpb24pO1xuXG4gICAgfVxuXG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3VwZGF0ZScpIHtcblxuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gbmFtZSAhPT0gdW5kZWZpbmVkID8gdmFsaWRhdGVOYW1lKG5hbWUpIDogJyc7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSBhdXRob3IgIT09IHVuZGVmaW5lZCA/IHZhbGlkYXRlQXV0aG9yKGF1dGhvcikgOiAnJztcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHNoZWxmTnVtYmVyICE9PSB1bmRlZmluZWQgPyB2YWxpZGF0ZVNoZWxmTnVtYmVyKHNoZWxmTnVtYmVyKSA6ICcnO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gcHVibGlzaGVkRGF0ZSAhPT0gdW5kZWZpbmVkID8gdmFsaWRhdGVQdWJsaXNoZWREYXRlKHB1Ymxpc2hlZERhdGUpIDogJyc7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSBlZGl0aW9uICE9PSB1bmRlZmluZWQgPyB2YWxpZGF0ZUVkaXRpb24oZWRpdGlvbikgOiAnJztcblxuICAgIH1cblxuICAgIGlmICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IodmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG4gICAgXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHZhbGlkYXRvcnMvYm9va1ZhbGlkYXRvci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/*!**************************************!*\
  !*** ../constants/bookProperties.js ***!
  \**************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar bookProperties = exports.bookProperties = {\n    'name': 'NAME',\n    'author': 'AUTHOR',\n    'publishedDate': 'PUBLISHEDDATE',\n    'edition': 'EDITION',\n    'shelfNumber': 'SHELFNUMBER'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29uc3RhbnRzL2Jvb2tQcm9wZXJ0aWVzLmpzPzkzNTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGJvb2tQcm9wZXJ0aWVzID0geyBcbiAgICAnbmFtZSc6ICdOQU1FJywgXG4gICAgJ2F1dGhvcic6ICdBVVRIT1InLCBcbiAgICAncHVibGlzaGVkRGF0ZSc6ICdQVUJMSVNIRUREQVRFJywgXG4gICAgJ2VkaXRpb24nOiAnRURJVElPTicsIFxuICAgICdzaGVsZk51bWJlcic6ICdTSEVMRk5VTUJFUicgXG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbnN0YW50cy9ib29rUHJvcGVydGllcy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/*!******************************************!*\
  !*** ../controllers/memberController.js ***!
  \******************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.memberRouter = undefined;\n\nvar _express = __webpack_require__(/*! express */ 3);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _handlers = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n\nvar _member = __webpack_require__(/*! ../logic/member.js */ 18);\n\nvar _member2 = _interopRequireDefault(_member);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar memberRouter = exports.memberRouter = function memberRouter() {\n\n    var memberRouter = _express2.default.Router();\n\n    memberRouter.post('/members', function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            return _context.abrupt('return', (0, _handlers.requestHandler)(req, res, _member2.default.registerMember));\n\n                        case 1:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, undefined);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }());\n    memberRouter.delete('/members/:id', function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res) {\n            return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            return _context2.abrupt('return', (0, _handlers.requestHandler)(req, res, _member2.default.unRegisterMember));\n\n                        case 1:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, undefined);\n        }));\n\n        return function (_x3, _x4) {\n            return _ref2.apply(this, arguments);\n        };\n    }());\n\n    return memberRouter;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvbWVtYmVyQ29udHJvbGxlci5qcz83ZDMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuLi9taWRkbGV3YXJlL2hhbmRsZXJzLmpzJztcbmltcG9ydCBNZW1iZXJGdW5jdGlvbnMgZnJvbSAnLi4vbG9naWMvbWVtYmVyLmpzJztcblxuZXhwb3J0IGNvbnN0IG1lbWJlclJvdXRlciA9ICgpID0+IHtcblxuICAgIGNvbnN0IG1lbWJlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgICBtZW1iZXJSb3V0ZXIucG9zdCAgICgnL21lbWJlcnMnLCAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgTWVtYmVyRnVuY3Rpb25zLnJlZ2lzdGVyTWVtYmVyKSk7XG4gICAgbWVtYmVyUm91dGVyLmRlbGV0ZSAoJy9tZW1iZXJzLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gcmVxdWVzdEhhbmRsZXIocmVxLCByZXMsIE1lbWJlckZ1bmN0aW9ucy51blJlZ2lzdGVyTWVtYmVyKSk7XG5cbiAgICByZXR1cm4gbWVtYmVyUm91dGVyO1xufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29udHJvbGxlcnMvbWVtYmVyQ29udHJvbGxlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/*!**************************!*\
  !*** ../logic/member.js ***!
  \**************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _db = __webpack_require__(/*! ../db/db.js */ 2);\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _httpStatusCodes = __webpack_require__(/*! http-status-codes */ 5);\n\nvar _httpStatusCodes2 = _interopRequireDefault(_httpStatusCodes);\n\nvar _memberValidator = __webpack_require__(/*! ../validators/memberValidator.js */ 19);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Member = function () {\n    function Member() {\n        _classCallCheck(this, Member);\n    }\n\n    _createClass(Member, null, [{\n        key: 'registerMember',\n        value: function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req) {\n                var _req$body, _req$body$username, username, _req$body$contactNumb, contactNumber, createdUser, existingMember;\n\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _req$body = req.body, _req$body$username = _req$body.username, username = _req$body$username === undefined ? '' : _req$body$username, _req$body$contactNumb = _req$body.contactNumber, contactNumber = _req$body$contactNumb === undefined ? '' : _req$body$contactNumb;\n                                createdUser = void 0;\n                                existingMember = void 0;\n\n\n                                (0, _memberValidator.validateMember)({ username: username, contactNumber: contactNumber });\n\n                                _context.prev = 4;\n                                _context.next = 7;\n                                return _db.db.member.findOne({\n                                    where: {\n                                        username: username,\n                                        unRegisteredYN: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 7:\n                                existingMember = _context.sent;\n\n                                if (!existingMember) {\n                                    _context.next = 10;\n                                    break;\n                                }\n\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'The requested user is already a registered member.'\n                                });\n\n                            case 10:\n                                _context.next = 12;\n                                return _db.db.member.create({\n                                    username: username,\n                                    contactNumber: contactNumber\n                                });\n\n                            case 12:\n                                createdUser = _context.sent;\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.CREATED,\n                                    result: 'The requested user has been registered.'\n                                });\n\n                            case 16:\n                                _context.prev = 16;\n                                _context.t0 = _context['catch'](4);\n\n\n                                _logger2.default.error(_context.t0);\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to register this user at the moment.',\n                                    error: _context.t0\n                                });\n\n                            case 20:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[4, 16]]);\n            }));\n\n            function registerMember(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return registerMember;\n        }()\n    }, {\n        key: 'unRegisterMember',\n        value: function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req) {\n                var memberId, existingMember;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                memberId = req.params.id;\n                                _context2.prev = 1;\n                                _context2.next = 4;\n                                return _db.db.member.findOne({\n                                    where: {\n                                        id: memberId\n                                    }\n                                });\n\n                            case 4:\n                                existingMember = _context2.sent;\n\n                                if (existingMember) {\n                                    _context2.next = 7;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'This user is not already registered with us.'\n                                });\n\n                            case 7:\n                                if (!existingMember.unRegisteredYN) {\n                                    _context2.next = 9;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'This user has already unregsitered with us.'\n                                });\n\n                            case 9:\n                                ;\n\n                                _context2.next = 12;\n                                return _db.db.member.update({\n                                    unRegisteredYN: true\n                                }, {\n                                    where: {\n                                        id: memberId\n                                    }\n                                });\n\n                            case 12:\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The requested user has been unregistered.'\n                                });\n\n                            case 15:\n                                _context2.prev = 15;\n                                _context2.t0 = _context2['catch'](1);\n\n\n                                _logger2.default.error(_context2.t0);\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to unregister this user at the moment.',\n                                    error: _context2.t0\n                                });\n\n                            case 19:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this, [[1, 15]]);\n            }));\n\n            function unRegisterMember(_x2) {\n                return _ref2.apply(this, arguments);\n            }\n\n            return unRegisterMember;\n        }()\n    }]);\n\n    return Member;\n}();\n\nexports.default = Member;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbG9naWMvbWVtYmVyLmpzPzAyMjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9kYi9kYi5qcyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZU1lbWJlciB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvbWVtYmVyVmFsaWRhdG9yLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVtYmVyIHtcblxuICAgIHN0YXRpYyBhc3luYyByZWdpc3Rlck1lbWJlciAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgeyB1c2VybmFtZSA9ICcnLCBjb250YWN0TnVtYmVyID0gJycgfSA9IHJlcS5ib2R5O1xuICAgICAgICBsZXQgY3JlYXRlZFVzZXI7XG4gICAgICAgIGxldCBleGlzdGluZ01lbWJlcjtcblxuICAgICAgICB2YWxpZGF0ZU1lbWJlcih7IHVzZXJuYW1lLCBjb250YWN0TnVtYmVyIH0pO1xuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICB1blJlZ2lzdGVyZWRZTjogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhlIHJlcXVlc3RlZCB1c2VyIGlzIGFscmVhZHkgYSByZWdpc3RlcmVkIG1lbWJlci4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjcmVhdGVkVXNlciA9IGF3YWl0IGRiLm1lbWJlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRhY3ROdW1iZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5DUkVBVEVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXF1ZXN0ZWQgdXNlciBoYXMgYmVlbiByZWdpc3RlcmVkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byByZWdpc3RlciB0aGlzIHVzZXIgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyB1blJlZ2lzdGVyTWVtYmVyIChyZXEpIHtcbiAgICAgICAgY29uc3QgbWVtYmVySWQgPSByZXEucGFyYW1zLmlkO1xuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgICAgICAgICAgICBpZDogbWVtYmVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhpcyB1c2VyIGlzIG5vdCBhbHJlYWR5IHJlZ2lzdGVyZWQgd2l0aCB1cy4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdNZW1iZXIudW5SZWdpc3RlcmVkWU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoaXMgdXNlciBoYXMgYWxyZWFkeSB1bnJlZ3NpdGVyZWQgd2l0aCB1cy4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgZGIubWVtYmVyLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgdW5SZWdpc3RlcmVkWU46IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogbWVtYmVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhlIHJlcXVlc3RlZCB1c2VyIGhhcyBiZWVuIHVucmVnaXN0ZXJlZC4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gdW5yZWdpc3RlciB0aGlzIHVzZXIgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsb2dpYy9tZW1iZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7OztBQUNBOzs7Ozs7OztBQUVBOzs7Ozs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFNQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOzs7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQURBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBOzs7Ozs7QUFDQTs7O0FBSUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQURBO0FBQ0E7QUFLQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7O0FBR0E7QUFDQTs7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTVGQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/*!****************************************!*\
  !*** ../validators/memberValidator.js ***!
  \****************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.validateMember = undefined;\n\nvar _validator = __webpack_require__(/*! validator */ 8);\n\nvar _validator2 = _interopRequireDefault(_validator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar validateMember = exports.validateMember = function validateMember(_ref) {\n    var username = _ref.username,\n        contactNumber = _ref.contactNumber;\n\n\n    var validationError = '';\n\n    if (username === '' || typeof username === 'number') {\n        validationError += 'Username cannot be empty and it should be a string, should be between 6-12 characters/digits. Cannot contain special characters. ';\n    } else if (!_validator2.default.matches(username, /[a-zA-Z0-9\\s]{6,12}/i)) {\n        validationError += 'Username should be between 6-12 characters/digits. Cannot contain special characters. ';\n    }\n\n    if (typeof contactNumber === 'number') {\n        validationError += 'Contact number should be a string. ';\n    } else if (contactNumber && !_validator2.default.isNumeric(contactNumber)) {\n        validationError += 'Contact number can contain only numbers. ';\n    }\n\n    if (validationError) {\n        throw Error(validationError);\n    }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdmFsaWRhdG9ycy9tZW1iZXJWYWxpZGF0b3IuanM/NGE0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU1lbWJlciA9ICh7IHVzZXJuYW1lLCBjb250YWN0TnVtYmVyIH0pID0+IHtcblxuICAgIGxldCB2YWxpZGF0aW9uRXJyb3IgPSAnJztcblxuICAgIGlmKHVzZXJuYW1lID09PSAnJyB8fCB0eXBlb2YodXNlcm5hbWUpID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gJ1VzZXJuYW1lIGNhbm5vdCBiZSBlbXB0eSBhbmQgaXQgc2hvdWxkIGJlIGEgc3RyaW5nLCBzaG91bGQgYmUgYmV0d2VlbiA2LTEyIGNoYXJhY3RlcnMvZGlnaXRzLiBDYW5ub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuICc7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2YWxpZGF0b3IubWF0Y2hlcyh1c2VybmFtZSwgL1thLXpBLVowLTlcXHNdezYsMTJ9L2kpKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnVXNlcm5hbWUgc2hvdWxkIGJlIGJldHdlZW4gNi0xMiBjaGFyYWN0ZXJzL2RpZ2l0cy4gQ2Fubm90IGNvbnRhaW4gc3BlY2lhbCBjaGFyYWN0ZXJzLiAnO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YoY29udGFjdE51bWJlcikgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnQ29udGFjdCBudW1iZXIgc2hvdWxkIGJlIGEgc3RyaW5nLiAnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250YWN0TnVtYmVyICYmICF2YWxpZGF0b3IuaXNOdW1lcmljKGNvbnRhY3ROdW1iZXIpKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnQ29udGFjdCBudW1iZXIgY2FuIGNvbnRhaW4gb25seSBudW1iZXJzLiAnO1xuICAgIH1cblxuICAgIGlmICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IodmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gdmFsaWRhdG9ycy9tZW1iZXJWYWxpZGF0b3IuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/*!****************************************************!*\
  !*** ../controllers/bookTransactionsController.js ***!
  \****************************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.bookTransactionsRouter = undefined;\n\nvar _express = __webpack_require__(/*! express */ 3);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _handlers = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n\nvar _bookTransactions = __webpack_require__(/*! ../logic/bookTransactions.js */ 21);\n\nvar _bookTransactions2 = _interopRequireDefault(_bookTransactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar bookTransactionsRouter = exports.bookTransactionsRouter = function bookTransactionsRouter() {\n\n    var bookTransactionsRouter = _express2.default.Router();\n\n    bookTransactionsRouter.post('/members/:memberId/books/:bookId', function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            return _context.abrupt('return', (0, _handlers.requestHandler)(req, res, _bookTransactions2.default.handleBookTransactions));\n\n                        case 1:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, undefined);\n        }));\n\n        return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n        };\n    }());\n\n    return bookTransactionsRouter;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vY29udHJvbGxlcnMvYm9va1RyYW5zYWN0aW9uc0NvbnRyb2xsZXIuanM/Y2M5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9oYW5kbGVycy5qcyc7XG5pbXBvcnQgQm9va1RyYW5zYWN0aW9ucyBmcm9tICcuLi9sb2dpYy9ib29rVHJhbnNhY3Rpb25zLmpzJztcblxuZXhwb3J0IGNvbnN0IGJvb2tUcmFuc2FjdGlvbnNSb3V0ZXIgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBib29rVHJhbnNhY3Rpb25zUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAgIGJvb2tUcmFuc2FjdGlvbnNSb3V0ZXIucG9zdCAgICgnL21lbWJlcnMvOm1lbWJlcklkL2Jvb2tzLzpib29rSWQnLCAgICAgICAgICAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va1RyYW5zYWN0aW9ucy5oYW5kbGVCb29rVHJhbnNhY3Rpb25zKSk7XG5cbiAgICByZXR1cm4gYm9va1RyYW5zYWN0aW9uc1JvdXRlcjtcblxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29udHJvbGxlcnMvYm9va1RyYW5zYWN0aW9uc0NvbnRyb2xsZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/*!************************************!*\
  !*** ../logic/bookTransactions.js ***!
  \************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _sequelize = __webpack_require__(/*! sequelize */ 1);\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nvar _db = __webpack_require__(/*! ../db/db.js */ 2);\n\nvar _logger = __webpack_require__(/*! ../logger.js */ 0);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _httpStatusCodes = __webpack_require__(/*! http-status-codes */ 5);\n\nvar _httpStatusCodes2 = _interopRequireDefault(_httpStatusCodes);\n\nvar _book = __webpack_require__(/*! ../logic/book.js */ 7);\n\nvar _book2 = _interopRequireDefault(_book);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BookTransactions = function () {\n    function BookTransactions() {\n        _classCallCheck(this, BookTransactions);\n\n        this.borrowBook = this.borrowBook.bind(this);\n        this.returnBook = this.returnBook.bind(this);\n        this.handleBookTransactions = this.handleBookTransactions.bind(this);\n    }\n\n    _createClass(BookTransactions, [{\n        key: 'borrowBook',\n        value: function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req) {\n                var bookId, memberId, existingMember, bookAvailability, book;\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                bookId = req.params.bookId;\n                                memberId = req.params.memberId;\n                                _context.next = 4;\n                                return _db.db.member.findOne({\n                                    where: {\n                                        id: memberId,\n                                        unRegisteredYN: _defineProperty({}, _sequelize2.default.Op.eq, false)\n                                    }\n                                });\n\n                            case 4:\n                                existingMember = _context.sent;\n\n                                if (existingMember) {\n                                    _context.next = 7;\n                                    break;\n                                }\n\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.UNAUTHORIZED,\n                                    result: 'You must be a registered member to borrow this book. Please register first.'\n                                });\n\n                            case 7:\n                                if (!(existingMember.amountDue > 0)) {\n                                    _context.next = 9;\n                                    break;\n                                }\n\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.FORBIDDEN,\n                                    result: 'Please pay your due amount ' + existingMember.amountDue + ' to borrow this book.'\n                                });\n\n                            case 9:\n                                _context.next = 11;\n                                return _book2.default.checkBookAvailability(bookId);\n\n                            case 11:\n                                bookAvailability = _context.sent;\n\n                                if (!(bookAvailability === true)) {\n                                    _context.next = 30;\n                                    break;\n                                }\n\n                                _context.prev = 13;\n                                _context.next = 16;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: bookId,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 16:\n                                book = _context.sent;\n                                _context.next = 19;\n                                return _db.db.book.update({\n                                    noOfBooksAvailable: book.noOfBooksAvailable - 1\n                                }, {\n                                    where: {\n                                        id: bookId\n                                    }\n                                });\n\n                            case 19:\n                                _context.next = 21;\n                                return _db.db.member.update({\n                                    noOfBooksTaken: existingMember.noOfBooksTaken + 1\n                                }, {\n                                    where: {\n                                        id: memberId\n                                    }\n                                });\n\n                            case 21:\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'One copy of the requested book has been lent to you.'\n                                });\n\n                            case 24:\n                                _context.prev = 24;\n                                _context.t0 = _context['catch'](13);\n\n\n                                _logger2.default.error(_context.t0);\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to lend this book at the moment due to technical issues.',\n                                    error: _context.t0\n                                });\n\n                            case 28:\n                                _context.next = 35;\n                                break;\n\n                            case 30:\n                                if (!(bookAvailability === false)) {\n                                    _context.next = 34;\n                                    break;\n                                }\n\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'This book is not available at the moment.'\n                                });\n\n                            case 34:\n                                return _context.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to lend this book at the moment due to technical issues.'\n                                });\n\n                            case 35:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[13, 24]]);\n            }));\n\n            function borrowBook(_x) {\n                return _ref.apply(this, arguments);\n            }\n\n            return borrowBook;\n        }()\n    }, {\n        key: 'returnBook',\n        value: function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req) {\n                var bookId, memberId, book, existingMember;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                bookId = req.params.bookId;\n                                memberId = req.params.memberId;\n                                _context2.prev = 2;\n                                _context2.next = 5;\n                                return _db.db.book.findOne({\n                                    where: {\n                                        id: bookId,\n                                        deleted: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 5:\n                                book = _context2.sent;\n                                _context2.next = 8;\n                                return _db.db.member.findOne({\n                                    where: {\n                                        id: memberId,\n                                        unRegisteredYN: _defineProperty({}, _sequelize2.default.Op.ne, true)\n                                    }\n                                });\n\n                            case 8:\n                                existingMember = _context2.sent;\n\n                                if (existingMember) {\n                                    _context2.next = 11;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.UNAUTHORIZED,\n                                    result: 'You must be a registered member to return a book. Please register first.'\n                                });\n\n                            case 11:\n                                if (book) {\n                                    _context2.next = 13;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'We did not lend you this book. Please check.'\n                                });\n\n                            case 13:\n                                if (!(existingMember.noOfBooksTaken === 0)) {\n                                    _context2.next = 15;\n                                    break;\n                                }\n\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'You\\'ve returned all your books already. Please check.'\n                                });\n\n                            case 15:\n                                _context2.next = 17;\n                                return _db.db.book.update({\n                                    noOfBooksAvailable: book.noOfBooksAvailable + 1\n                                }, {\n                                    where: {\n                                        id: bookId\n                                    }\n                                });\n\n                            case 17:\n                                _context2.next = 19;\n                                return _db.db.member.update({\n                                    noOfBooksTaken: existingMember.noOfBooksTaken - 1\n                                }, {\n                                    where: {\n                                        id: memberId\n                                    }\n                                });\n\n                            case 19:\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.OK,\n                                    result: 'The return of your book has been accepted.'\n                                });\n\n                            case 22:\n                                _context2.prev = 22;\n                                _context2.t0 = _context2['catch'](2);\n\n\n                                _logger2.default.error(_context2.t0);\n                                return _context2.abrupt('return', {\n                                    status: _httpStatusCodes2.default.INTERNAL_SERVER_ERROR,\n                                    result: 'Unable to accept this book at the moment due to technical issues.',\n                                    error: _context2.t0\n                                });\n\n                            case 26:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, this, [[2, 22]]);\n            }));\n\n            function returnBook(_x2) {\n                return _ref2.apply(this, arguments);\n            }\n\n            return returnBook;\n        }()\n    }, {\n        key: 'handleBookTransactions',\n        value: function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req) {\n                var transactionResult;\n                return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                        switch (_context3.prev = _context3.next) {\n                            case 0:\n                                transactionResult = void 0;\n\n                                if (!(req.body.transactionType === 'BORROW')) {\n                                    _context3.next = 8;\n                                    break;\n                                }\n\n                                _context3.next = 4;\n                                return this.borrowBook(req);\n\n                            case 4:\n                                transactionResult = _context3.sent;\n                                return _context3.abrupt('return', transactionResult);\n\n                            case 8:\n                                if (!(req.body.transactionType === 'RETURN')) {\n                                    _context3.next = 15;\n                                    break;\n                                }\n\n                                _context3.next = 11;\n                                return this.returnBook(req);\n\n                            case 11:\n                                transactionResult = _context3.sent;\n                                return _context3.abrupt('return', transactionResult);\n\n                            case 15:\n                                return _context3.abrupt('return', {\n                                    status: _httpStatusCodes2.default.BAD_REQUEST,\n                                    result: 'Missing or invalid transaction type. Specify either BORROW or RETURN as type. Should be a string.'\n                                });\n\n                            case 16:\n                            case 'end':\n                                return _context3.stop();\n                        }\n                    }\n                }, _callee3, this);\n            }));\n\n            function handleBookTransactions(_x3) {\n                return _ref3.apply(this, arguments);\n            }\n\n            return handleBookTransactions;\n        }()\n    }]);\n\n    return BookTransactions;\n}();\n\n;\n\nvar bookTransactionsInstance = new BookTransactions();\n\nexports.default = bookTransactionsInstance;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbG9naWMvYm9va1RyYW5zYWN0aW9ucy5qcz9iODg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZGIvZGIuanMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXIuanMnO1xuaW1wb3J0IEh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMtY29kZXMnO1xuaW1wb3J0IEJvb2tGdW5jdGlvbnMgZnJvbSAnLi4vbG9naWMvYm9vay5qcyc7XG5cbmNsYXNzIEJvb2tUcmFuc2FjdGlvbnMge1xuXG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLmJvcnJvd0Jvb2sgPSB0aGlzLmJvcnJvd0Jvb2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXR1cm5Cb29rID0gdGhpcy5yZXR1cm5Cb29rLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQm9va1RyYW5zYWN0aW9ucyA9IHRoaXMuaGFuZGxlQm9va1RyYW5zYWN0aW9ucy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGJvcnJvd0Jvb2sgKHJlcSkge1xuXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHJlcS5wYXJhbXMuYm9va0lkO1xuICAgICAgICBjb25zdCBtZW1iZXJJZCA9IHJlcS5wYXJhbXMubWVtYmVySWQ7XG4gICAgXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBpZDogbWVtYmVySWQsXG4gICAgICAgICAgICAgICAgdW5SZWdpc3RlcmVkWU46IHsgW1NlcXVlbGl6ZS5PcC5lcV06IGZhbHNlIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogYFlvdSBtdXN0IGJlIGEgcmVnaXN0ZXJlZCBtZW1iZXIgdG8gYm9ycm93IHRoaXMgYm9vay4gUGxlYXNlIHJlZ2lzdGVyIGZpcnN0LmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleGlzdGluZ01lbWJlci5hbW91bnREdWUgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBgUGxlYXNlIHBheSB5b3VyIGR1ZSBhbW91bnQgJHtleGlzdGluZ01lbWJlci5hbW91bnREdWV9IHRvIGJvcnJvdyB0aGlzIGJvb2suYFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGJvb2tBdmFpbGFiaWxpdHkgPSBhd2FpdCBCb29rRnVuY3Rpb25zLmNoZWNrQm9va0F2YWlsYWJpbGl0eShib29rSWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGJvb2tBdmFpbGFiaWxpdHkgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCBkYi5ib29rLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5ib29rLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogYm9vay5ub09mQm9va3NBdmFpbGFibGUgLSAxXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5tZW1iZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbm9PZkJvb2tzVGFrZW46IGV4aXN0aW5nTWVtYmVyLm5vT2ZCb29rc1Rha2VuICsgMVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtZW1iZXJJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ09uZSBjb3B5IG9mIHRoZSByZXF1ZXN0ZWQgYm9vayBoYXMgYmVlbiBsZW50IHRvIHlvdS4nXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGxlbmQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChib29rQXZhaWxhYmlsaXR5ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhpcyBib29rIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhlIG1vbWVudC4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGxlbmQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmV0dXJuQm9vayAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgYm9va0lkID0gcmVxLnBhcmFtcy5ib29rSWQ7XG4gICAgICAgIGNvbnN0IG1lbWJlcklkID0gcmVxLnBhcmFtcy5tZW1iZXJJZDtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBjb25zdCBib29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogYm9va0lkLFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVkOiB7IFtTZXF1ZWxpemUuT3AubmVdOiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdNZW1iZXIgPSBhd2FpdCBkYi5tZW1iZXIuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG1lbWJlcklkLFxuICAgICAgICAgICAgICAgICAgICB1blJlZ2lzdGVyZWRZTjogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdNZW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGBZb3UgbXVzdCBiZSBhIHJlZ2lzdGVyZWQgbWVtYmVyIHRvIHJldHVybiBhIGJvb2suIFBsZWFzZSByZWdpc3RlciBmaXJzdC5gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWJvb2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ1dlIGRpZCBub3QgbGVuZCB5b3UgdGhpcyBib29rLiBQbGVhc2UgY2hlY2suJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTWVtYmVyLm5vT2ZCb29rc1Rha2VuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLkJBRF9SRVFVRVNULFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdZb3VcXCd2ZSByZXR1cm5lZCBhbGwgeW91ciBib29rcyBhbHJlYWR5LiBQbGVhc2UgY2hlY2suJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgZGIuYm9vay51cGRhdGUoe1xuICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogYm9vay5ub09mQm9va3NBdmFpbGFibGUgKyAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBkYi5tZW1iZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBub09mQm9va3NUYWtlbjogZXhpc3RpbmdNZW1iZXIubm9PZkJvb2tzVGFrZW4gLSAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG1lbWJlcklkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXR1cm4gb2YgeW91ciBib29rIGhhcyBiZWVuIGFjY2VwdGVkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byBhY2NlcHQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVCb29rVHJhbnNhY3Rpb25zIChyZXEpIHtcblxuICAgICAgICBsZXQgdHJhbnNhY3Rpb25SZXN1bHQ7XG5cbiAgICAgICAgaWYgKHJlcS5ib2R5LnRyYW5zYWN0aW9uVHlwZSA9PT0gJ0JPUlJPVycpIHtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXN1bHQgPSBhd2FpdCB0aGlzLmJvcnJvd0Jvb2socmVxKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblJlc3VsdDtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlcS5ib2R5LnRyYW5zYWN0aW9uVHlwZSA9PT0gJ1JFVFVSTicpIHtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnJldHVybkJvb2socmVxKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblJlc3VsdDtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdNaXNzaW5nIG9yIGludmFsaWQgdHJhbnNhY3Rpb24gdHlwZS4gU3BlY2lmeSBlaXRoZXIgQk9SUk9XIG9yIFJFVFVSTiBhcyB0eXBlLiBTaG91bGQgYmUgYSBzdHJpbmcuJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBib29rVHJhbnNhY3Rpb25zSW5zdGFuY2UgPSBuZXcgQm9va1RyYW5zYWN0aW9ucygpO1xuXG5leHBvcnQgZGVmYXVsdCBib29rVHJhbnNhY3Rpb25zSW5zdGFuY2U7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGxvZ2ljL2Jvb2tUcmFuc2FjdGlvbnMuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7Ozs7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7O0FBREE7QUFDQTtBQU1BOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7O0FBS0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7O0FBS0E7QUFDQTs7QUFEQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTs7QUFPQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFEQTtBQUNBOzs7QUFLQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBREE7QUFEQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBOzs7Ozs7QUFPQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BOzs7Ozs7QUFFQTtBQUNBOzs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTs7QUFEQTtBQUNBO0FBTUE7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7QUFLQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7OztBQUtBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7OztBQUtBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQURBO0FBQ0E7O0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFDQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBOzs7Ozs7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQUVBO0FBQ0E7O0FBREE7QUFDQTtBQUNBOztBQUVBOzs7Ozs7QUFFQTtBQUNBOztBQURBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiPzQ2NTciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22\n");

/***/ })
/******/ ]);