/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 8);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!********************!*\
  !*** ../logger.js ***!
  \********************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__athena_app_fabric_logger__ = __webpack_require__(/*! @athena/app-fabric-logger */ 11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__athena_app_fabric_logger___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__athena_app_fabric_logger__);\n\n\nconst logger = new __WEBPACK_IMPORTED_MODULE_0__athena_app_fabric_logger___default.a({\n\tprettyPrint: true,\n\tcolorize: true,\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (logger);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9sb2dnZXIuanM/MTA2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTG9nZ2VyIGZyb20gJ0BhdGhlbmEvYXBwLWZhYnJpYy1sb2dnZXInO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKHtcblx0cHJldHR5UHJpbnQ6IHRydWUsXG5cdGNvbG9yaXplOiB0cnVlLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xvZ2dlci5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!****************************!*\
  !*** external "sequelize" ***!
  \****************************/
/*! dynamic exports provided */
/*! exports used: default */
/***/ (function(module, exports) {

eval("module.exports = require(\"sequelize\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInNlcXVlbGl6ZVwiPzVjZDUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwic2VxdWVsaXplXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3NcIj9kMmQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJleHByZXNzXCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!*******************!*\
  !*** ../db/db.js ***!
  \*******************/
/*! exports provided: db */
/*! exports used: db */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return db; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_book_js__ = __webpack_require__(/*! ../models/book.js */ 12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_member_js__ = __webpack_require__(/*! ../models/member.js */ 5);\n\n\n\n\n\nconst db = {};\n\ndb.transaction = async (f, username) => {\n\tawait db.initializeDb();\n\tawait db.sequelize.transaction(f);\n};\n\nlet initialized = false;\ndb.initializeDb = async () => {\n\tif (!initialized) {\n\t\tlet connectionString = '';\n\t\tif (process.env.NODE_ENV === 'test') {\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__logger_js__[\"a\" /* default */].info('Connecting to test database.');\n\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library_test';\n\t\t}\n\t\telse {\n\t\t\tconnectionString = 'postgres://nvaithyanathan:lkas1234QQ@localhost:5432/library';\n\t\t}\n\n\t\tconst sequelize = new __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a(connectionString, {\n\t\t\tlogging: false,\n\t\t\tquery: {\n\t\t\t\traw: true,\n\t\t\t},\n\t\t});\n\t\tdb.member = Object(__WEBPACK_IMPORTED_MODULE_3__models_member_js__[\"a\" /* default */])(sequelize);\n\t\tdb.book = Object(__WEBPACK_IMPORTED_MODULE_2__models_book_js__[\"a\" /* default */])(sequelize);\n\t\tdb.sequelize = sequelize;\n\t\tinitialized = true;\n\t}\n};\n\ndb.syncSchema = async (force = false) => {\n\ttry {\n\t\tconst params = { force };\t\n\t\tawait db.initializeDb();\n\t\tawait db.member.sync(params);\n\t\tawait db.book.sync(params);\n\t}\n\tcatch (e) {\n\t\t__WEBPACK_IMPORTED_MODULE_1__logger_js__[\"a\" /* default */].error(e);\n\t}\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9kYi9kYi5qcz9jYjNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCBib29rTW9kZWwgZnJvbSAnLi4vbW9kZWxzL2Jvb2suanMnO1xuaW1wb3J0IG1lbWJlck1vZGVsIGZyb20gJy4uL21vZGVscy9tZW1iZXIuanMnO1xuXG5jb25zdCBkYiA9IHt9O1xuXG5kYi50cmFuc2FjdGlvbiA9IGFzeW5jIChmLCB1c2VybmFtZSkgPT4ge1xuXHRhd2FpdCBkYi5pbml0aWFsaXplRGIoKTtcblx0YXdhaXQgZGIuc2VxdWVsaXplLnRyYW5zYWN0aW9uKGYpO1xufTtcblxubGV0IGluaXRpYWxpemVkID0gZmFsc2U7XG5kYi5pbml0aWFsaXplRGIgPSBhc3luYyAoKSA9PiB7XG5cdGlmICghaW5pdGlhbGl6ZWQpIHtcblx0XHRsZXQgY29ubmVjdGlvblN0cmluZyA9ICcnO1xuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG5cdFx0XHRsb2dnZXIuaW5mbygnQ29ubmVjdGluZyB0byB0ZXN0IGRhdGFiYXNlLicpO1xuXHRcdFx0Y29ubmVjdGlvblN0cmluZyA9ICdwb3N0Z3JlczovL252YWl0aHlhbmF0aGFuOmxrYXMxMjM0UVFAbG9jYWxob3N0OjU0MzIvbGlicmFyeV90ZXN0Jztcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25uZWN0aW9uU3RyaW5nID0gJ3Bvc3RncmVzOi8vbnZhaXRoeWFuYXRoYW46bGthczEyMzRRUUBsb2NhbGhvc3Q6NTQzMi9saWJyYXJ5Jztcblx0XHR9XG5cblx0XHRjb25zdCBzZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbm5lY3Rpb25TdHJpbmcsIHtcblx0XHRcdGxvZ2dpbmc6IGZhbHNlLFxuXHRcdFx0cXVlcnk6IHtcblx0XHRcdFx0cmF3OiB0cnVlLFxuXHRcdFx0fSxcblx0XHR9KTtcblx0XHRkYi5tZW1iZXIgPSBtZW1iZXJNb2RlbChzZXF1ZWxpemUpO1xuXHRcdGRiLmJvb2sgPSBib29rTW9kZWwoc2VxdWVsaXplKTtcblx0XHRkYi5zZXF1ZWxpemUgPSBzZXF1ZWxpemU7XG5cdFx0aW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHR9XG59O1xuXG5kYi5zeW5jU2NoZW1hID0gYXN5bmMgKGZvcmNlID0gZmFsc2UpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBwYXJhbXMgPSB7IGZvcmNlIH07XHRcblx0XHRhd2FpdCBkYi5pbml0aWFsaXplRGIoKTtcblx0XHRhd2FpdCBkYi5tZW1iZXIuc3luYyhwYXJhbXMpO1xuXHRcdGF3YWl0IGRiLmJvb2suc3luYyhwYXJhbXMpO1xuXHR9XG5cdGNhdGNoIChlKSB7XG5cdFx0bG9nZ2VyLmVycm9yKGUpO1xuXHR9XG59O1xuXG5leHBvcnQgeyBkYiB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vZGIvZGIuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!*********************************!*\
  !*** ../middleware/handlers.js ***!
  \*********************************/
/*! exports provided: requestHandler */
/*! exports used: requestHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n\n\nconst requestHandler = async (req, res, requestHandlerFunction) => {\n   \n    let result = {};\n\n    try {\n\n        result = await requestHandlerFunction(req);\n\n    }\n    catch (error) {\n\n        __WEBPACK_IMPORTED_MODULE_0__logger_js__[\"a\" /* default */].error(error);\n       \n        result.status = 400;\n        result.result = 'Unable to process your request.'\n\n        if (error) {\n            result.error = error.toString();\n        }\n        \n    }\n   \n    let jsonToReturn = {};\n\n    if (result.json) {\n        jsonToReturn = result.json;\n    }\n    else {\n        jsonToReturn = {\n            result: result.result,\n        };\n\n        if (result.error) {\n            jsonToReturn.error = result.error.toString();\n        }\n    }\n    __WEBPACK_IMPORTED_MODULE_0__logger_js__[\"a\" /* default */].info(JSON.stringify(jsonToReturn));\n    res.status(result.status).json(jsonToReturn);\n\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = requestHandler;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9taWRkbGV3YXJlL2hhbmRsZXJzLmpzPzRjN2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXIuanMnO1xuXG5leHBvcnQgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMsIHJlcXVlc3RIYW5kbGVyRnVuY3Rpb24pID0+IHtcbiAgIFxuICAgIGxldCByZXN1bHQgPSB7fTtcblxuICAgIHRyeSB7XG5cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVxdWVzdEhhbmRsZXJGdW5jdGlvbihyZXEpO1xuXG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgXG4gICAgICAgIHJlc3VsdC5zdGF0dXMgPSA0MDA7XG4gICAgICAgIHJlc3VsdC5yZXN1bHQgPSAnVW5hYmxlIHRvIHByb2Nlc3MgeW91ciByZXF1ZXN0LidcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgXG4gICAgbGV0IGpzb25Ub1JldHVybiA9IHt9O1xuXG4gICAgaWYgKHJlc3VsdC5qc29uKSB7XG4gICAgICAgIGpzb25Ub1JldHVybiA9IHJlc3VsdC5qc29uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAganNvblRvUmV0dXJuID0ge1xuICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQucmVzdWx0LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgIGpzb25Ub1JldHVybi5lcnJvciA9IHJlc3VsdC5lcnJvci50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvZ2dlci5pbmZvKEpTT04uc3RyaW5naWZ5KGpzb25Ub1JldHVybikpO1xuICAgIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1cykuanNvbihqc29uVG9SZXR1cm4pO1xuXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9taWRkbGV3YXJlL2hhbmRsZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!***************************!*\
  !*** ../models/member.js ***!
  \***************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ((sequelizeInstance) => sequelizeInstance.define('member', {\n    username: {\n        field: 'username',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(20),\n        notNull: true\n    },\n    noOfBooksTaken: {\n        field: 'noofbookstaken',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.INTEGER,\n        notNull: true,\n        defaultValue: 0\n    },\n    contactNumber: {\n        field: 'contactnumber',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(10)\n    },\n    amountDue: {\n        field: 'amountdue',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.FLOAT,\n        notNull: true,\n        defaultValue: 0\n    },\n    joinedOn: {\n        field: 'joinedon',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.DATE,\n        notNull: true,\n        defaultValue: function () {\n            const date = new Date();\n            return date.getDate();\n        }\n    },\n    unRegisteredYN: {\n        field: 'unregisteredyn',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.BOOLEAN,\n        defaultValue: false\n    }   \n}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9tb2RlbHMvbWVtYmVyLmpzPzE5MmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VxdWVsaXplSW5zdGFuY2UpID0+IHNlcXVlbGl6ZUluc3RhbmNlLmRlZmluZSgnbWVtYmVyJywge1xuICAgIHVzZXJuYW1lOiB7XG4gICAgICAgIGZpZWxkOiAndXNlcm5hbWUnLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HKDIwKSxcbiAgICAgICAgbm90TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgbm9PZkJvb2tzVGFrZW46IHtcbiAgICAgICAgZmllbGQ6ICdub29mYm9va3N0YWtlbicsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSLFxuICAgICAgICBub3ROdWxsOiB0cnVlLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IDBcbiAgICB9LFxuICAgIGNvbnRhY3ROdW1iZXI6IHtcbiAgICAgICAgZmllbGQ6ICdjb250YWN0bnVtYmVyJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygxMClcbiAgICB9LFxuICAgIGFtb3VudER1ZToge1xuICAgICAgICBmaWVsZDogJ2Ftb3VudGR1ZScsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5GTE9BVCxcbiAgICAgICAgbm90TnVsbDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiAwXG4gICAgfSxcbiAgICBqb2luZWRPbjoge1xuICAgICAgICBmaWVsZDogJ2pvaW5lZG9uJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkRBVEUsXG4gICAgICAgIG5vdE51bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHVuUmVnaXN0ZXJlZFlOOiB7XG4gICAgICAgIGZpZWxkOiAndW5yZWdpc3RlcmVkeW4nLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuQk9PTEVBTixcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBmYWxzZVxuICAgIH0gICBcbn0pO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9tb2RlbHMvbWVtYmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!************************!*\
  !*** ../logic/book.js ***!
  \************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__db_db_js__ = __webpack_require__(/*! ../db/db.js */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes__ = __webpack_require__(/*! http-status-codes */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_http_status_codes__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__validators_bookValidator_js__ = __webpack_require__(/*! ../validators/bookValidator.js */ 20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__constants_bookProperties_js__ = __webpack_require__(/*! ../constants/bookProperties.js */ 21);\n\n\n\n\n\n\n\nclass Book {\n\n    constructor () {\n        // Need 'this' to be defined to access checkBookAvailability within borrowBook.\n        // All methods were static previously, but 'this' was undefined inside those methods when the methods were passed as arguments to the handler.\n        this.checkBookAvailability = this.checkBookAvailability.bind(this);\n        this.getBookAvailability = this.getBookAvailability.bind(this);\n    }\n\n    async addBook (req) {\n\n        const bookToAdd = req.body;\n        let createdBook;\n        let existingBook;\n        \n        Object(__WEBPACK_IMPORTED_MODULE_4__validators_bookValidator_js__[\"a\" /* validateBook */])(bookToAdd, { operation: 'add' });\n\n        try {\n\n            existingBook = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findAll({\n                where: {\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true },\n                    name,\n                    author,\n                    edition\n                }\n            });\n\n            if (existingBook.length === 0) {\n                createdBook = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.create(Object.assign(bookToAdd, { noOfBooksAvailable: 1 }));\n            }\n            else {\n\n                await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.update({\n                    noOfBooksAvailable: existingBook[0].noOfBooksAvailable + 1\n                }, {\n                    where: {\n                        id: existingBook[0].id\n                    }\n                });\n\n                createdBook = existingBook[0];\n                createdBook.noOfBooksAvailable += 1;\n            }\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.CREATED,\n                result: 'This book has been added to our library.'\n            };\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to create books at the moment.',\n                error\n            }\n\n        }\n    }\n\n    async getAllBooks (req) {\n\n        let allBooks;\n        try {\n\n            allBooks = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findAll({\n                where: {\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                json: allBooks\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to fetch books at the moment.',\n                error\n            }\n\n        }\n    }\n\n    async getBook (req) {\n\n        let book;\n        try {\n\n            book = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                where: {\n                    id: req.params.id,\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            })\n\n            if(!book) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                    result: 'The requested book is not available now.'\n                }\n            }\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                json: book\n            }\n            \n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to get this book at the moment.',\n                error\n            }\n\n        }\n    }\n\n    async checkBookAvailability (id) {\n        try {\n\n            const existingBook = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                where: {\n                    id: id,\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n           \n            if (!existingBook) {\n               return false;\n            }\n \n            const availabilityStatus = existingBook.noOfBooksAvailable > 0 ? true : false;\n\n            return availabilityStatus;\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return 'ERROR';\n\n        }\n    }\n\n    async updateBook (req) {\n\n        let propertiesToUpdate = {};\n\n        for (const key of Object.keys(req.body)) {\n            if (__WEBPACK_IMPORTED_MODULE_5__constants_bookProperties_js__[\"a\" /* bookProperties */][key]) {\n                propertiesToUpdate[key] = req.body[key];\n            }\n        }\n\n        const propertyKeys = Object.keys(propertiesToUpdate);\n\n        if (propertyKeys.length > 0) {\n            Object(__WEBPACK_IMPORTED_MODULE_4__validators_bookValidator_js__[\"a\" /* validateBook */])(propertiesToUpdate, { operation: 'update' });\n        }\n        else {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                result: 'Received no properties to update.'\n            }\n        }\n\n        try {\n\n            // Move the below query into a separate sub, as it is common for many subs.\n            const existingBook = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                where: {\n                    id: req.params.id,\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n\n            if (!existingBook) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                    result: 'The requested book is not available to be updated.'\n                }\n            }\n\n            await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.update(propertiesToUpdate, {\n                where: {\n                    id: req.params.id\n                }\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                result: 'The properties of this book have been updated.'\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to update this book at the moment.',\n                error\n            }\n\n        }\n    }\n\n    async deleteBook (req) {\n\n        try {\n\n            const existingBook = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                where: {\n                    id: req.params.id,\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n\n            if (!existingBook) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                    result: 'The requested book is not available to be deleted.'\n                }\n            }\n\n            await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.update({\n              deleted: true\n            }, {\n                where: {\n                    id: req.params.id\n                }\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                result: 'The requested book has been marked as deleted in the library records.'\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to delete this book at the moment.',\n                error\n            }\n        }\n    }\n\n    async getBookAvailability (req) {\n       \n        const availability = await this.checkBookAvailability(req.params.id);\n\n        if (availability === 'ERROR') {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to check availability at the moment.'\n            }\n        }\n        else {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                json: { availability }\n            }\n        }\n    }\n};\n\nconst bookInstance = new Book();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (bookInstance);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi9sb2dpYy9ib29rLmpzPzkzODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9kYi9kYi5qcyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZUJvb2sgfSBmcm9tICcuLi92YWxpZGF0b3JzL2Jvb2tWYWxpZGF0b3IuanMnO1xuaW1wb3J0IHsgYm9va1Byb3BlcnRpZXMgfSBmcm9tICcuLi9jb25zdGFudHMvYm9va1Byb3BlcnRpZXMuanMnO1xuXG5jbGFzcyBCb29rIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgLy8gTmVlZCAndGhpcycgdG8gYmUgZGVmaW5lZCB0byBhY2Nlc3MgY2hlY2tCb29rQXZhaWxhYmlsaXR5IHdpdGhpbiBib3Jyb3dCb29rLlxuICAgICAgICAvLyBBbGwgbWV0aG9kcyB3ZXJlIHN0YXRpYyBwcmV2aW91c2x5LCBidXQgJ3RoaXMnIHdhcyB1bmRlZmluZWQgaW5zaWRlIHRob3NlIG1ldGhvZHMgd2hlbiB0aGUgbWV0aG9kcyB3ZXJlIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIGhhbmRsZXIuXG4gICAgICAgIHRoaXMuY2hlY2tCb29rQXZhaWxhYmlsaXR5ID0gdGhpcy5jaGVja0Jvb2tBdmFpbGFiaWxpdHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRCb29rQXZhaWxhYmlsaXR5ID0gdGhpcy5nZXRCb29rQXZhaWxhYmlsaXR5LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkQm9vayAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgYm9va1RvQWRkID0gcmVxLmJvZHk7XG4gICAgICAgIGxldCBjcmVhdGVkQm9vaztcbiAgICAgICAgbGV0IGV4aXN0aW5nQm9vaztcbiAgICAgICAgXG4gICAgICAgIHZhbGlkYXRlQm9vayhib29rVG9BZGQsIHsgb3BlcmF0aW9uOiAnYWRkJyB9KTtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBleGlzdGluZ0Jvb2sgPSBhd2FpdCBkYi5ib29rLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICBlZGl0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Jvb2subGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlZEJvb2sgPSBhd2FpdCBkYi5ib29rLmNyZWF0ZShPYmplY3QuYXNzaWduKGJvb2tUb0FkZCwgeyBub09mQm9va3NBdmFpbGFibGU6IDEgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5ib29rLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogZXhpc3RpbmdCb29rWzBdLm5vT2ZCb29rc0F2YWlsYWJsZSArIDFcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogZXhpc3RpbmdCb29rWzBdLmlkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNyZWF0ZWRCb29rID0gZXhpc3RpbmdCb29rWzBdO1xuICAgICAgICAgICAgICAgIGNyZWF0ZWRCb29rLm5vT2ZCb29rc0F2YWlsYWJsZSArPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5DUkVBVEVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoaXMgYm9vayBoYXMgYmVlbiBhZGRlZCB0byBvdXIgbGlicmFyeS4nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGNyZWF0ZSBib29rcyBhdCB0aGUgbW9tZW50LicsXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsQm9va3MgKHJlcSkge1xuXG4gICAgICAgIGxldCBhbGxCb29rcztcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgYWxsQm9va3MgPSBhd2FpdCBkYi5ib29rLmZpbmRBbGwoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5PSyxcbiAgICAgICAgICAgICAgICBqc29uOiBhbGxCb29rc1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGZldGNoIGJvb2tzIGF0IHRoZSBtb21lbnQuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRCb29rIChyZXEpIHtcblxuICAgICAgICBsZXQgYm9vaztcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgYm9vayA9IGF3YWl0IGRiLmJvb2suZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcS5wYXJhbXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIGlmKCFib29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSBub3cuJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAganNvbjogYm9va1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGdldCB0aGlzIGJvb2sgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrQm9va0F2YWlsYWJpbGl0eSAoaWQpIHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gXG4gICAgICAgICAgICBjb25zdCBhdmFpbGFiaWxpdHlTdGF0dXMgPSBleGlzdGluZ0Jvb2subm9PZkJvb2tzQXZhaWxhYmxlID4gMCA/IHRydWUgOiBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIGF2YWlsYWJpbGl0eVN0YXR1cztcblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuICdFUlJPUic7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUJvb2sgKHJlcSkge1xuXG4gICAgICAgIGxldCBwcm9wZXJ0aWVzVG9VcGRhdGUgPSB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZXEuYm9keSkpIHtcbiAgICAgICAgICAgIGlmIChib29rUHJvcGVydGllc1trZXldKSB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1RvVXBkYXRlW2tleV0gPSByZXEuYm9keVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvcGVydHlLZXlzID0gT2JqZWN0LmtleXMocHJvcGVydGllc1RvVXBkYXRlKTtcblxuICAgICAgICBpZiAocHJvcGVydHlLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhbGlkYXRlQm9vayhwcm9wZXJ0aWVzVG9VcGRhdGUsIHsgb3BlcmF0aW9uOiAndXBkYXRlJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLkJBRF9SRVFVRVNULFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1JlY2VpdmVkIG5vIHByb3BlcnRpZXMgdG8gdXBkYXRlLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIC8vIE1vdmUgdGhlIGJlbG93IHF1ZXJ5IGludG8gYSBzZXBhcmF0ZSBzdWIsIGFzIGl0IGlzIGNvbW1vbiBmb3IgbWFueSBzdWJzLlxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSB0byBiZSB1cGRhdGVkLidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGRiLmJvb2sudXBkYXRlKHByb3BlcnRpZXNUb1VwZGF0ZSwge1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgYm9vayBoYXZlIGJlZW4gdXBkYXRlZC4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gdXBkYXRlIHRoaXMgYm9vayBhdCB0aGUgbW9tZW50LicsXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlQm9vayAocmVxKSB7XG5cbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCb29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVxLnBhcmFtcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdCb29rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdUaGUgcmVxdWVzdGVkIGJvb2sgaXMgbm90IGF2YWlsYWJsZSB0byBiZSBkZWxldGVkLidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGRiLmJvb2sudXBkYXRlKHtcbiAgICAgICAgICAgICAgZGVsZXRlZDogdHJ1ZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXEucGFyYW1zLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXF1ZXN0ZWQgYm9vayBoYXMgYmVlbiBtYXJrZWQgYXMgZGVsZXRlZCBpbiB0aGUgbGlicmFyeSByZWNvcmRzLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byBkZWxldGUgdGhpcyBib29rIGF0IHRoZSBtb21lbnQuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Qm9va0F2YWlsYWJpbGl0eSAocmVxKSB7XG4gICAgICAgXG4gICAgICAgIGNvbnN0IGF2YWlsYWJpbGl0eSA9IGF3YWl0IHRoaXMuY2hlY2tCb29rQXZhaWxhYmlsaXR5KHJlcS5wYXJhbXMuaWQpO1xuXG4gICAgICAgIGlmIChhdmFpbGFiaWxpdHkgPT09ICdFUlJPUicpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gY2hlY2sgYXZhaWxhYmlsaXR5IGF0IHRoZSBtb21lbnQuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAganNvbjogeyBhdmFpbGFiaWxpdHkgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuY29uc3QgYm9va0luc3RhbmNlID0gbmV3IEJvb2soKTtcblxuZXhwb3J0IGRlZmF1bHQgYm9va0luc3RhbmNlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xvZ2ljL2Jvb2suanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!************************************!*\
  !*** external "http-status-codes" ***!
  \************************************/
/*! dynamic exports provided */
/*! exports used: default */
/***/ (function(module, exports) {

eval("module.exports = require(\"http-status-codes\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImh0dHAtc3RhdHVzLWNvZGVzXCI/MjQ2MyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImh0dHAtc3RhdHVzLWNvZGVzXCJcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!*************************!*\
  !*** multi ./server.js ***!
  \*************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./server.js */9);


/***/ }),
/* 9 */
/*!*******************!*\
  !*** ./server.js ***!
  \*******************/
/*! exports provided: default */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__db_db_js__ = __webpack_require__(/*! ../db/db.js */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__controllers_bookController_js__ = __webpack_require__(/*! ../controllers/bookController.js */ 13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__controllers_memberController_js__ = __webpack_require__(/*! ../controllers/memberController.js */ 14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__controllers_bookTransactionsController_js__ = __webpack_require__(/*! ../controllers/bookTransactionsController.js */ 18);\nconst express = __webpack_require__(/*! express */ 2);\r\nconst bodyParser = __webpack_require__(/*! body-parser */ 10);\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst app = express();\r\nconst port = 8080;\r\n\r\napp.use((req, res, next) => {\r\n  __WEBPACK_IMPORTED_MODULE_0__logger_js__[\"a\" /* default */].info(`Incoming request.`);\r\n  next();\r\n});\r\n\r\napp.use(bodyParser.json());\r\n\r\napp.use('/api', Object(__WEBPACK_IMPORTED_MODULE_2__controllers_bookController_js__[\"a\" /* bookRouter */])());\r\napp.use('/api', Object(__WEBPACK_IMPORTED_MODULE_3__controllers_memberController_js__[\"a\" /* memberRouter */])());\r\napp.use('/api', Object(__WEBPACK_IMPORTED_MODULE_4__controllers_bookTransactionsController_js__[\"a\" /* bookTransactionsRouter */])());\r\n\r\nif (process.env.NODE_ENV !== 'test') {\r\n\r\n  app.listen(port, () => {\r\n    __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].syncSchema();\r\n    console.log(`Server is running on port ${port}.`);\r\n  })\r\n  \r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (app);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NlcnZlci5qcz83YWEyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZGIvZGIuanMnXHJcbmltcG9ydCB7IGJvb2tSb3V0ZXIgfSBmcm9tICcuLi9jb250cm9sbGVycy9ib29rQ29udHJvbGxlci5qcyc7XHJcbmltcG9ydCB7IG1lbWJlclJvdXRlciB9IGZyb20gJy4uL2NvbnRyb2xsZXJzL21lbWJlckNvbnRyb2xsZXIuanMnO1xyXG5pbXBvcnQgeyBib29rVHJhbnNhY3Rpb25zUm91dGVyIH0gZnJvbSAnLi4vY29udHJvbGxlcnMvYm9va1RyYW5zYWN0aW9uc0NvbnRyb2xsZXIuanMnO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBwb3J0ID0gODA4MDtcclxuXHJcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgbG9nZ2VyLmluZm8oYEluY29taW5nIHJlcXVlc3QuYCk7XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5cclxuYXBwLnVzZSgnL2FwaScsIGJvb2tSb3V0ZXIoKSk7XHJcbmFwcC51c2UoJy9hcGknLCBtZW1iZXJSb3V0ZXIoKSk7XHJcbmFwcC51c2UoJy9hcGknLCBib29rVHJhbnNhY3Rpb25zUm91dGVyKCkpO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcclxuXHJcbiAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgICBkYi5zeW5jU2NoZW1hKCk7XHJcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9LmApO1xyXG4gIH0pXHJcbiAgXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwcDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NlcnZlci5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiPzQ2NTciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!********************************************!*\
  !*** external "@athena/app-fabric-logger" ***!
  \********************************************/
/*! dynamic exports provided */
/*! exports used: default */
/***/ (function(module, exports) {

eval("module.exports = require(\"@athena/app-fabric-logger\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAYXRoZW5hL2FwcC1mYWJyaWMtbG9nZ2VyXCI/YjRkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAYXRoZW5hL2FwcC1mYWJyaWMtbG9nZ2VyXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGF0aGVuYS9hcHAtZmFicmljLWxvZ2dlclwiXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!*************************!*\
  !*** ../models/book.js ***!
  \*************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__member_js__ = __webpack_require__(/*! ./member.js */ 5);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ((sequelizeInstance) => sequelizeInstance.define('book', {\n    name: {\n        field: 'name',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(20),\n        notNull: true\n    },\n    author: {\n        field: 'author',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(20),\n        notNull: true\n    },\n    publishedDate: {\n        field: 'publisheddate',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.DATE\n    },\n    edition: {\n        field: 'edition',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(2)\n    },\n    shelfNumber: {\n        field: 'shelfnumber',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.STRING(2),\n        notNull: true\n    },\n    deleted: {\n        field: 'deleted',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.BOOLEAN,\n        notNull: true,\n        defaultValue: false\n    },\n    noOfBooksAvailable: {\n        field: 'noofbooksavailable',\n        type: __WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.INTEGER,\n        notNull: true\n    }\n}, {\n    hooks: {\n        beforeValidate: function (bookInstance) {\n            console.log('Check what changed instead of updating all the fields passed in.');\n            // console.log(bookInstance.changed());\n            if (1) {\n                // console.log('Skipping update because nothing has changed.');\n                return true;\n            }\n        }\n    }\n}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbW9kZWxzL2Jvb2suanM/MTYyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2VxdWVsaXplIGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgbWVtYmVyIGZyb20gJy4vbWVtYmVyLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcXVlbGl6ZUluc3RhbmNlKSA9PiBzZXF1ZWxpemVJbnN0YW5jZS5kZWZpbmUoJ2Jvb2snLCB7XG4gICAgbmFtZToge1xuICAgICAgICBmaWVsZDogJ25hbWUnLFxuICAgICAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HKDIwKSxcbiAgICAgICAgbm90TnVsbDogdHJ1ZVxuICAgIH0sXG4gICAgYXV0aG9yOiB7XG4gICAgICAgIGZpZWxkOiAnYXV0aG9yJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygyMCksXG4gICAgICAgIG5vdE51bGw6IHRydWVcbiAgICB9LFxuICAgIHB1Ymxpc2hlZERhdGU6IHtcbiAgICAgICAgZmllbGQ6ICdwdWJsaXNoZWRkYXRlJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkRBVEVcbiAgICB9LFxuICAgIGVkaXRpb246IHtcbiAgICAgICAgZmllbGQ6ICdlZGl0aW9uJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLlNUUklORygyKVxuICAgIH0sXG4gICAgc2hlbGZOdW1iZXI6IHtcbiAgICAgICAgZmllbGQ6ICdzaGVsZm51bWJlcicsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcoMiksXG4gICAgICAgIG5vdE51bGw6IHRydWVcbiAgICB9LFxuICAgIGRlbGV0ZWQ6IHtcbiAgICAgICAgZmllbGQ6ICdkZWxldGVkJyxcbiAgICAgICAgdHlwZTogU2VxdWVsaXplLkJPT0xFQU4sXG4gICAgICAgIG5vdE51bGw6IHRydWUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogZmFsc2VcbiAgICB9LFxuICAgIG5vT2ZCb29rc0F2YWlsYWJsZToge1xuICAgICAgICBmaWVsZDogJ25vb2Zib29rc2F2YWlsYWJsZScsXG4gICAgICAgIHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSLFxuICAgICAgICBub3ROdWxsOiB0cnVlXG4gICAgfVxufSwge1xuICAgIGhvb2tzOiB7XG4gICAgICAgIGJlZm9yZVZhbGlkYXRlOiBmdW5jdGlvbiAoYm9va0luc3RhbmNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2sgd2hhdCBjaGFuZ2VkIGluc3RlYWQgb2YgdXBkYXRpbmcgYWxsIHRoZSBmaWVsZHMgcGFzc2VkIGluLicpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYm9va0luc3RhbmNlLmNoYW5nZWQoKSk7XG4gICAgICAgICAgICBpZiAoMSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTa2lwcGluZyB1cGRhdGUgYmVjYXVzZSBub3RoaW5nIGhhcyBjaGFuZ2VkLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL21vZGVscy9ib29rLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!****************************************!*\
  !*** ../controllers/bookController.js ***!
  \****************************************/
/*! exports provided: bookRouter */
/*! exports used: bookRouter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express__ = __webpack_require__(/*! express */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_express__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__ = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logic_book_js__ = __webpack_require__(/*! ../logic/book.js */ 6);\n\n\n\n\nconst bookRouter = () => {\n\n    const bookRouter = __WEBPACK_IMPORTED_MODULE_0_express___default.a.Router();\n\n    bookRouter.post   ('/books',                  async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].addBook));\n    bookRouter.get    ('/books',                  async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].getAllBooks));\n    bookRouter.get    ('/books/:id',              async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].getBook));\n    bookRouter.get    ('/books/availability/:id', async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].getBookAvailability));\n    bookRouter.patch  ('/books/:id',              async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].updateBook));\n    bookRouter.delete ('/books/:id',              async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_book_js__[\"a\" /* default */].deleteBook));\n\n    return bookRouter;\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = bookRouter;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vY29udHJvbGxlcnMvYm9va0NvbnRyb2xsZXIuanM/ZTcwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9oYW5kbGVycy5qcyc7XG5pbXBvcnQgQm9va0Z1bmN0aW9ucyBmcm9tICcuLi9sb2dpYy9ib29rLmpzJztcblxuZXhwb3J0IGNvbnN0IGJvb2tSb3V0ZXIgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBib29rUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAgIGJvb2tSb3V0ZXIucG9zdCAgICgnL2Jvb2tzJywgICAgICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmFkZEJvb2spKTtcbiAgICBib29rUm91dGVyLmdldCAgICAoJy9ib29rcycsICAgICAgICAgICAgICAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va0Z1bmN0aW9ucy5nZXRBbGxCb29rcykpO1xuICAgIGJvb2tSb3V0ZXIuZ2V0ICAgICgnL2Jvb2tzLzppZCcsICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmdldEJvb2spKTtcbiAgICBib29rUm91dGVyLmdldCAgICAoJy9ib29rcy9hdmFpbGFiaWxpdHkvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va0Z1bmN0aW9ucy5nZXRCb29rQXZhaWxhYmlsaXR5KSk7XG4gICAgYm9va1JvdXRlci5wYXRjaCAgKCcvYm9va3MvOmlkJywgICAgICAgICAgICAgIGFzeW5jIChyZXEsIHJlcykgPT4gcmVxdWVzdEhhbmRsZXIocmVxLCByZXMsIEJvb2tGdW5jdGlvbnMudXBkYXRlQm9vaykpO1xuICAgIGJvb2tSb3V0ZXIuZGVsZXRlICgnL2Jvb2tzLzppZCcsICAgICAgICAgICAgICBhc3luYyAocmVxLCByZXMpID0+IHJlcXVlc3RIYW5kbGVyKHJlcSwgcmVzLCBCb29rRnVuY3Rpb25zLmRlbGV0ZUJvb2spKTtcblxuICAgIHJldHVybiBib29rUm91dGVyO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vY29udHJvbGxlcnMvYm9va0NvbnRyb2xsZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!******************************************!*\
  !*** ../controllers/memberController.js ***!
  \******************************************/
/*! exports provided: memberRouter */
/*! exports used: memberRouter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express__ = __webpack_require__(/*! express */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_express__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__ = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logic_member_js__ = __webpack_require__(/*! ../logic/member.js */ 15);\n\n\n\n\nconst memberRouter = () => {\n\n    const memberRouter = __WEBPACK_IMPORTED_MODULE_0_express___default.a.Router();\n\n    memberRouter.post   ('/members',     async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_member_js__[\"a\" /* default */].registerMember));\n    memberRouter.delete ('/members/:id', async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_member_js__[\"a\" /* default */].unRegisterMember));\n\n    return memberRouter;\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = memberRouter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vY29udHJvbGxlcnMvbWVtYmVyQ29udHJvbGxlci5qcz84NjlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgcmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuLi9taWRkbGV3YXJlL2hhbmRsZXJzLmpzJztcbmltcG9ydCBNZW1iZXJGdW5jdGlvbnMgZnJvbSAnLi4vbG9naWMvbWVtYmVyLmpzJztcblxuZXhwb3J0IGNvbnN0IG1lbWJlclJvdXRlciA9ICgpID0+IHtcblxuICAgIGNvbnN0IG1lbWJlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbiAgICBtZW1iZXJSb3V0ZXIucG9zdCAgICgnL21lbWJlcnMnLCAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgTWVtYmVyRnVuY3Rpb25zLnJlZ2lzdGVyTWVtYmVyKSk7XG4gICAgbWVtYmVyUm91dGVyLmRlbGV0ZSAoJy9tZW1iZXJzLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gcmVxdWVzdEhhbmRsZXIocmVxLCByZXMsIE1lbWJlckZ1bmN0aW9ucy51blJlZ2lzdGVyTWVtYmVyKSk7XG5cbiAgICByZXR1cm4gbWVtYmVyUm91dGVyO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9jb250cm9sbGVycy9tZW1iZXJDb250cm9sbGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/*!**************************!*\
  !*** ../logic/member.js ***!
  \**************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__db_db_js__ = __webpack_require__(/*! ../db/db.js */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes__ = __webpack_require__(/*! http-status-codes */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_http_status_codes__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__validators_memberValidator_js__ = __webpack_require__(/*! ../validators/memberValidator.js */ 16);\n\n\n\n\n\n\nclass Member {\n\n    static async registerMember (req) {\n\n        const { username = '', contactNumber = '' } = req.body;\n        let createdUser;\n        let existingMember;\n\n        Object(__WEBPACK_IMPORTED_MODULE_4__validators_memberValidator_js__[\"a\" /* validateMember */])({ username, contactNumber });\n\n        try {\n\n            existingMember = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.findOne({\n                where: {\n                    username,\n                    unRegisteredYN: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n\n            if (existingMember) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                    result: 'The requested user is already a registered member.'\n                }\n            }\n\n            createdUser = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.create({\n                username,\n                contactNumber\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.CREATED,\n                result: 'The requested user has been registered.'\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to register this user at the moment.',\n                error\n            }\n\n        }\n    }\n\n    static async unRegisterMember (req) {\n        const memberId = req.params.id;\n\n        try {\n\n            const existingMember = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.findOne({\n                where: { \n                    id: memberId\n                }\n            });\n\n            if (!existingMember) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                    result: 'This user is not already registered with us.'\n                }\n            }\n\n            if (existingMember.unRegisteredYN) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                    result: 'This user has already unregsitered with us.'\n                }\n            };\n\n            await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.update({\n                unRegisteredYN: true\n            }, {\n                where: {\n                    id: memberId\n                }\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                result: 'The requested user has been unregistered.'\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to unregister this user at the moment.',\n                error\n            }\n\n        }\n    }\n\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Member;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbG9naWMvbWVtYmVyLmpzP2JkM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9kYi9kYi5qcyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgSHR0cFN0YXR1cyBmcm9tICdodHRwLXN0YXR1cy1jb2Rlcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZU1lbWJlciB9IGZyb20gJy4uL3ZhbGlkYXRvcnMvbWVtYmVyVmFsaWRhdG9yLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWVtYmVyIHtcblxuICAgIHN0YXRpYyBhc3luYyByZWdpc3Rlck1lbWJlciAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgeyB1c2VybmFtZSA9ICcnLCBjb250YWN0TnVtYmVyID0gJycgfSA9IHJlcS5ib2R5O1xuICAgICAgICBsZXQgY3JlYXRlZFVzZXI7XG4gICAgICAgIGxldCBleGlzdGluZ01lbWJlcjtcblxuICAgICAgICB2YWxpZGF0ZU1lbWJlcih7IHVzZXJuYW1lLCBjb250YWN0TnVtYmVyIH0pO1xuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICB1blJlZ2lzdGVyZWRZTjogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhlIHJlcXVlc3RlZCB1c2VyIGlzIGFscmVhZHkgYSByZWdpc3RlcmVkIG1lbWJlci4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjcmVhdGVkVXNlciA9IGF3YWl0IGRiLm1lbWJlci5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIGNvbnRhY3ROdW1iZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5DUkVBVEVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXF1ZXN0ZWQgdXNlciBoYXMgYmVlbiByZWdpc3RlcmVkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byByZWdpc3RlciB0aGlzIHVzZXIgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBhc3luYyB1blJlZ2lzdGVyTWVtYmVyIChyZXEpIHtcbiAgICAgICAgY29uc3QgbWVtYmVySWQgPSByZXEucGFyYW1zLmlkO1xuXG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgICAgICAgICAgICBpZDogbWVtYmVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhpcyB1c2VyIGlzIG5vdCBhbHJlYWR5IHJlZ2lzdGVyZWQgd2l0aCB1cy4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdNZW1iZXIudW5SZWdpc3RlcmVkWU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoaXMgdXNlciBoYXMgYWxyZWFkeSB1bnJlZ3NpdGVyZWQgd2l0aCB1cy4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgZGIubWVtYmVyLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgdW5SZWdpc3RlcmVkWU46IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogbWVtYmVySWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhlIHJlcXVlc3RlZCB1c2VyIGhhcyBiZWVuIHVucmVnaXN0ZXJlZC4nXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdVbmFibGUgdG8gdW5yZWdpc3RlciB0aGlzIHVzZXIgYXQgdGhlIG1vbWVudC4nLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2xvZ2ljL21lbWJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/*!****************************************!*\
  !*** ../validators/memberValidator.js ***!
  \****************************************/
/*! exports provided: validateMember */
/*! exports used: validateMember */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_validator__ = __webpack_require__(/*! validator */ 17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_validator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_validator__);\n\n\nconst validateMember = ({ username, contactNumber }) => {\n\n    let validationError = '';\n\n    if(username === '' || typeof(username) === 'number') {\n        validationError += 'Username cannot be empty and it should be a string, should be between 6-12 characters/digits. Cannot contain special characters. ';\n    }\n    else if (!__WEBPACK_IMPORTED_MODULE_0_validator___default.a.matches(username, /[a-zA-Z0-9\\s]{6,12}/i)) {\n        validationError += 'Username should be between 6-12 characters/digits. Cannot contain special characters. ';\n    }\n\n    if (typeof(contactNumber) === 'number') {\n        validationError += 'Contact number should be a string. ';\n    }\n    else if (contactNumber && !__WEBPACK_IMPORTED_MODULE_0_validator___default.a.isNumeric(contactNumber)) {\n        validationError += 'Contact number can contain only numbers. ';\n    }\n\n    if (validationError) {\n        throw Error(validationError);\n    }\n\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = validateMember;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdmFsaWRhdG9ycy9tZW1iZXJWYWxpZGF0b3IuanM/ZmJjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU1lbWJlciA9ICh7IHVzZXJuYW1lLCBjb250YWN0TnVtYmVyIH0pID0+IHtcblxuICAgIGxldCB2YWxpZGF0aW9uRXJyb3IgPSAnJztcblxuICAgIGlmKHVzZXJuYW1lID09PSAnJyB8fCB0eXBlb2YodXNlcm5hbWUpID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gJ1VzZXJuYW1lIGNhbm5vdCBiZSBlbXB0eSBhbmQgaXQgc2hvdWxkIGJlIGEgc3RyaW5nLCBzaG91bGQgYmUgYmV0d2VlbiA2LTEyIGNoYXJhY3RlcnMvZGlnaXRzLiBDYW5ub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuICc7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2YWxpZGF0b3IubWF0Y2hlcyh1c2VybmFtZSwgL1thLXpBLVowLTlcXHNdezYsMTJ9L2kpKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnVXNlcm5hbWUgc2hvdWxkIGJlIGJldHdlZW4gNi0xMiBjaGFyYWN0ZXJzL2RpZ2l0cy4gQ2Fubm90IGNvbnRhaW4gc3BlY2lhbCBjaGFyYWN0ZXJzLiAnO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YoY29udGFjdE51bWJlcikgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnQ29udGFjdCBudW1iZXIgc2hvdWxkIGJlIGEgc3RyaW5nLiAnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250YWN0TnVtYmVyICYmICF2YWxpZGF0b3IuaXNOdW1lcmljKGNvbnRhY3ROdW1iZXIpKSB7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSAnQ29udGFjdCBudW1iZXIgY2FuIGNvbnRhaW4gb25seSBudW1iZXJzLiAnO1xuICAgIH1cblxuICAgIGlmICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IodmFsaWRhdGlvbkVycm9yKTtcbiAgICB9XG5cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi92YWxpZGF0b3JzL21lbWJlclZhbGlkYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/*!****************************!*\
  !*** external "validator" ***!
  \****************************/
/*! dynamic exports provided */
/*! exports used: default */
/***/ (function(module, exports) {

eval("module.exports = require(\"validator\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ2YWxpZGF0b3JcIj81NGQxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInZhbGlkYXRvclwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcInZhbGlkYXRvclwiXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/*!****************************************************!*\
  !*** ../controllers/bookTransactionsController.js ***!
  \****************************************************/
/*! exports provided: bookTransactionsRouter */
/*! exports used: bookTransactionsRouter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express__ = __webpack_require__(/*! express */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_express___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_express__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__ = __webpack_require__(/*! ../middleware/handlers.js */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logic_bookTransactions_js__ = __webpack_require__(/*! ../logic/bookTransactions.js */ 19);\n\n\n\n\nconst bookTransactionsRouter = () => {\n\n    const bookTransactionsRouter = __WEBPACK_IMPORTED_MODULE_0_express___default.a.Router();\n\n    bookTransactionsRouter.post   ('/members/:memberId/books/:bookId',              async (req, res) => Object(__WEBPACK_IMPORTED_MODULE_1__middleware_handlers_js__[\"a\" /* requestHandler */])(req, res, __WEBPACK_IMPORTED_MODULE_2__logic_bookTransactions_js__[\"a\" /* default */].handleBookTransactions));\n\n    return bookTransactionsRouter;\n\n};\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = bookTransactionsRouter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vY29udHJvbGxlcnMvYm9va1RyYW5zYWN0aW9uc0NvbnRyb2xsZXIuanM/ZDY0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IHJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnLi4vbWlkZGxld2FyZS9oYW5kbGVycy5qcyc7XG5pbXBvcnQgQm9va1RyYW5zYWN0aW9ucyBmcm9tICcuLi9sb2dpYy9ib29rVHJhbnNhY3Rpb25zLmpzJztcblxuZXhwb3J0IGNvbnN0IGJvb2tUcmFuc2FjdGlvbnNSb3V0ZXIgPSAoKSA9PiB7XG5cbiAgICBjb25zdCBib29rVHJhbnNhY3Rpb25zUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuICAgIGJvb2tUcmFuc2FjdGlvbnNSb3V0ZXIucG9zdCAgICgnL21lbWJlcnMvOm1lbWJlcklkL2Jvb2tzLzpib29rSWQnLCAgICAgICAgICAgICAgYXN5bmMgKHJlcSwgcmVzKSA9PiByZXF1ZXN0SGFuZGxlcihyZXEsIHJlcywgQm9va1RyYW5zYWN0aW9ucy5oYW5kbGVCb29rVHJhbnNhY3Rpb25zKSk7XG5cbiAgICByZXR1cm4gYm9va1RyYW5zYWN0aW9uc1JvdXRlcjtcblxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9jb250cm9sbGVycy9ib29rVHJhbnNhY3Rpb25zQ29udHJvbGxlci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/*!************************************!*\
  !*** ../logic/bookTransactions.js ***!
  \************************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize__ = __webpack_require__(/*! sequelize */ 1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_sequelize___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_sequelize__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__db_db_js__ = __webpack_require__(/*! ../db/db.js */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__logger_js__ = __webpack_require__(/*! ../logger.js */ 0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes__ = __webpack_require__(/*! http-status-codes */ 7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_http_status_codes__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__logic_book_js__ = __webpack_require__(/*! ../logic/book.js */ 6);\n\n\n\n\n\n\nclass BookTransactions {\n\n    constructor () {\n        this.borrowBook = this.borrowBook.bind(this);\n        this.returnBook = this.returnBook.bind(this);\n        this.handleBookTransactions = this.handleBookTransactions.bind(this);\n    }\n\n    async borrowBook (req) {\n\n        const bookId = req.params.bookId;\n        const memberId = req.params.memberId;\n    \n        const existingMember = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.findOne({\n            where: {\n                id: memberId,\n                unRegisteredYN: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.eq]: false }\n            }\n        });\n\n        if (!existingMember) {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.UNAUTHORIZED,\n                result: `You must be a registered member to borrow this book. Please register first.`\n            }\n        }\n\n        if (existingMember.amountDue > 0) {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.FORBIDDEN,\n                result: `Please pay your due amount ${existingMember.amountDue} to borrow this book.`\n            }\n        }\n    \n        const bookAvailability = await __WEBPACK_IMPORTED_MODULE_4__logic_book_js__[\"a\" /* default */].checkBookAvailability(bookId);\n        \n        if (bookAvailability === true) {\n\n            try {\n\n                const book = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                    where: {\n                        id: bookId,\n                        deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                    }\n                });\n\n                await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.update({\n                    noOfBooksAvailable: book.noOfBooksAvailable - 1\n                }, {\n                    where: {\n                        id: bookId\n                    }\n                });\n\n                await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.update({\n                    noOfBooksTaken: existingMember.noOfBooksTaken + 1\n                }, {\n                    where: {\n                        id: memberId\n                    }\n                });\n\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                    result: 'One copy of the requested book has been lent to you.'\n                }\n\n            }\n            catch (error) {\n\n                __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                    result: 'Unable to lend this book at the moment due to technical issues.',\n                    error\n                }\n\n            }\n        }\n        else if (bookAvailability === false) {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                result: 'This book is not available at the moment.'\n            }\n        }\n        else {\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to lend this book at the moment due to technical issues.'\n            }\n        }\n    }\n\n    async returnBook (req) {\n\n        const bookId = req.params.bookId;\n        const memberId = req.params.memberId;\n\n        try {\n\n            const book = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.findOne({\n                where: {\n                    id: bookId,\n                    deleted: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n\n            const existingMember = await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.findOne({\n                where: {\n                    id: memberId,\n                    unRegisteredYN: { [__WEBPACK_IMPORTED_MODULE_0_sequelize___default.a.Op.ne]: true }\n                }\n            });\n            \n            if (!existingMember) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.UNAUTHORIZED,\n                    result: `You must be a registered member to return a book. Please register first.`\n                }\n            }\n\n            if (!book) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                    result: 'We did not lend you this book. Please check.'\n                }\n            }\n\n            if (existingMember.noOfBooksTaken === 0) {\n                return {\n                    status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                    result: 'You\\'ve returned all your books already. Please check.'\n                }\n            }\n\n            await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].book.update({\n                noOfBooksAvailable: book.noOfBooksAvailable + 1\n            }, {\n                where: {\n                    id: bookId\n                }\n            });\n\n            await __WEBPACK_IMPORTED_MODULE_1__db_db_js__[\"a\" /* db */].member.update({\n                noOfBooksTaken: existingMember.noOfBooksTaken - 1\n            }, {\n                where: {\n                    id: memberId\n                }\n            });\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.OK,\n                result: 'The return of your book has been accepted.'\n            }\n\n        }\n        catch (error) {\n\n            __WEBPACK_IMPORTED_MODULE_2__logger_js__[\"a\" /* default */].error(error);\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.INTERNAL_SERVER_ERROR,\n                result: 'Unable to accept this book at the moment due to technical issues.',\n                error\n            }\n\n        }\n    }\n\n    async handleBookTransactions (req) {\n\n        let transactionResult;\n\n        if (req.body.transactionType === 'BORROW') {\n\n            transactionResult = await this.borrowBook(req);\n            return transactionResult;\n\n        }\n        else if (req.body.transactionType === 'RETURN') {\n\n            transactionResult = await this.returnBook(req);\n            return transactionResult;\n\n        }\n        else {\n\n            return {\n                status: __WEBPACK_IMPORTED_MODULE_3_http_status_codes___default.a.BAD_REQUEST,\n                result: 'Missing or invalid transaction type. Specify either BORROW or RETURN as type. Should be a string.'\n            }\n\n        }\n    }\n};\n\nconst bookTransactionsInstance = new BookTransactions();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (bookTransactionsInstance);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbG9naWMvYm9va1RyYW5zYWN0aW9ucy5qcz82NmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTZXF1ZWxpemUgZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZGIvZGIuanMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXIuanMnO1xuaW1wb3J0IEh0dHBTdGF0dXMgZnJvbSAnaHR0cC1zdGF0dXMtY29kZXMnO1xuaW1wb3J0IEJvb2tGdW5jdGlvbnMgZnJvbSAnLi4vbG9naWMvYm9vay5qcyc7XG5cbmNsYXNzIEJvb2tUcmFuc2FjdGlvbnMge1xuXG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICB0aGlzLmJvcnJvd0Jvb2sgPSB0aGlzLmJvcnJvd0Jvb2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZXR1cm5Cb29rID0gdGhpcy5yZXR1cm5Cb29rLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQm9va1RyYW5zYWN0aW9ucyA9IHRoaXMuaGFuZGxlQm9va1RyYW5zYWN0aW9ucy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGJvcnJvd0Jvb2sgKHJlcSkge1xuXG4gICAgICAgIGNvbnN0IGJvb2tJZCA9IHJlcS5wYXJhbXMuYm9va0lkO1xuICAgICAgICBjb25zdCBtZW1iZXJJZCA9IHJlcS5wYXJhbXMubWVtYmVySWQ7XG4gICAgXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTWVtYmVyID0gYXdhaXQgZGIubWVtYmVyLmZpbmRPbmUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICBpZDogbWVtYmVySWQsXG4gICAgICAgICAgICAgICAgdW5SZWdpc3RlcmVkWU46IHsgW1NlcXVlbGl6ZS5PcC5lcV06IGZhbHNlIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFleGlzdGluZ01lbWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgICAgICAgICAgICAgIHJlc3VsdDogYFlvdSBtdXN0IGJlIGEgcmVnaXN0ZXJlZCBtZW1iZXIgdG8gYm9ycm93IHRoaXMgYm9vay4gUGxlYXNlIHJlZ2lzdGVyIGZpcnN0LmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleGlzdGluZ01lbWJlci5hbW91bnREdWUgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBgUGxlYXNlIHBheSB5b3VyIGR1ZSBhbW91bnQgJHtleGlzdGluZ01lbWJlci5hbW91bnREdWV9IHRvIGJvcnJvdyB0aGlzIGJvb2suYFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGJvb2tBdmFpbGFiaWxpdHkgPSBhd2FpdCBCb29rRnVuY3Rpb25zLmNoZWNrQm9va0F2YWlsYWJpbGl0eShib29rSWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGJvb2tBdmFpbGFiaWxpdHkgPT09IHRydWUpIHtcblxuICAgICAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGJvb2sgPSBhd2FpdCBkYi5ib29rLmZpbmRPbmUoe1xuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWQ6IHsgW1NlcXVlbGl6ZS5PcC5uZV06IHRydWUgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5ib29rLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogYm9vay5ub09mQm9va3NBdmFpbGFibGUgLSAxXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5tZW1iZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbm9PZkJvb2tzVGFrZW46IGV4aXN0aW5nTWVtYmVyLm5vT2ZCb29rc1Rha2VuICsgMVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtZW1iZXJJZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ09uZSBjb3B5IG9mIHRoZSByZXF1ZXN0ZWQgYm9vayBoYXMgYmVlbiBsZW50IHRvIHlvdS4nXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLklOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGxlbmQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChib29rQXZhaWxhYmlsaXR5ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVGhpcyBib29rIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhlIG1vbWVudC4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiAnVW5hYmxlIHRvIGxlbmQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmV0dXJuQm9vayAocmVxKSB7XG5cbiAgICAgICAgY29uc3QgYm9va0lkID0gcmVxLnBhcmFtcy5ib29rSWQ7XG4gICAgICAgIGNvbnN0IG1lbWJlcklkID0gcmVxLnBhcmFtcy5tZW1iZXJJZDtcblxuICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICBjb25zdCBib29rID0gYXdhaXQgZGIuYm9vay5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogYm9va0lkLFxuICAgICAgICAgICAgICAgICAgICBkZWxldGVkOiB7IFtTZXF1ZWxpemUuT3AubmVdOiB0cnVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdNZW1iZXIgPSBhd2FpdCBkYi5tZW1iZXIuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG1lbWJlcklkLFxuICAgICAgICAgICAgICAgICAgICB1blJlZ2lzdGVyZWRZTjogeyBbU2VxdWVsaXplLk9wLm5lXTogdHJ1ZSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdNZW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGBZb3UgbXVzdCBiZSBhIHJlZ2lzdGVyZWQgbWVtYmVyIHRvIHJldHVybiBhIGJvb2suIFBsZWFzZSByZWdpc3RlciBmaXJzdC5gXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWJvb2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogJ1dlIGRpZCBub3QgbGVuZCB5b3UgdGhpcyBib29rLiBQbGVhc2UgY2hlY2suJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nTWVtYmVyLm5vT2ZCb29rc1Rha2VuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLkJBRF9SRVFVRVNULFxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6ICdZb3VcXCd2ZSByZXR1cm5lZCBhbGwgeW91ciBib29rcyBhbHJlYWR5LiBQbGVhc2UgY2hlY2suJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgZGIuYm9vay51cGRhdGUoe1xuICAgICAgICAgICAgICAgIG5vT2ZCb29rc0F2YWlsYWJsZTogYm9vay5ub09mQm9va3NBdmFpbGFibGUgKyAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGJvb2tJZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBkYi5tZW1iZXIudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBub09mQm9va3NUYWtlbjogZXhpc3RpbmdNZW1iZXIubm9PZkJvb2tzVGFrZW4gLSAxXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG1lbWJlcklkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1RoZSByZXR1cm4gb2YgeW91ciBib29rIGhhcyBiZWVuIGFjY2VwdGVkLidcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogJ1VuYWJsZSB0byBhY2NlcHQgdGhpcyBib29rIGF0IHRoZSBtb21lbnQgZHVlIHRvIHRlY2huaWNhbCBpc3N1ZXMuJyxcbiAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVCb29rVHJhbnNhY3Rpb25zIChyZXEpIHtcblxuICAgICAgICBsZXQgdHJhbnNhY3Rpb25SZXN1bHQ7XG5cbiAgICAgICAgaWYgKHJlcS5ib2R5LnRyYW5zYWN0aW9uVHlwZSA9PT0gJ0JPUlJPVycpIHtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXN1bHQgPSBhd2FpdCB0aGlzLmJvcnJvd0Jvb2socmVxKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblJlc3VsdDtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlcS5ib2R5LnRyYW5zYWN0aW9uVHlwZSA9PT0gJ1JFVFVSTicpIHtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnJldHVybkJvb2socmVxKTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvblJlc3VsdDtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgICAgICAgICByZXN1bHQ6ICdNaXNzaW5nIG9yIGludmFsaWQgdHJhbnNhY3Rpb24gdHlwZS4gU3BlY2lmeSBlaXRoZXIgQk9SUk9XIG9yIFJFVFVSTiBhcyB0eXBlLiBTaG91bGQgYmUgYSBzdHJpbmcuJ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBib29rVHJhbnNhY3Rpb25zSW5zdGFuY2UgPSBuZXcgQm9va1RyYW5zYWN0aW9ucygpO1xuXG5leHBvcnQgZGVmYXVsdCBib29rVHJhbnNhY3Rpb25zSW5zdGFuY2U7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vbG9naWMvYm9va1RyYW5zYWN0aW9ucy5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/*!**************************************!*\
  !*** ../validators/bookValidator.js ***!
  \**************************************/
/*! exports provided: validateBook */
/*! exports used: validateBook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_validator__ = __webpack_require__(/*! validator */ 17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_validator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_validator__);\n\n\nconst validateName = (name) => {\n    if (!name || !(typeof(name) === 'string')) {\n        return 'Name of the book cannot be empty, should be a string, has to contain between 6 and 20 characters and it cannot contain special characters. ';\n    }\n    else if (!__WEBPACK_IMPORTED_MODULE_0_validator___default.a.matches(name, /[a-zA-Z0-9\\s]{6,20}/i)) {\n        return 'Name of the book has to contain between 6 and 20 characters and it cannot contain special characters. ';\n    }\n    else {\n        return '';\n    }\n}\n\nconst validateAuthor = (author) => {\n    if (!author || !(typeof(author) === 'string')) {\n        return 'Author of the book cannot be empty and it should be a string. ';\n    }\n    else {\n        return '';\n    }\n}\n\nconst validateShelfNumber = (shelfNumber) => {\n    if (!shelfNumber || !(typeof(shelfNumber) === 'string')) {\n        return 'Shelf number of the book cannot be empty and it should be a string. ';\n    }\n    else {\n        return '';\n    }\n}\n\nconst validatePublishedDate = (publishedDate) => {\n    if(publishedDate && !publishedDate.match(/[0-9]{2}\\/[0-9]{2}\\/[1,2][7,8,9,0][0-9]{2}/)) {\n        return 'Published date of the book is not valid. ';\n    }\n    else {\n        return '';\n    }\n}\n\nconst validateEdition = (edition) => {\n    if (edition && !(typeof(edition) === 'string')) {\n        return 'Edition number of the book is not valid. It has to be a number. ';\n    }\n    else {\n        return '';\n    }\n}\n\nconst validateBook = ({ name, author, edition, publishedDate, shelfNumber }, { operation = 'noop' }) => {\n\n    let validationError = '';\n\n    if (operation === 'add') {\n\n        validationError += validateName(name);\n        validationError += validateAuthor(author);\n        validationError += validateShelfNumber(shelfNumber);\n        validationError += validatePublishedDate(publishedDate);\n        validationError += validateEdition(edition);\n\n    }\n\n    if (operation === 'update') {\n\n        validationError += name !== undefined ? validateName(name) : '';\n        validationError += author !== undefined ? validateAuthor(author) : '';\n        validationError += shelfNumber !== undefined ? validateShelfNumber(shelfNumber) : '';\n        validationError += publishedDate !== undefined ? validatePublishedDate(publishedDate) : '';\n        validationError += edition !== undefined ? validateEdition(edition) : '';\n\n    }\n\n    if (validationError) {\n        throw Error(validationError);\n    }\n    \n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = validateBook;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vdmFsaWRhdG9ycy9ib29rVmFsaWRhdG9yLmpzP2FkNTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRvciBmcm9tICd2YWxpZGF0b3InO1xuXG5jb25zdCB2YWxpZGF0ZU5hbWUgPSAobmFtZSkgPT4ge1xuICAgIGlmICghbmFtZSB8fCAhKHR5cGVvZihuYW1lKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybiAnTmFtZSBvZiB0aGUgYm9vayBjYW5ub3QgYmUgZW1wdHksIHNob3VsZCBiZSBhIHN0cmluZywgaGFzIHRvIGNvbnRhaW4gYmV0d2VlbiA2IGFuZCAyMCBjaGFyYWN0ZXJzIGFuZCBpdCBjYW5ub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMuICc7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2YWxpZGF0b3IubWF0Y2hlcyhuYW1lLCAvW2EtekEtWjAtOVxcc117NiwyMH0vaSkpIHtcbiAgICAgICAgcmV0dXJuICdOYW1lIG9mIHRoZSBib29rIGhhcyB0byBjb250YWluIGJldHdlZW4gNiBhbmQgMjAgY2hhcmFjdGVycyBhbmQgaXQgY2Fubm90IGNvbnRhaW4gc3BlY2lhbCBjaGFyYWN0ZXJzLiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuY29uc3QgdmFsaWRhdGVBdXRob3IgPSAoYXV0aG9yKSA9PiB7XG4gICAgaWYgKCFhdXRob3IgfHwgISh0eXBlb2YoYXV0aG9yKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHJldHVybiAnQXV0aG9yIG9mIHRoZSBib29rIGNhbm5vdCBiZSBlbXB0eSBhbmQgaXQgc2hvdWxkIGJlIGEgc3RyaW5nLiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cblxuY29uc3QgdmFsaWRhdGVTaGVsZk51bWJlciA9IChzaGVsZk51bWJlcikgPT4ge1xuICAgIGlmICghc2hlbGZOdW1iZXIgfHwgISh0eXBlb2Yoc2hlbGZOdW1iZXIpID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuICdTaGVsZiBudW1iZXIgb2YgdGhlIGJvb2sgY2Fubm90IGJlIGVtcHR5IGFuZCBpdCBzaG91bGQgYmUgYSBzdHJpbmcuICc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuXG5jb25zdCB2YWxpZGF0ZVB1Ymxpc2hlZERhdGUgPSAocHVibGlzaGVkRGF0ZSkgPT4ge1xuICAgIGlmKHB1Ymxpc2hlZERhdGUgJiYgIXB1Ymxpc2hlZERhdGUubWF0Y2goL1swLTldezJ9XFwvWzAtOV17Mn1cXC9bMSwyXVs3LDgsOSwwXVswLTldezJ9LykpIHtcbiAgICAgICAgcmV0dXJuICdQdWJsaXNoZWQgZGF0ZSBvZiB0aGUgYm9vayBpcyBub3QgdmFsaWQuICc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuXG5jb25zdCB2YWxpZGF0ZUVkaXRpb24gPSAoZWRpdGlvbikgPT4ge1xuICAgIGlmIChlZGl0aW9uICYmICEodHlwZW9mKGVkaXRpb24pID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuICdFZGl0aW9uIG51bWJlciBvZiB0aGUgYm9vayBpcyBub3QgdmFsaWQuIEl0IGhhcyB0byBiZSBhIG51bWJlci4gJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUJvb2sgPSAoeyBuYW1lLCBhdXRob3IsIGVkaXRpb24sIHB1Ymxpc2hlZERhdGUsIHNoZWxmTnVtYmVyIH0sIHsgb3BlcmF0aW9uID0gJ25vb3AnIH0pID0+IHtcblxuICAgIGxldCB2YWxpZGF0aW9uRXJyb3IgPSAnJztcblxuICAgIGlmIChvcGVyYXRpb24gPT09ICdhZGQnKSB7XG5cbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHZhbGlkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHZhbGlkYXRlQXV0aG9yKGF1dGhvcik7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSB2YWxpZGF0ZVNoZWxmTnVtYmVyKHNoZWxmTnVtYmVyKTtcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHZhbGlkYXRlUHVibGlzaGVkRGF0ZShwdWJsaXNoZWREYXRlKTtcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHZhbGlkYXRlRWRpdGlvbihlZGl0aW9uKTtcblxuICAgIH1cblxuICAgIGlmIChvcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7XG5cbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IG5hbWUgIT09IHVuZGVmaW5lZCA/IHZhbGlkYXRlTmFtZShuYW1lKSA6ICcnO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gYXV0aG9yICE9PSB1bmRlZmluZWQgPyB2YWxpZGF0ZUF1dGhvcihhdXRob3IpIDogJyc7XG4gICAgICAgIHZhbGlkYXRpb25FcnJvciArPSBzaGVsZk51bWJlciAhPT0gdW5kZWZpbmVkID8gdmFsaWRhdGVTaGVsZk51bWJlcihzaGVsZk51bWJlcikgOiAnJztcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yICs9IHB1Ymxpc2hlZERhdGUgIT09IHVuZGVmaW5lZCA/IHZhbGlkYXRlUHVibGlzaGVkRGF0ZShwdWJsaXNoZWREYXRlKSA6ICcnO1xuICAgICAgICB2YWxpZGF0aW9uRXJyb3IgKz0gZWRpdGlvbiAhPT0gdW5kZWZpbmVkID8gdmFsaWRhdGVFZGl0aW9uKGVkaXRpb24pIDogJyc7XG5cbiAgICB9XG5cbiAgICBpZiAodmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIHRocm93IEVycm9yKHZhbGlkYXRpb25FcnJvcik7XG4gICAgfVxuICAgIFxufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL3ZhbGlkYXRvcnMvYm9va1ZhbGlkYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/*!**************************************!*\
  !*** ../constants/bookProperties.js ***!
  \**************************************/
/*! exports provided: bookProperties */
/*! exports used: bookProperties */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("const bookProperties = { \n    'name': 'NAME', \n    'author': 'AUTHOR', \n    'publishedDate': 'PUBLISHEDDATE', \n    'edition': 'EDITION', \n    'shelfNumber': 'SHELFNUMBER' \n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = bookProperties;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vY29uc3RhbnRzL2Jvb2tQcm9wZXJ0aWVzLmpzPzU1OTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGJvb2tQcm9wZXJ0aWVzID0geyBcbiAgICAnbmFtZSc6ICdOQU1FJywgXG4gICAgJ2F1dGhvcic6ICdBVVRIT1InLCBcbiAgICAncHVibGlzaGVkRGF0ZSc6ICdQVUJMSVNIRUREQVRFJywgXG4gICAgJ2VkaXRpb24nOiAnRURJVElPTicsIFxuICAgICdzaGVsZk51bWJlcic6ICdTSEVMRk5VTUJFUicgXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vY29uc3RhbnRzL2Jvb2tQcm9wZXJ0aWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///21\n");

/***/ })
/******/ ]);